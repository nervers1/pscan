<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.iruen.pscan.mapper.PolicyMapper">

	<resultMap id="policyMap" type="com.iruen.pscan.vo.Policy" >
		<result property="typeCd" 		column="TYPECD"/>
		<result property="type" 		column="TYPE"/>
		<result property="checkYn" 		column="CHECKYN"/>
		<result property="bgItmNm" 		column="BGITMNM"/>
		<result property="smItmNm" 		column="SMITMNM"/>
		<result property="pattern" 		column="PATTERN"/>
		<result property="patternEx" 	column="PATTERNEX"/>
		<result property="maskCnt" 		column="MASKCNT"/>
		<result property="maskDir" 		column="MASKDIR"/>
		<result property="exprYn" 		column="EXPRYN"/>
	</resultMap>
	
	<resultMap type="kpic.model.CheckPattern" id="pattern">
		<result property="typeCd" 		column="TYPECD"/>
		<result property="type" 		column="TYPE"/>
		<result property="checkYn" 		column="CHECKYN"/>
		<result property="bgitmNm" 		column="BGITMNM"/>
		<result property="smitmNm" 		column="SMITMNM"/>
		<result property="pattern" 		column="PATTERN"/>
		<result property="patternEx" 	column="PATTERNEX"/>
		<result property="maskcnt" 		column="MASKCNT"/>
		<result property="maskdir" 		column="MASKDIR"/>
		<result property="exprYn" 		column="EXPRYN"/>
	</resultMap>
	
	<select id="listPolicy" resultMap="policyMap" parameterType="com.iruen.pscan.vo.Policy">
	   SELECT TYPECD
			, TYPE
			, CHECKYN
			, BGITMNM
			, SMITMNM
			, PATTERN
			, PATTERNEX
			, MASKCNT
			, MASKDIR
			, EXPRYN
	     FROM checkpattern
       <where>
		<if test="exprYn != null and exprYn != ''">
		  AND EXPRYN = #{exprYn}
		</if>
       </where>
	</select>
	
	<select id="listPattern" resultMap="pattern" parameterType="com.iruen.pscan.vo.CheckParam">
	   SELECT TYPECD
			, TYPE
			, CHECKYN
			, BGITMNM
			, SMITMNM
			, PATTERN
			, PATTERNEX
			, MASKCNT
			, MASKDIR
			, EXPRYN
	     FROM checkpattern
		WHERE EXPRYN = 'Y'
		  AND CHECKYN = 'Y'
		  AND TYPECD IN
		  <foreach collection="typeCds" item="item" index="index" separator="," open="(" close=")">
		  	  #{item.value}
		  </foreach>
	</select>
</mapper>
