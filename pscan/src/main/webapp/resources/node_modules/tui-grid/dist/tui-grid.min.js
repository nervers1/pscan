/*!
 * bundle created at "Thu Apr 05 2018 19:21:48 GMT+0900 (KST)"
 * version: 2.10.0
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("underscore"),require("tui-code-snippet"),require("backbone"),require("jquery"),require("tui-date-picker"),require("tui-pagination")):"function"==typeof define&&define.amd?define(["underscore","tui-code-snippet","backbone","jquery","tui-date-picker","tui-pagination"],t):"object"==typeof exports?exports.Grid=t(require("underscore"),require("tui-code-snippet"),require("backbone"),require("jquery"),require("tui-date-picker"),require("tui-pagination")):(e.tui=e.tui||{},e.tui.Grid=t(e._,e.tui&&e.tui.util,e.Backbone,e.$,e.tui&&e.tui.DatePicker,e.tui&&e.tui.Pagination))}(this,function(e,t,n,i,o,s){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=n(1);n(80),i.setLanguage("en"),e.exports=i},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(4),a=n(6),r=n(31),l=n(56),d=n(57),u=n(58),h=n(59),c=n(69),g=n(70),m=n(73),f=n(16),p=n(40),M=n(74),_=n(10).themeName,C={},w=s.extend({initialize:function(e){e=o.extend({usageStatistics:!0},e),e.footer&&(f.warning('The "footer" option is deprecated since 2.5.0 and replaced by "summary" option.'),e.summary=e.footer),this.id=f.getUniqueKey(),this.domState=new d(this.$el),this.domEventBus=l.create(),this.modelManager=this._createModelManager(e),this.painterManager=this._createPainterManager(),this.componentHolder=this._createComponentHolder(e.pagination),this.viewFactory=this._createViewFactory(e),this.container=this.viewFactory.createContainer(),this.publicEventEmitter=this._createPublicEventEmitter(),this.container.render(),this.refreshLayout(),M.isApplied()||M.apply(_.DEFAULT),this.addOn={},C[this.id]=this,e.data&&this.setData(e.data),e.usageStatistics&&f.sendHostNameToGA()},_createModelManager:function(e){var t=i.assign({},e,{gridId:this.id,publicObject:this});return i.omit(t,"el"),new a(t,this.domState,this.domEventBus)},_createPainterManager:function(){var e=new c({focusModel:this.modelManager.focusModel,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,selectionModel:this.modelManager.selectionModel});return new h({gridId:this.id,selectType:this.modelManager.columnModel.get("selectType"),fixedRowHeight:this.modelManager.dimensionModel.get("fixedRowHeight"),domEventBus:this.domEventBus,controller:e})},_createViewFactory:function(e){var t=i.pick(e,["heightResizable","summary"]),n={modelManager:this.modelManager,painterManager:this.painterManager,componentHolder:this.componentHolder,domEventBus:this.domEventBus,domState:this.domState};return new r(i.assign(n,t))},_createComponentHolder:function(e){return new m({pagination:e})},_createPublicEventEmitter:function(){var e=new u(this);return e.listenToFocusModel(this.modelManager.focusModel),e.listenToDomEventBus(this.domEventBus),e.listenToDataModel(this.modelManager.dataModel),e.listenToSelectionModel(this.modelManager.selectionModel),e},disable:function(){this.modelManager.dataModel.setDisabled(!0)},enable:function(){this.modelManager.dataModel.setDisabled(!1)},disableRow:function(e){this.modelManager.dataModel.disableRow(e)},enableRow:function(e){this.modelManager.dataModel.enableRow(e)},getValue:function(e,t,n){return this.modelManager.dataModel.getValue(e,t,n)},getColumnValues:function(e,t){return this.modelManager.dataModel.getColumnValues(e,t)},getRow:function(e,t){return this.modelManager.dataModel.getRowData(e,t)},getRowAt:function(e,t){return this.modelManager.dataModel.getRowDataAt(e,t)},getRowCount:function(){return this.modelManager.dataModel.length},getFocusedCell:function(){var e=this.modelManager.focusModel.which(),t=this.getValue(e.rowKey,e.columnName);return{rowKey:e.rowKey,columnName:e.columnName,value:t}},getElement:function(e,t){return this.modelManager.dataModel.getElement(e,t)},setValue:function(e,t,n){this.modelManager.dataModel.setValue(e,t,n)},setColumnValues:function(e,t,n){this.modelManager.dataModel.setColumnValues(e,t,n)},resetData:function(e){this.modelManager.dataModel.resetData(e)},setData:function(e,t){this.modelManager.dataModel.setData(e,!0,t)},setBodyHeight:function(e){this.modelManager.dimensionModel.set("bodyHeight",e)},focus:function(e,t,n){this.modelManager.focusModel.focusClipboard(),this.modelManager.focusModel.focus(e,t,n)},focusAt:function(e,t,n){this.modelManager.focusModel.focusAt(e,t,n)},focusIn:function(e,t,n){this.modelManager.focusModel.focusIn(e,t,n)},focusInAt:function(e,t,n){this.modelManager.focusModel.focusInAt(e,t,n)},activateFocus:function(){this.modelManager.focusModel.focusClipboard()},blur:function(){this.modelManager.focusModel.blur()},checkAll:function(){this.modelManager.dataModel.checkAll()},check:function(e){this.modelManager.dataModel.check(e)},uncheckAll:function(){this.modelManager.dataModel.uncheckAll()},uncheck:function(e){this.modelManager.dataModel.uncheck(e)},clear:function(){this.modelManager.dataModel.setData([])},removeRow:function(e,t){o.isBoolean(t)&&t&&(t={removeOriginalData:!0}),this.modelManager.dataModel.removeRow(e,t)},removeCheckedRows:function(e){var t=this.getCheckedRowKeys(),n=p.get("net.confirmDelete",{count:t.length});return!(!(t.length>0)||e&&!confirm(n))&&(i.each(t,function(e){this.modelManager.dataModel.removeRow(e)},this),!0)},enableCheck:function(e){this.modelManager.dataModel.enableCheck(e)},disableCheck:function(e){this.modelManager.dataModel.disableCheck(e)},getCheckedRowKeys:function(e){var t=this.modelManager.dataModel.getRows(!0),n=i.pluck(t,"rowKey");return e?JSON.stringify(n):n},getCheckedRows:function(e){var t=this.modelManager.dataModel.getRows(!0);return e?JSON.stringify(t):t},getColumns:function(){return this.modelManager.columnModel.get("dataColumns")},getModifiedRows:function(e){return this.modelManager.dataModel.getModifiedRows(e)},appendRow:function(e,t){this.modelManager.dataModel.append(e,t)},prependRow:function(e,t){this.modelManager.dataModel.prepend(e,t)},isModified:function(){return this.modelManager.dataModel.isModified()},getAddOn:function(e){return e?this.addOn[e]:this.addOn},restore:function(){this.modelManager.dataModel.restore()},setFrozenColumnCount:function(e){this.modelManager.columnModel.set("frozenCount",e)},setColumns:function(e){this.modelManager.columnModel.set("columns",e)},use:function(e,t){return"Net"===e&&(t=i.assign({domEventBus:this.domEventBus,renderModel:this.modelManager.renderModel,dataModel:this.modelManager.dataModel,pagination:this.componentHolder.getInstance("pagination")},t),this.addOn.Net=new g(t),this.publicEventEmitter.listenToNetAddon(this.addOn.Net)),this},getRows:function(){return this.modelManager.dataModel.getRows()},sort:function(e,t){this.modelManager.dataModel.sortByField(e,t)},unSort:function(){this.sort("rowKey")},getSortState:function(){return this.modelManager.dataModel.sortOptions},addCellClassName:function(e,t,n){this.modelManager.dataModel.get(e).addCellClassName(t,n)},addRowClassName:function(e,t){this.modelManager.dataModel.get(e).addClassName(t)},removeCellClassName:function(e,t,n){this.modelManager.dataModel.get(e).removeCellClassName(t,n)},removeRowClassName:function(e,t){this.modelManager.dataModel.get(e).removeClassName(t)},getRowSpanData:function(e,t){return this.modelManager.dataModel.getRowSpanData(e,t)},getIndexOfRow:function(e){return this.modelManager.dataModel.indexOfRowKey(e)},getIndexOfColumn:function(e){return this.modelManager.columnModel.indexOfColumnName(e)},getPagination:function(){return this.componentHolder.getInstance("pagination")},setWidth:function(e){this.modelManager.dimensionModel.setWidth(e)},setHeight:function(e){this.modelManager.dimensionModel.setHeight(e)},refreshLayout:function(){this.modelManager.dimensionModel.refreshLayout()},resetColumnWidths:function(){this.modelManager.coordColumnModel.resetColumnWidths()},showColumn:function(){var e=o.toArray(arguments);this.modelManager.columnModel.setHidden(e,!1)},hideColumn:function(){var e=o.toArray(arguments);this.modelManager.columnModel.setHidden(e,!0)},setSummaryColumnContent:function(e,t){this.modelManager.columnModel.setSummaryContent(e,t)},setFooterColumnContent:function(e,t){this.modelManager.columnModel.setSummaryContent(e,t)},validate:function(){return this.modelManager.dataModel.validate()},findRows:function(e){var t=this.modelManager.dataModel.getRows();return i.where(t,e)},copyToClipboard:function(){this.modelManager.clipboardModel.setClipboardText(),window.clipboardData||document.execCommand("copy")},selection:function(e){var t=this.modelManager.selectionModel,n=e.start,i=e.end,o=t.getSelectionUnit();t.start(n[0],n[1],o),t.update(i[0],i[1],o)},destroy:function(){this.modelManager.destroy(),this.container.destroy(),this.modelManager=this.container=null}});w.getInstanceById=function(e){return C[e]},w.applyTheme=function(e,t){M.apply(e,t)},w.setLanguage=function(e,t){p.setLanguage(e,t)},e.exports=w},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";var i=n(2),o=n(5),s=o.View.extend({initialize:function(){this._children=[]},_addChildren:function(e){i.isArray(e)||(e=[e]),[].push.apply(this._children,i.compact(e))},_renderChildren:function(){var e=i.map(this._children,function(e){return e.render().el});return e},_triggerChildrenAppended:function(){i.each(this._children,function(e){e.trigger("appended")})},destroy:function(){this.stopListening(),this._destroyChildren(),this.remove()},_destroyChildren:function(){if(this._children)for(;this._children.length>0;)this._children.pop().destroy()}});e.exports=s},function(e,t){e.exports=n},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(3),a=n(8),r=n(11),l=n(19),d=n(20),u=n(21),h=n(22),c=n(23),g=n(24),m=n(27),f=n(28),p=n(29),M=n(30),_=n(16),C={data:[],columns:[],keyColumnName:null,selectType:"",autoNumbering:!0,header:{height:35,complexColumns:[]},columnOptions:{minWidth:50,resizable:!0,frozenCount:0},fitToParentHeight:!1,fixedRowHeight:!1,fixedHeight:!1,showDummyRows:!1,virtualScrolling:!1,copyOptions:null,scrollX:!0,scrollY:!0,useClientSort:!0,editingEvent:"dblclick",rowHeight:"auto",bodyHeight:"auto",minRowHeight:27,minBodyHeight:130,selectionUnit:"cell"},w=s.defineClass({init:function(e,t,n){e=i.extend(!0,{},C,e),this.gridId=e.gridId,this.columnModel=this._createColumnModel(e),this.dataModel=this._createDataModel(e,t,n),this.dimensionModel=this._createDimensionModel(e,t,n),this.coordRowModel=this._createCoordRowModel(t),this.focusModel=this._createFocusModel(e,t,n),this.coordColumnModel=this._createCoordColumnModel(e.columnOptions,n),this.renderModel=this._createRenderModel(e),this.coordConverterModel=this._createCoordConverterModel(),this.selectionModel=this._createSelectionModel(e,n),this.summaryModel=this._createSummaryModel(e.summary),this.clipboardModel=this._createClipboardModel(e,n)},_createColumnModel:function(e){return new a({keyColumnName:e.keyColumnName,frozenCount:e.columnOptions.frozenCount,complexHeaderColumns:e.header.complexColumns,copyOptions:e.copyOptions,columns:e.columns,rowHeaders:e.rowHeaders})},_createDataModel:function(e,t,n){return new r([],{gridId:this.gridId,domState:t,domEventBus:n,columnModel:this.columnModel,useClientSort:e.useClientSort,publicObject:e.publicObject})},_createDimensionModel:function(e,t,n){var i,s=e.columnOptions,a=!isNaN(e.rowHeight),r="auto"!==e.bodyHeight,d=e.minRowHeight,u=e.minBodyHeight,h=a?Math.max(d,e.rowHeight):d,c=r?Math.max(u,e.bodyHeight):u,g=o.isUndefined(s.frozenBorderWidth)?1:s.frozenBorderWidth,m={headerHeight:e.header.height,bodyHeight:c,summaryHeight:e.summary?e.summary.height:0,summaryPosition:e.summary?e.summary.position||"bottom":null,rowHeight:h,fitToParentHeight:"fitToParent"===e.bodyHeight,scrollX:!!e.scrollX,scrollY:!!e.scrollY,fixedRowHeight:a,fixedHeight:r,minRowHeight:d,minBodyHeight:u||h,minimumColumnWidth:s.minWidth,frozenBorderWidth:s.frozenCount?g:null};return a===!1&&e.virtualScrolling&&(_.warning("If the virtualScrolling is set to true, the rowHeight must be set to number type."),m.fixedRowHeight=!0),i=new l(m,{columnModel:this.columnModel,dataModel:this.dataModel,domState:t,domEventBus:n})},_createCoordRowModel:function(e){return new d(null,{dataModel:this.dataModel,dimensionModel:this.dimensionModel,domState:e})},_createCoordColumnModel:function(e,t){var n={resizable:e.resizable};return new u(n,{columnModel:this.columnModel,dimensionModel:this.dimensionModel,domEventBus:t})},_createCoordConverterModel:function(){return new h(null,{columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel,focusModel:this.focusModel,coordRowModel:this.coordRowModel,renderModel:this.renderModel,coordColumnModel:this.coordColumnModel})},_createFocusModel:function(e,t,n){return new c(null,{columnModel:this.columnModel,dataModel:this.dataModel,coordRowModel:this.coordRowModel,domEventBus:n,domState:t,editingEvent:e.editingEvent})},_createSelectionModel:function(e,t){return new f({selectionUnit:e.selectionUnit},{columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel,coordConverterModel:this.coordConverterModel,coordRowModel:this.coordRowModel,renderModel:this.renderModel,focusModel:this.focusModel,domEventBus:t})},_createRenderModel:function(e){var t,n,i;return t={emptyMessage:e.emptyMessage,showDummyRows:e.showDummyRows},n={columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel,focusModel:this.focusModel,coordRowModel:this.coordRowModel,coordColumnModel:this.coordColumnModel},new(i=e.virtualScrolling?m:g)(t,n)},_createSummaryModel:function(e){var t=[];return e&&e.columnContent?(o.each(e.columnContent,function(e,n){o.isFunction(e.template)&&e.useAutoSummary!==!1&&t.push(n)}),new p(null,{dataModel:this.dataModel,autoColumnNames:t})):null},_createClipboardModel:function(e,t){return new M(null,{columnModel:this.columnModel,dataModel:this.dataModel,selectionModel:this.selectionModel,renderModel:this.renderModel,focusModel:this.focusModel,copyOptions:e.copyOptions,domEventBus:t})},destroy:function(){o.each(this,function(e,t){e&&s.isFunction(e._destroy)&&e._destroy(),e&&s.isFunction(e.stopListening)&&e.stopListening(),this[t]=null},this)}});e.exports=w},function(e,t){e.exports=i},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(3),a=n(9),r=n(10).frame,l={rowNum:{type:"rowNum",title:"No.",name:"_number",align:"center",fixedWidth:!0,width:60,hidden:!1},checkbox:{type:"checkbox",title:'<input type="checkbox" />',name:"_button",align:"center",fixedWidth:!0,width:40,hidden:!1,editOptions:{type:"mainButton"}},radio:{type:"radio",title:"select",name:"_button",align:"center",fixedWidth:!0,width:40,hidden:!1,editOptions:{type:"mainButton"}}},d=a.extend({initialize:function(){a.prototype.initialize.apply(this,arguments),this.textType={normal:!0,text:!0,password:!0},this._setColumns(this.get("rowHeaders"),this.get("columns")),this.on("change",this._onChange,this)},defaults:{keyColumnName:null,frozenCount:0,rowHeaders:[],dataColumns:[],visibleColumns:[],selectType:"",columnModelMap:{},relationsMap:{},complexHeaderColumns:[],copyOptions:{useFormattedValue:!1}},at:function(e,t){var n=t?this.getVisibleColumns():this.get("dataColumns");return n[e]},indexOfColumnName:function(e,t){var n;return n=t?this.getVisibleColumns():this.get("dataColumns"),o.findIndex(n,{name:e})},isLside:function(e){var t=this.indexOfColumnName(e,!0),n=this.getVisibleFrozenCount(!1);return t>-1&&t<n},getVisibleColumns:function(e,t){var n,i=t?0:this.getVisibleMetaColumnCount(),o=this.getVisibleFrozenCount(t);return e=e&&e.toUpperCase(),n=e===r.L?this.get("visibleColumns").slice(i,o):e===r.R?this.get("visibleColumns").slice(o):this.get("visibleColumns").slice(i)},getVisibleMetaColumnCount:function(){var e=this.get("rowHeaders"),t=e.length,n=o.where(e,{hidden:!0}).length;return t-n},getVisibleFrozenCount:function(e){var t,n,i=this.get("frozenCount"),s=o.first(this.get("dataColumns"),i);return t=o.filter(s,function(e){return!e.hidden}),n=t.length,e&&(n+=this.getVisibleMetaColumnCount()),n},getColumnModel:function(e){return this.get("columnModelMap")[e]},isTextType:function(e){return!!this.textType[this.getEditType(e)]},getEditType:function(e){var t=this.getColumnModel(e),n="normal";return"_button"===e||"_number"===e?n=e:t&&t.editOptions&&t.editOptions.type&&(n=t.editOptions.type),n},copyVisibleTextOfEditingColumn:function(e){var t=this.getColumnModel(e);return!!s.pick(t,"editOptions","listItems")&&!!s.pick(t,"copyOptions","useListItemText")},_makeVisibleColumns:function(e,t){return e=e||this.get("rowHeaders"),t=t||this.get("dataColumns"),o.filter(e.concat(t),function(e){return!e.hidden})},_getRelationListMap:function(e){var t={};return o.each(e,function(e){var n=e.name;e.relations&&(t[n]=e.relations)}),t},getIgnoredColumnNames:function(){var e=this.get("dataColumns"),t=[];return o.each(e,function(e){e.ignored&&t.push(e.name)}),t},_setColumns:function(e,t,n){var a,r,l;s.isUndefined(n)&&(n=this.get("frozenCount")),e=this._getRowHeadersData(e),l=i.extend(!0,[],t),a=this._getRelationListMap(l),r=this._makeVisibleColumns(e,l),this.set({selectType:this._getSelectType(e),rowHeaders:e,dataColumns:l,columnModelMap:o.indexBy(e.concat(l),"name"),relationsMap:a,frozenCount:Math.max(0,n),visibleColumns:r},{silent:!0}),this.unset("columns",{silent:!0}),this.trigger("columnModelChange")},_getRowHeadersData:function(e){var t,n,s,a,r=[];return o.each(e,function(e){n=o.isObject(e),t=n?e.type:e,s=l[t],n?(a=e.title,e=i.extend({},s,e)):e=s,e.template&&!a&&"rowNum"!==t&&(e.title=e.template({className:"",name:"",disabled:"",checked:""})),o.findIndex(r,{name:e.name})===-1&&r.push(e)},this),r},_getSelectType:function(e){var t=o.findWhere(e,{name:"_button"});return t?t.type:""},_onChange:function(e){var t=e.changed,n=t.frozenCount,i=t.columns||this.get("dataColumns"),o=t.rowHeaders||this.get("rowHeaders");this._setColumns(o,i,n)},setHidden:function(e,t){for(var n,i,o,s;e.length;)n=e.shift(),o=this.getColumnModel(n),o?o.hidden=t:(i=this.getUnitColumnNamesIfMerged(n),e.push.apply(e,i));s=this._makeVisibleColumns(this.get("rowHeaders"),this.get("dataColumns")),this.set("visibleColumns",s,{silent:!0}),this.trigger("columnModelChange")},getUnitColumnNamesIfMerged:function(e){var t,n,i,s=this.get("complexHeaderColumns"),a=[],r=[];for(a.push(e);a.length;)t=a.shift(),n=this.getColumnModel(t),n?r.push(t):(i=o.findWhere(s,{name:t}),i&&a.push.apply(a,i.childNames));return o.uniq(r)},getCopyOptions:function(e){var t=this.getColumnModel(e);return o.extend({},this.get("copyOptions"),t.copyOptions)},setSummaryContent:function(e,t){this.trigger("setSummaryContent",e,t)}});d._defaultRowHeaders=l,e.exports=d},function(e,t,n){"use strict";var i=n(5),o=i.Model.extend({});e.exports=o},function(e,t,n){"use strict";var i=n(2),o={TAB:9,ENTER:13,CTRL:17,ESC:27,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,CHAR_A:65,CHAR_C:67,CHAR_F:70,CHAR_R:82,CHAR_V:86,LEFT_WINDOW_KEY:91,F5:116,BACKSPACE:8,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,DEL:46,UNDEFINED:229};e.exports={keyCode:o,keyName:i.invert(o),renderState:{LOADING:"LOADING",DONE:"DONE",EMPTY:"EMPTY"},dimension:{CELL_BORDER_WIDTH:1,TABLE_BORDER_WIDTH:1,RESIZE_HANDLE_WIDTH:7},frame:{L:"L",R:"R"},attrName:{ROW_KEY:"data-row-key",COLUMN_NAME:"data-column-name",COLUMN_INDEX:"data-column-index",EDIT_TYPE:"data-edit-type",GRID_ID:"data-grid-id"},themeName:{DEFAULT:"default",STRIPED:"striped",CLEAN:"clean"},selectionType:{CELL:"CELL",ROW:"ROW",COLUMN:"COLUMN"},summaryType:{SUM:"sum",AVG:"avg",CNT:"cnt",MAX:"max",MIN:"min"},summaryPosition:{TOP:"top",BOTTOM:"bottom"}}},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(12),a=n(13),r=n(15),l=s.extend({initialize:function(e,t){s.prototype.initialize.apply(this,arguments),o.assign(this,{columnModel:t.columnModel,domState:t.domState,gridId:t.gridId,lastRowKey:-1,originalRows:[],originalRowMap:{},startIndex:t.startIndex||1,sortOptions:{columnName:"rowKey",ascending:!0,useClient:!o.isBoolean(t.useClientSort)||t.useClientSort},disabled:!1,publicObject:t.publicObject}),this.sortOptions.useClient||(this.comparator=null),t.domEventBus&&(this.listenTo(t.domEventBus,"click:headerCheck",this._onClickHeaderCheck),this.listenTo(t.domEventBus,"click:headerSort",this._onClickHeaderSort))},model:a,parse:function(e){return e=e&&e.contents||e,this._formatData(e)},_onClickHeaderCheck:function(e){e.checked?this.checkAll():this.uncheckAll()},_onClickHeaderSort:function(e){this.sortByField(e.columnName)},_formatData:function(e){var t=o.filter(e,o.isObject);return o.each(t,function(e,n){t[n]=this._baseFormat(t[n]),this.isRowSpanEnable()&&this._setExtraRowSpanData(t,n)},this),t},_baseFormat:function(e){var t={rowSpan:null,rowSpanData:null,rowState:null},n=this.columnModel.get("keyColumnName"),o=null===n?this._createRowKey():e[n];return e._extraData=i.extend(t,e._extraData),e._button="CHECKED"===e._extraData.rowState,e.rowKey=o,e},_createRowKey:function(){return this.lastRowKey+=1,this.lastRowKey},_setExtraRowSpanData:function(e,t){function n(e,t){var n=e._extraData;return!(!n.rowSpanData||!n.rowSpanData[t])}function i(e,t,n){var i=e._extraData;return i.rowSpanData=i&&i.rowSpanData||{},i.rowSpanData[t]=n,i}var s,a,r,l=e[t],d=l&&l._extraData&&l._extraData.rowSpan,u=l&&l.rowKey;return d&&o.each(d,function(o,d){if(!n(l,d))for(i(l,d,{count:o,isMainRow:!0,mainRowKey:u}),s=-1,r=t+1;r<t+o;r+=1)a=e[r],a[d]=l[d],a._extraData=a._extraData||{},i(a,d,{count:s,isMainRow:!1,mainRowKey:u}),s-=1}),e},setOriginalRowList:function(e){return this.originalRows=e?this._formatData(e):this.toJSON(),this.originalRowMap=o.indexBy(this.originalRows,"rowKey"),this.originalRows},getOriginalRowList:function(e){return e=!!o.isUndefined(e)||e,e?o.clone(this.originalRows):this.originalRows},getOriginalRow:function(e){return o.clone(this.originalRowMap[e])},getOriginal:function(e,t){return o.clone(this.originalRowMap[e][t])},getMainRowKey:function(e,t){var n,i=this.get(e);return this.isRowSpanEnable()&&(n=i&&i.getRowSpanData(t),e=n?n.mainRowKey:e),e},indexOfRowKey:function(e){return this.indexOf(this.get(e))},isRowSpanEnable:function(){return!this.isSortedByField()},isSortedByField:function(){return"rowKey"!==this.sortOptions.columnName},setSortOptionValues:function(e,t,n){var i=this.sortOptions,s=!1;o.isUndefined(e)&&(e="rowKey"),o.isUndefined(t)&&(t=!0),i.columnName===e&&i.ascending===t||(s=!0),i.columnName=e,i.ascending=t,s&&this.trigger("sortChanged",{columnName:e,ascending:t,requireFetch:n})},sortByField:function(e,t){var n=this.sortOptions;o.isUndefined(t)&&(t=n.columnName!==e||!n.ascending),this.setSortOptionValues(e,t,!n.useClient),n.useClient&&this.sort()},getRows:function(e,t){var n,i;return e?(i=this.where({_button:!0}),n=[],o.each(i,function(e){n.push(e.attributes)},this)):n=this.toJSON(),t?n:this._removePrivateProp(n)},syncRowSpannedData:function(e,t,n){var i,o,s;if(this.isRowSpanEnable())if(o=e.getRowSpanData(t),o.isMainRow)for(i=this.indexOfRowKey(e.get("rowKey")),s=0;s<o.count-1;s+=1)this.at(s+1+i).set(t,n);else this.get(o.mainRowKey).set(t,n)},comparator:function(e,t){var n=this.sortOptions.columnName,i=this.sortOptions.ascending,s=e.get(n),a=t.get(n),r=o.isNull(s)||o.isUndefined(s)||""===s,l=o.isNull(a)||o.isUndefined(a)||""===a,d=0;return r&&!l?d=-1:!r&&l?d=1:s<a?d=-1:s>a&&(d=1),i||(d=-d),d},_removePrivateProp:function(e){return o.map(e,function(e){return o.omit(e,a.privateProperties)})},removeRow:function(e,t){var n,i,s,a,r=this.get(e);r&&(t&&t.keepRowSpanData&&(s=o.clone(r.attributes)),a=this.indexOf(r),n=o.clone(r.getRowSpanData()),i=this.at(a+1),this.remove(r,{silent:!0}),this._syncRowSpanDataForRemove(n,i,s),t&&t.removeOriginalData&&this.setOriginalRowList(),this.trigger("remove",e,a))},_syncRowSpanDataForRemove:function(e,t,n){e&&o.each(e,function(e,i){var o,s,a,r={};if(e.isMainRow){if(1===e.count)return;o=t,a=e.count-1,s=1,a>1&&(r.mainRowKey=o.get("rowKey"),r.isMainRow=!0),o.set(i,n?n[i]:"",{silent:!0})}else o=this.get(e.mainRowKey),a=o.getRowSpanData(i).count-1,s=-e.count;a>1?(r.count=a,o.setRowSpanData(i,r),this._updateSubRowSpanData(o,i,s,a)):o.setRowSpanData(i,null)},this)},_createDummyRow:function(){var e=this.columnModel.get("dataColumns"),t={};return o.each(e,function(e){t[e.name]=""},this),t},append:function(e,t){var n,i=this._createModelList(e);return t=o.extend({at:this.length},t),n={at:t.at,add:!0,silent:!0},this.add(i,n),this._syncRowSpanDataForAppend(t.at,i.length,t.extendPrevRowSpan),this.trigger("add",i,t),i},prepend:function(e,t){return t=t||{},t.at=0,this.append(e,t)},getRowData:function(e,t){var n=this.get(e),i=n?n.toJSON():null;return t?JSON.stringify(i):i},getRowDataAt:function(e,t){var n=this.at(e),i=n?n.toJSON():null;return t?JSON.stringify(n):i},getValue:function(e,t,n){var i,o;return n?i=this.getOriginal(e,t):(o=this.get(e),i=o&&o.get(t)),i},setValue:function(e,t,n,i){var o=this.get(e);return!!o&&(o.set(t,n,{silent:i}),!0)},getColumnValues:function(e,t){var n=this.pluck(e);return t?JSON.stringify(n):n},setColumnValues:function(e,t,n,i){var s={},a={disabled:!1,editable:!0};s[e]=t,n=!!o.isUndefined(n)||n,this.forEach(function(t){n&&(a=t.getCellState(e)),!a.disabled&&a.editable&&t.set(s,{silent:i})},this)},getRowSpanData:function(e,t){var n=this.get(e);return n?n.getRowSpanData(t):null},isModified:function(){var e=o.values(this.getModifiedRows());return o.some(e,function(e){return e.length>0})},setDisabled:function(e){this.disabled!==e&&(this.disabled=e,this.trigger("disabledChanged"))},enableRow:function(e){this.get(e).setRowState("")},disableRow:function(e){this.get(e).setRowState("DISABLED")},enableCheck:function(e){this.get(e).setRowState("")},disableCheck:function(e){this.get(e).setRowState("DISABLED_CHECK")},check:function(e,t){var n=this.get(e).getRowState().isDisabledCheck,i=this.columnModel.get("selectType");!n&&i&&("radio"===i&&this.uncheckAll(),this.setValue(e,"_button",!0,t))},uncheck:function(e,t){this.setValue(e,"_button",!1,t)},checkAll:function(){this.setColumnValues("_button",!0)},uncheckAll:function(){this.setColumnValues("_button",!1)},_createModelList:function(e){var t,n=[];return e=e||this._createDummyRow(),o.isArray(e)||(e=[e]),t=this._formatData(e),o.each(t,function(e){var t=new a(e,{collection:this,parse:!0});n.push(t)},this),n},_syncRowSpanDataForAppend:function(e,t,n){var i=this.at(e-1);i&&o.each(i.getRowSpanData(),function(e,o){var s,a,r,l;0!==e.count&&(e.isMainRow?(s=i,a=e,r=1):(s=this.get(e.mainRowKey),a=s.getRowSpanData()[o],r=-e.count+1),(a.count>r||n)&&(a.count+=t,l=a.count,this._updateSubRowSpanData(s,o,r,l)))},this)},_updateSubRowSpanData:function(e,t,n,i){var o,s,a=this.indexOf(e),r=e.get("rowKey");for(s=n;s<i;s+=1)o=this.at(a+s),o.set(t,e.get(t),{silent:!0}),o.setRowSpanData(t,{count:-s,mainRowKey:r,isMainRow:!1})},_isModifiedRow:function(e,t,n){var i=o.omit(e,n),s=o.some(i,function(e,n){return"object"==typeof e?JSON.stringify(e)!==JSON.stringify(t[n]):e!==t[n]},this);return s},getModifiedRows:function(e){var t=e&&e.withRawData,n=e&&e.checkedOnly,i=e&&e.rowKeyOnly,s=t?this.originalRows:this._removePrivateProp(this.originalRows),a=t?this.toJSON():this._removePrivateProp(this.toJSON()),r=e&&e.ignoredColumns,l={createdRows:[],updatedRows:[],deletedRows:[]};return s=o.indexBy(s,"rowKey"),a=o.indexBy(a,"rowKey"),r=o.union(r,this.columnModel.getIgnoredColumnNames()),o.each(a,function(e,t){var a=s[t],d=i?e.rowKey:o.omit(e,r);(!n||n&&this.get(t).get("_button"))&&(a?this._isModifiedRow(e,a,r)&&l.updatedRows.push(d):l.createdRows.push(d))},this),o.each(s,function(e,t){var n=i?e.rowKey:o.omit(e,r);a[t]||l.deletedRows.push(n)},this),l},resetData:function(e,t,n){e||(e=[]),o.isUndefined(t)&&(t=!0),this.trigger("beforeReset",e.length),this.lastRowKey=-1,this.reset(e,{parse:t}),o.isFunction(n)&&n()},setData:function(e,t,n){var i=o.bind(function(){this.setOriginalRowList(),o.isFunction(n)&&n()},this);this.resetData(e,t,i)},restore:function(){var e=this.getOriginalRowList();this.resetData(e,!0)},del:function(e,t,n){var i=this.getMainRowKey(e,t),s=this.get(i).getCellState(t),a=this.columnModel.getEditType(t),r=o.contains(["text","password"],a);r&&s.editable&&!s.disabled&&this.setValue(i,t,"",n)},delRange:function(e){var t,n,i=this.columnModel.getVisibleColumns(),s=o.range(e.row[0],e.row[1]+1),a=o.range(e.column[0],e.column[1]+1);t=o.map(s,function(e){return this.at(e).get("rowKey")},this),n=o.map(a,function(e){return i[e].name}),o.each(t,function(e){o.each(n,function(t){this.del(e,t,!0),this.get(e).validateCell(t,!0)},this)},this),this.trigger("deleteRange",new r(null,{rowKeys:t,columnNames:n}))},paste:function(e,t){var n=this._getEndIndexToPaste(e,t);o.each(e,function(e,i){this._setValueForPaste(e,t.row+i,t.column,n.column)},this),this.trigger("paste",{startIdx:t,endIdx:n})},validate:function(){var e=[],t=o.chain(this.columnModel.getVisibleColumns()).filter(function(e){return e.validation&&e.validation.required===!0}).pluck("name").value();return this.each(function(n){var i=[];o.each(t,function(e){var t=n.validateCell(e);t&&i.push({columnName:e,errorCode:t})}),i.length&&e.push({rowKey:n.get("rowKey"),errors:i})}),e},_getEndIndexToPaste:function(e,t){var n=this.columnModel.getVisibleColumns(),i=e.length+t.row-1,o=Math.min(e[0].length+t.column,n.length)-1;return{row:i,column:o}},_setValueForPaste:function(e,t,n,i){var o,s,a,r,l=this.at(t),d=this.columnModel,u={};for(l||(l=this.append({})[0]),o=n;o<=i;o+=1)s=d.at(o,!0).name,a=l.getCellState(s),r=l.getRowSpanData(s),a.editable&&!a.disabled&&(!r||r.count>=0)&&(u[s]=e[o-n]);l.set(u)},getElement:function(e,t){var n=this.getMainRowKey(e,t);return this.domState.getElement(n,t)},getCheckedState:function(){var e=0,t=0;return this.forEach(function(n){var i=n.getCellState("_button");!i.disabled&&i.editable&&(e+=1,n.get("_button")&&(t+=1))}),{available:e,checked:t}}});e.exports=l},function(e,t,n){"use strict";var i=n(5),o=i.Collection.extend({clear:function(){return this.each(function(e){e.stopListening(),e=null}),this.reset([],{silent:!0}),this}});e.exports=o},function(e,t,n){"use strict";var i=n(2),o=n(5),s=n(3),a=n(9),r=n(14),l=n(15),d=n(16),u=n(17),h=n(18),c=["_button","_number","_extraData"],g="REQUIRED",m="TYPE_NUMBER",f=a.extend({initialize:function(){a.prototype.initialize.apply(this,arguments),this.extraDataManager=new r(this.get("_extraData")),this.columnModel=this.collection.columnModel,this.validateMap={},this.on("change",this._onChange,this)},idAttribute:"rowKey",set:function(e,t,n){var s,a=i.isObject(e);a&&(n=t),!this.columnModel||n&&n.silent?o.Model.prototype.set.apply(this,arguments):(a?s=e:(s={},s[e]=t),i.each(s,function(e,t){this._executeOnBeforeChange(t,e)||delete s[t]},this),o.Model.prototype.set.call(this,s,n))},parse:function(e){return e._extraData||(e._extraData={}),e},_triggerExtraDataChangeEvent:function(){this.trigger("extraDataChanged",this.get("_extraData"))},_triggerCheckboxChangeEvent:function(e){var t={rowKey:this.get("rowKey")};e?this.trigger("check",t):this.trigger("uncheck",t)},_onChange:function(){var e=i.omit(this.changed,c);i.has(this.changed,"_button")&&this._triggerCheckboxChangeEvent(this.changed._button),this.isDuplicatedPublicChanged(e)||i.each(e,function(e,t){var n=this.columnModel.getColumnModel(t);n&&(this.collection.syncRowSpannedData(this,t,e),this._executeOnAfterChange(t),this.validateCell(t,!0))},this)},_validateCellData:function(e){var t,n=this.columnModel.getColumnModel(e).validation,o="";return n&&(t=this.get(e),n.required&&d.isBlank(t)?o=g:"number"!==n.dataType||i.isNumber(t)||(o=m)),o},validateCell:function(e,t){var n;return!t&&e in this.validateMap?this.validateMap[e]:(n=this._validateCellData(e),n?this.addCellClassName(e,h.CELL_INVALID):this.removeCellClassName(e,h.CELL_INVALID),this.validateMap[e]=n,n)},_createChangeCallbackEvent:function(e,t){return new l(null,{rowKey:this.get("rowKey"),columnName:e,value:t,instance:this.collection.publicObject})},_executeOnBeforeChange:function(e,t){var n,i=this.columnModel.getColumnModel(e),o=this.get(e)!==t;
return!(o&&i&&i.onBeforeChange)||(n=this._createChangeCallbackEvent(e,t),i.onBeforeChange(n),!n.isStopped())},_executeOnAfterChange:function(e){var t,n=this.columnModel.getColumnModel(e),i=this.get(e);return!n.onAfterChange||(t=this._createChangeCallbackEvent(e,i),n.onAfterChange(t),!t.isStopped())},getPrivateProperties:function(){return c},getRowState:function(){return this.extraDataManager.getRowState()},getClassNameList:function(e){var t=this.columnModel.getColumnModel(e),n=d.isMetaColumn(e),i=this.extraDataManager.getClassNameList(e),o=this.getCellState(e);return t.className&&i.push(t.className),t.ellipsis&&i.push(h.CELL_ELLIPSIS),t.validation&&t.validation.required&&i.push(h.CELL_REQUIRED),n?i.push(h.CELL_HEAD):o.editable&&i.push(h.CELL_EDITABLE),o.disabled&&i.push(h.CELL_DISABLED),this._makeUniqueStringArray(i)},_makeUniqueStringArray:function(e){var t=i.uniq(e.join(" ").split(" "));return i.without(t,"")},getCellState:function(e){var t,n,o=["_number","normal"],s=this.columnModel,a=this.collection.disabled,r=!0,l=s.getEditType(e);return n=this.executeRelationCallbacksAll(["disabled","editable"])[e],t=this.getRowState(),a||(a="_button"===e?t.disabledCheck:t.disabled,a=a||!(!n||!n.disabled)),r=!i.contains(o,l)&&!(n&&n.editable===!1),{editable:r,disabled:a}},isEditable:function(e){var t=this.getCellState(e);return!t.disabled&&t.editable},isDisabled:function(e){var t=this.getCellState(e);return t.disabled},getRowSpanData:function(e){var t=this.collection.isRowSpanEnable(),n=this.get("rowKey");return this.extraDataManager.getRowSpanData(e,n,t)},getHeight:function(){return this.extraDataManager.getHeight()},setHeight:function(e){this.extraDataManager.setHeight(e),this._triggerExtraDataChangeEvent()},setRowSpanData:function(e,t){this.extraDataManager.setRowSpanData(e,t),this._triggerExtraDataChangeEvent()},setRowState:function(e,t){this.extraDataManager.setRowState(e),t||this._triggerExtraDataChangeEvent()},addCellClassName:function(e,t){this.extraDataManager.addCellClassName(e,t),this._triggerExtraDataChangeEvent()},addClassName:function(e){this.extraDataManager.addClassName(e),this._triggerExtraDataChangeEvent()},removeCellClassName:function(e,t){this.extraDataManager.removeCellClassName(e,t),this._triggerExtraDataChangeEvent()},removeClassName:function(e){this.extraDataManager.removeClassName(e),this._triggerExtraDataChangeEvent()},_getStringOfListItems:function(e,t){var n,o,a,r,l,u=this.get(e),h=this.columnModel.getColumnModel(e);return s.isExisty(s.pick(h,"editOptions","listItems"))?(n=this.executeRelationCallbacksAll(["listItems"])[e],l=n&&n.listItems,o=l?n.listItems:h.editOptions.listItems,a=typeof o[0].value,r=d.toString(u).split(","),a!==typeof r[0]&&(r=i.map(r,function(e){return d.convertValueType(e,a)})),i.each(r,function(e,n){var s=i.findWhere(o,{value:e}),a=s&&(t?s.text:s.value)||"";r[n]=a},this),r.join(",")):""},_isListType:function(e){return i.contains(["select","radio","checkbox"],e)},isDuplicatedPublicChanged:function(e){return!(!this._timeoutIdForChanged||!i.isEqual(this._lastPublicChanged,e))||(clearTimeout(this._timeoutIdForChanged),this._timeoutIdForChanged=setTimeout(i.bind(function(){this._timeoutIdForChanged=null},this),10),this._lastPublicChanged=e,!1)},getValueString:function(e){var t=this.columnModel,n=t.copyVisibleTextOfEditingColumn(e),i=t.getEditType(e),o=t.getColumnModel(e),a=this.get(e);if(this._isListType(i)){if(!s.isExisty(s.pick(o,"editOptions","listItems",0,"value")))throw new Error('Check "'+e+"\"'s editOptions.listItems property out in your ColumnModel.");a=this._getStringOfListItems(e,n)}else"password"===i&&(a="");return a=d.toString(a),a=u.addDoubleQuotes(a)},executeRelationCallbacksAll:function(e){var t=this.attributes,n=this.columnModel.get("relationsMap"),o={};return i.isEmpty(e)&&(e=["listItems","disabled","editable"]),i.each(n,function(n,s){var a=t[s];i.each(n,function(n){this._executeRelationCallback(n,e,a,t,o)},this)},this),o},_executeRelationCallback:function(e,t,n,o,s){var a=this.getRowState(),r=e.targetNames;i.each(t,function(t){var l;a.disabled&&"disabled"===t||(l=e[t],"function"==typeof l&&i.each(r,function(e){s[e]=s[e]||{},s[e][t]=l(n,o)},this))},this)}},{privateProperties:c});e.exports=f},function(e,t,n){"use strict";var i=n(2),o=n(3),s=o.defineClass({init:function(e){this.data=e||{}},getRowSpanData:function(e,t,n){var i=null;return n&&(i=this.data.rowSpanData,e&&i&&(i=i[e])),!i&&e&&(i={count:0,isMainRow:!0,mainRowKey:t}),i},getRowState:function(){var e={disabledCheck:!1,disabled:!1,checked:!1};switch(this.data.rowState){case"DISABLED":e.disabled=!0;case"DISABLED_CHECK":e.disabledCheck=!0;break;case"CHECKED":e.checked=!0}return e},setRowState:function(e){this.data.rowState=e},setRowSpanData:function(e,t){var n=i.assign({},this.data.rowSpanData);e&&(t?n[e]=t:n[e]&&delete n[e],this.data.rowSpanData=n)},addCellClassName:function(e,t){var n,o;n=this.data.className||{},n.column=n.column||{},o=n.column[e]||[],i.contains(o,t)||(o.push(t),n.column[e]=o,this.data.className=n)},addClassName:function(e){var t,n;t=this.data.className||{},n=t.row||[],o.inArray(e,n)===-1&&(n.push(e),t.row=n,this.data.className=t)},getClassNameList:function(e){var t=this.data.className,n=Array.prototype.push,i=[];return t&&(t.row&&n.apply(i,t.row),e&&t.column&&t.column[e]&&n.apply(i,t.column[e])),i},_removeClassNameFromArray:function(e,t){var n=e.join(" ").split(" ");return i.without(n,t)},removeCellClassName:function(e,t){var n=this.data.className;o.pick(n,"column",e)&&(n.column[e]=this._removeClassNameFromArray(n.column[e],t),this.data.className=n)},removeClassName:function(e){var t=this.data.className;t&&t.row&&(t.row=this._removeClassNameFromArray(t.row,e),this.className=t)},setHeight:function(e){this.data.height=e},getHeight:function(){return this.data.height}});e.exports=s},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(16),a=n(10).attrName,r={ROW_HEAD:"rowHead",COLUMN_HEAD:"columnHead",DUMMY:"dummy",CELL:"cell",ETC:"etc"},l=o.defineClass({init:function(e,t){this._stopped=!1,e&&(this.nativeEvent=e),t&&this.setData(t)},setData:function(e){i.extend(this,e)},stop:function(){this._stopped=!0},isStopped:function(){return this._stopped}});l.getTargetInfo=function(e){var t,n,i=e.closest("td"),o=r.ETC;return 1===i.length?(t=i.attr(a.ROW_KEY),n=i.attr(a.COLUMN_NAME),o=t&&n?s.isMetaColumn(n)?r.ROW_HEAD:r.CELL:r.DUMMY):(i=e.closest("th"),1===i.length&&(n=i.attr(a.COLUMN_NAME),o=r.COLUMN_HEAD)),s.pruneObject({targetType:o,rowKey:s.strToNumber(t),columnName:n})},l.targetTypeConst=r,e.exports=l},function(e,t,n){"use strict";function i(e,t){var n,i,o,s="",a=0;for(t=!!t,i=e.split(/(%(?:d0|d1)%.{2})/),n=i.length;a<n;a+=1){try{o=decodeURIComponent(i[a])}catch(e){o=t?i[a].replace(/%(?!\d+)/g,"%25"):i[a]}s+=o}return s}var o,s=n(7),a=n(2),r=n(3),l=n(10).dimension.CELL_BORDER_WIDTH;o={uniqueId:0,getAttributesString:function(e){var t="";return a.each(e,function(e,n){t+=" "+n+'="'+e+'"'},this),t},sum:function(e){return a.reduce(e,function(e,t){return e+=t},0)},getMinMax:function(e){return{min:Math.min.apply(null,e),max:Math.max.apply(null,e)}},strToNumber:function(e){var t=Number(e);return isNaN(t)?e:t},pruneObject:function(e){var t={};return a.each(e,function(e,n){a.isUndefined(e)||a.isNull(e)||(t[n]=e)}),t},getHeight:function(e,t){return 0===e?e:e*(t+l)},getDisplayRowCount:function(e,t){return Math.ceil(e/(t+l))},getRowHeight:function(e,t){return 0===e?0:Math.floor((t-l)/e)},isMetaColumn:function(e){return a.contains(["_button","_number"],e)},isEqual:function(e,t){var n,i=function(e,t){var n=!1;return r.forEach(e,function(e,i){return n=e===t[i]}),n},o=!0;return typeof e!=typeof t?o=!1:a.isArray(e)&&e.length!==t.length?o=!1:a.isObject(e)?(n=!i(e,t)||!i(t,e),o=!n):e!==t&&(o=!1),o},isBlank:function(e){return a.isString(e)?!e.length:a.isUndefined(e)||a.isNull(e)},stripTags:function(e){var t;return e=e.replace(/[\n\r\t]/g,""),r.hasEncodableString(e)&&(/<img/i.test(e)?(t=e.match(/<img[^>]*\ssrc=["']?([^>"']+)["']?[^>]*>/i),e=t?t[1]:""):e=e.replace(/<button.*?<\/button>/gi,""),e=s.trim(r.decodeHTMLEntity(e.replace(/<\/?(?:h[1-5]|[a-z]+(?::[a-z]+)?)[^>]*>/gi,"")))),e},toString:function(e){return a.isUndefined(e)||a.isNull(e)?"":String(e)},getUniqueKey:function(){return this.uniqueId+=1,this.uniqueId},toQueryString:function(e){var t=[];return a.each(e,function(e,n){a.isString(e)||a.isNumber(e)||(e=JSON.stringify(e)),e=encodeURIComponent(unescape(e)),e&&t.push(n+"="+e)}),t.join("&")},toQueryObject:function(e){var t=e.split("&"),n={};return a.each(t,function(e){var t,o,s=e.split("=");t=s[0],o=i(s[1]);try{o=JSON.parse(o)}catch(e){}a.isNull(o)||(n[t]=o)}),n},convertValueType:function(e,t){var n=e;return"string"===t?n=String(e):"number"===t?n=Number(e):"boolean"===t&&(n=Boolean(e)),n},toUpperCaseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},clamp:function(e,t,n){var i;return t>n&&(i=t,t=n,n=i),Math.max(t,Math.min(e,n))},isOptionEnabled:function(e){return a.isObject(e)||e===!0},appendStyleElement:function(e,t){var n=document.createElement("style");n.type="text/css",n.id=e,n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(n)},warning:function(e){console&&console.warn&&console.warn(e)},replaceText:function(e,t){return e.replace(/\{\{(\w*)\}\}/g,function(e,n){return t.hasOwnProperty(n)?t[n]:""})},isRightClickEvent:function(e){var t;return e=e||window.event,e.which?t=3===e.which:e.button&&(t=2===e.button),t},sendHostNameToGA:function(){var e=location.hostname;r.imagePing("https://www.google-analytics.com/collect",{v:1,t:"event",tid:"UA-115377265-9",cid:e,dp:e,dh:"grid"})}},e.exports=o},function(e,t,n){"use strict";function i(e,t,n,i){var o,s,a=n[0],r=n[1],l=i[0],d=i[1];for(s=l;s<d;s+=1)for(o=a;o<r;o+=1)t[s][o]=l===s&&a===o?e:" "}var o,s=n(2),a="___tui_grid_lf___",r="___tui_grid_cr___",l=new RegExp(a,"g"),d=new RegExp(r,"g"),u="\n",h="\r";o={convertTableToData:function(e){for(var t,n,o,a=[],r=e.rows,l=0,d=r.length;l<d;l+=1)a[l]=[];return s.each(r,function(e,r){t=0,s.each(e.cells,function(e){for(;a[r][t];)t+=1;n=[t,t+(e.colSpan||1)],o=[r,r+(e.rowSpan||1)],i(e.innerText,a,n,o),t=n[1]})}),a},convertTextToData:function(e){return e=o.replaceNewlineToSubchar(e),s.map(e.split(/\r?\n/),function(e){return s.map(e.split("\t"),function(e){return e=o.removeDoubleQuotes(e),e.replace(l,u).replace(d,h)})})},addDoubleQuotes:function(e){return e.match(/\r?\n/g)&&(e='"'+e.replace(/"/g,'""')+'"'),e},removeDoubleQuotes:function(e){return e.match(l)&&(e=e.substring(1,e.length-1).replace(/""/g,'"')),e},replaceNewlineToSubchar:function(e){return e.replace(/"([^"]|"")*"/g,function(e){return e.replace(u,a).replace(h,r)})}},o.CUSTOM_LF_SUBCHAR=a,o.CUSTOM_CR_SUBCHAR=r,e.exports=o},function(e,t,n){"use strict";var i=n(2),o="tui-grid-",s={CONTAINER:"container",CLIPBOARD:"clipboard",NO_SCROLL_X:"no-scroll-x",NO_SCROLL_Y:"no-scroll-y",ICO_ARROW:"icon-arrow",ICO_ARROW_LEFT:"icon-arrow-left",ICO_ARROW_RIGHT:"icon-arrow-right",LAYER_STATE:"layer-state",LAYER_STATE_CONTENT:"layer-state-content",LAYER_STATE_LOADING:"layer-state-loading",LAYER_EDITING:"layer-editing",LAYER_FOCUS:"layer-focus",LAYER_FOCUS_BORDER:"layer-focus-border",LAYER_FOCUS_DEACTIVE:"layer-focus-deactive",LAYER_SELECTION:"layer-selection",LAYER_DATE_PICKER:"layer-datepicker",BORDER_LINE:"border-line",BORDER_TOP:"border-line-top",BORDER_LEFT:"border-line-left",BORDER_RIGHT:"border-line-right",BORDER_BOTTOM:"border-line-bottom",CONTENT_AREA:"content-area",LSIDE_AREA:"lside-area",RSIDE_AREA:"rside-area",HEAD_AREA:"head-area",BODY_AREA:"body-area",SUMMARY_AREA:"summary-area",SUMMARY_AREA_TOP:"summary-area-top",SUMMARY_AREA_BOTTOM:"summary-area-bottom",SUMMARY_AREA_RIGHT:"summary-area-right",SUMMARY_AREA_RIGHT_TOP:"summary-area-right-top",SUMMARY_AREA_RIGHT_BOTTOM:"summary-area-right-bottom",FROZEN_BORDER_TOP:"frozen-border-top",FROZEN_BORDER_BOTTOM:"frozen-border-bottom",COLUMN_RESIZE_CONTAINER:"column-resize-container",COLUMN_RESIZE_HANDLE:"column-resize-handle",COLUMN_RESIZE_HANDLE_LAST:"column-resize-handle-last",BODY_CONTAINER:"body-container",BODY_TABLE_CONTAINER:"table-container",SCROLLBAR_HEAD:"scrollbar-head",SCROLLBAR_BORDER:"scrollbar-border",SCROLLBAR_RIGHT_BOTTOM:"scrollbar-right-bottom",SCROLLBAR_LEFT_BOTTOM:"scrollbar-left-bottom",PAGINATION:"pagination",PAGINATION_PRE:"pre",PAGINATION_PRE_OFF:"pre-off",PAGINATION_PRE_END:"pre-end",PAGINATION_PRE_END_OFF:"pre-end-off",PAGINATION_NEXT:"next",PAGINATION_NEXT_OFF:"next-off",PAGINATION_NEXT_END:"next-end",PAGINATION_NEXT_END_OFF:"next-end-off",TABLE:"table",ROW_ODD:"row-odd",ROW_EVEN:"row-even",CELL:"cell",CELL_HEAD:"cell-head",CELL_ROW_ODD:"cell-row-odd",CELL_ROW_EVEN:"cell-row-even",CELL_EDITABLE:"cell-editable",CELL_DUMMY:"cell-dummy",CELL_REQUIRED:"cell-required",CELL_DISABLED:"cell-disabled",CELL_SELECTED:"cell-selected",CELL_INVALID:"cell-invalid",CELL_ELLIPSIS:"cell-ellipsis",CELL_CURRENT_ROW:"cell-current-row",CELL_MAIN_BUTTON:"cell-main-button",CELL_CONTENT:"cell-content",CELL_CONTENT_BEFORE:"content-before",CELL_CONTENT_AFTER:"content-after",CELL_CONTENT_INPUT:"content-input",CELL_CONTENT_TEXT:"content-text",BTN_TEXT:"btn-text",BTN_SORT:"btn-sorting",BTN_SORT_UP:"btn-sorting-up",BTN_SORT_DOWN:"btn-sorting-down",BTN_EXCEL:"btn-excel-download",BTN_EXCEL_ICON:"btn-excel-icon",BTN_EXCEL_PAGE:"btn-excel-page",BTN_EXCEL_ALL:"btn-excel-all",HEIGHT_RESIZE_BAR:"height-resize-bar",HEIGHT_RESIZE_HANDLE:"height-resize-handle",CALENDAR:"calendar",CALENDAR_BTN_PREV_YEAR:"calendar-btn-prev-year",CALENDAR_BTN_NEXT_YEAR:"calendar-btn-next-year",CALENDAR_BTN_PREV_MONTH:"calendar-btn-prev-month",CALENDAR_BTN_NEXT_MONTH:"calendar-btn-next-month",CALENDAR_SELECTABLE:"calendar-selectable",CALENDAR_SELECTED:"calendar-selected"},t=i.mapObject(s,function(e){return o+e});t.PREFIX=o,e.exports=t},function(e,t,n){"use strict";var i=n(2),o=n(9),s=n(10),a=s.dimension,r=s.summaryPosition,l=a.TABLE_BORDER_WIDTH,d=a.CELL_BORDER_WIDTH,u=o.extend({initialize:function(e,t){o.prototype.initialize.apply(this,arguments),this.columnModel=t.columnModel,this.dataModel=t.dataModel,this.domState=t.domState,this.on("change:fixedHeight",this._resetSyncHeightHandler),this.on("change:bodyHeight",this._onChangeBodyHeight),t.domEventBus&&(this.listenTo(t.domEventBus,"windowResize",this._onResizeWindow),this.listenTo(t.domEventBus,"dragmove:resizeHeight",i.debounce(i.bind(this._onDragMoveForHeight,this)))),this._resetSyncHeightHandler()},defaults:{offsetLeft:0,offsetTop:0,width:0,headerHeight:0,bodyHeight:0,summaryHeight:0,summaryPosition:null,resizeHandleHeight:0,paginationHeight:0,rowHeight:0,totalRowHeight:0,fixedRowHeight:!0,rsideWidth:0,lsideWidth:0,minimumColumnWidth:0,scrollBarSize:17,scrollX:!0,scrollY:!0,fitToParentHeight:!1,fixedHeight:!1,minRowHeight:0,minBodyHeight:0,frozenBorderWidth:null},_onResizeWindow:function(){this.refreshLayout()},_onDragMoveForHeight:function(e){var t=e.pageY-this.get("offsetTop")-e.startData.mouseOffsetY;this.setHeight(t)},_onChangeBodyHeight:function(e){var t=e.changed,n=t.totalRowHeight,i=t.bodyHeight;!n&&i&&this.set("fixedHeight","auto"!==i)},_resetSyncHeightHandler:function(){this.get("fixedHeight")?this.off("change:totalRowHeight"):this.on("change:totalRowHeight",this._syncBodyHeightWithTotalRowHeight)},_syncBodyHeightWithTotalRowHeight:function(){var e=this.get("totalRowHeight")+this.getScrollXHeight(),t=this.get("minBodyHeight"),n=Math.max(t,e);this.set("bodyHeight",n)},isDivisionBorderDoubled:function(){return this.columnModel.getVisibleFrozenCount()>0},getAvailableTotalWidth:function(e){var t=this.get("width"),n=e+1+(this.isDivisionBorderDoubled()?1:0),i=n*d,o=t-this.getScrollYWidth()-i;return this.hasFrozenBorder()&&(o-=this.get("frozenBorderWidth")),o},getBodySize:function(){var e=this.get("lsideWidth"),t=this.get("rsideWidth")-this.getScrollYWidth(),n=this.get("bodyHeight")-this.getScrollXHeight();return{height:n,rsideWidth:t,totalWidth:e+t}},getOverflowFromMousePosition:function(e,t){var n=this.getPositionFromBodyArea(e,t),i=this.getBodySize();return this._judgeOverflow(n,i)},_judgeOverflow:function(e,t){var n=e.x,i=e.y,o=0,s=0;return i<0?o=-1:i>t.height&&(o=1),n<0?s=-1:n>t.totalWidth&&(s=1),{x:s,y:o}},getScrollXHeight:function(){return this.get("scrollX")?this.get("scrollBarSize"):0},getScrollYWidth:function(){return this.get("scrollY")?this.get("scrollBarSize"):0},_calcRealBodyHeight:function(e){var t=this.get("headerHeight")+this.get("summaryHeight")+l;return e-t},_getMinBodyHeight:function(){return this.get("minBodyHeight")+2*d+this.getScrollXHeight()},_getMinLeftSideWidth:function(){var e,t=this.get("minimumColumnWidth"),n=this.columnModel.getVisibleFrozenCount(!0),i=0;return n&&(e=(n+1)*d,i=e+t*n),i},getMaxLeftSideWidth:function(){var e=Math.ceil(.9*this.get("width"));return e&&(e=Math.max(e,this._getMinLeftSideWidth())),e},setWidth:function(e){e>0&&(this.set("width",e),this.trigger("setWidth",e))},setHeight:function(e){e>0&&this.set("bodyHeight",Math.max(this._calcRealBodyHeight(e),this._getMinBodyHeight()))},getHeight:function(){return this.get("bodyHeight")+this.get("headerHeight")},refreshLayout:function(){var e=this.domState,t=e.getOffset();this.set({offsetTop:t.top,offsetLeft:t.left,width:e.getWidth()}),this.get("fitToParentHeight")&&this.setHeight(e.getParentHeight())},getBodyOffsetTop:function(){var e=this.domState.getOffset().top,t=this.get("summaryPosition")===r.TOP?this.get("summaryHeight"):0;return e+this.get("headerHeight")+t+d+l},getPositionFromBodyArea:function(e,t){var n=this.domState.getOffset().left,i=this.getBodyOffsetTop();return{x:e-n,y:t-i}},hasFrozenBorder:function(){return i.isNumber(this.get("frozenBorderWidth"))}});e.exports=u},function(e,t,n){"use strict";var i=n(2),o=n(16),s=n(9),a=n(10).dimension.CELL_BORDER_WIDTH,r=s.extend({initialize:function(e,t){this.dataModel=t.dataModel,this.dimensionModel=t.dimensionModel,this.domState=t.domState,this.rowHeights=[],this.rowOffsets=[],this.dimensionModel.get("fixedRowHeight")&&this.listenTo(this.dataModel,"add remove reset sort",this.syncWithDataModel)},syncWithDom:function(){var e,t,n,i,o;if(!this.dimensionModel.get("fixedRowHeight")){for(e=this.domState.getRowHeights(),t=this._getHeightFromData(),n=[],i=0,o=t.length;i<o;i+=1)n[i]=Math.max(e[i],t[i]);this._reset(n)}},_getHeightFromData:function(){var e=this.dimensionModel.get("rowHeight"),t=[];return this.dataModel.each(function(n,i){t[i]=n.getHeight()||e}),t},syncWithDataModel:function(){this._reset(this._getHeightFromData())},_reset:function(e){var t=[],n=0;i.each(e,function(n,i){var o=i?t[i-1]+a:0,s=i?e[i-1]:0;t[i]=o+s}),this.rowHeights=e,this.rowOffsets=t,e.length&&(n=i.last(t)+i.last(e)+a),this.dimensionModel.set("totalRowHeight",n),this.trigger("reset")},getHeightAt:function(e){return this.rowHeights[e]},getOffsetAt:function(e){return this.rowOffsets[e]},getHeight:function(e){var t=this.dataModel.indexOfRowKey(e);return this.getHeightAt(t)},getOffset:function(e){var t=this.dataModel.indexOfRowKey(e);return this.getOffsetAt(t)},indexOf:function(e){var t=this.rowOffsets,n=0;for(e+=2*a;t[n]-a<=e;)n+=1;return n-1},getPageMovedIndex:function(e,t){var n,i=this.getOffsetAt(e),s=this.dimensionModel.get("bodyHeight");return t||(s=-s),n=this.indexOf(i+s),o.clamp(n,0,this.dataModel.length-1)}});e.exports=r},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(9),a=n(16),r=n(10),l=r.dimension,d=r.frame,u=l.CELL_BORDER_WIDTH,h=s.extend({initialize:function(e,t){this.dimensionModel=t.dimensionModel,this.columnModel=t.columnModel,this._fixedWidthFlags=null,this._minWidths=null,this._isModified=!1,this.listenTo(this.columnModel,"columnModelChange",this.resetColumnWidths),this.listenTo(this.dimensionModel,"change:width",this._onDimensionWidthChange),t.domEventBus&&(this.listenTo(t.domEventBus,"dragmove:resizeColumn",this._onDragResize),this.listenTo(t.domEventBus,"dblclick:resizeColumn",this._onDblClick)),this.resetColumnWidths()},defaults:{widths:[],resizable:!0},resetColumnWidths:function(){var e=this.columnModel.getVisibleColumns(null,!0),t=this.dimensionModel.get("minimumColumnWidth"),n=[],o=[],s=[];i.each(e,function(e){var i,r,l=e.width||"auto",d=!isNaN(l);r=a.isMetaColumn(e.name)?i:e.minWidth||t,i=d?l:r,i<r&&(i=r),n.push(i),s.push(r),o.push(d)},this),this._fixedWidthFlags=o,this._minWidths=s,this._setColumnWidthVariables(this._calculateColumnWidth(n),!0)},_onDragResize:function(e){this.setColumnWidth(e.columnIndex,e.width)},_onDblClick:function(e){this.restoreColumnWidth(e.columnIndex)},_setColumnWidthVariables:function(e,t){var n,o,s,a,r=this.dimensionModel.get("width"),l=this.dimensionModel.getMaxLeftSideWidth(),d=this.columnModel.getVisibleFrozenCount(!0);s=e.slice(0,d),a=e.slice(d),o=this._getFrameWidth(s),l&&l<o&&(s=this._adjustLeftSideWidths(s,l),o=this._getFrameWidth(s),e=s.concat(a)),n=r-o,this.set({widths:e}),this.dimensionModel.set({rsideWidth:n,lsideWidth:o}),t&&this.set("originalWidths",i.clone(e)),this.trigger("columnWidthChanged")},_adjustLeftSideWidths:function(e,t){var n,i=e.length-1,o=this.dimensionModel.get("minimumColumnWidth"),s=this._getFrameWidth(e),a=s-t;if(a>0)for(;i>=0&&a>0;)n=Math.max(o,e[i]-a),a-=e[i]-n,e[i]=n,i-=1;else a<0&&(e[i]+=Math.abs(a));return e},_calculateColumnWidth:function(e){return e=this._fillEmptyWidth(e),e=this._applyMinimumWidth(e),e=this._adjustWidths(e)},_fillEmptyWidth:function(e){var t=this.dimensionModel.getAvailableTotalWidth(e.length),n=t-a.sum(e),o=[];return i.each(e,function(e,t){e||o.push(t)}),this._distributeExtraWidthEqually(e,n,o)},_getFrameWidth:function(e){var t=0;return e.length&&(t=a.sum(e)+(e.length+1)*u),t},_addExtraColumnWidth:function(e,t){var n=this._fixedWidthFlags,o=[];return i.each(n,function(e,t){e||o.push(t)}),this._distributeExtraWidthEqually(e,t,o)},_reduceExcessColumnWidth:function(e,t){var n=this._minWidths,o=this._fixedWidthFlags,s=[];return i.each(e,function(e,t){o[t]||s.push({index:t,width:e-n[t]})}),this._reduceExcessColumnWidthSub(i.clone(e),t,s)},_reduceExcessColumnWidthSub:function(e,t,n){var o,s=Math.round(t/n.length),a=[];return i.each(n,function(n){n.width<Math.abs(s)?(t+=n.width,e[n.index]-=n.width):a.push(n)}),n.length>a.length?this._reduceExcessColumnWidthSub(e,t,a):(o=i.pluck(n,"index"),this._distributeExtraWidthEqually(e,t,o))},_distributeExtraWidthEqually:function(e,t,n){var o=n.length,s=Math.round(t/o),a=s*o-t,r=i.clone(e);return i.each(n,function(e){r[e]+=s}),n.length&&(r[i.last(n)]-=a),r},_applyMinimumWidth:function(e){var t=this._minWidths,n=i.clone(e);return i.each(n,function(e,i){var o=t[i];e<o&&(n[i]=o)}),n},_adjustWidths:function(e,t){var n,o=e.length,s=this.dimensionModel.getAvailableTotalWidth(o),r=s-a.sum(e),l=i.filter(this._fixedWidthFlags).length;return n=r>0&&o>l?this._addExtraColumnWidth(e,r):t&&r<0?this._reduceExcessColumnWidth(e,r):e},_onDimensionWidthChange:function(){var e=this.get("widths");this._isModified||(e=this._adjustWidths(e,!0)),this._setColumnWidthVariables(e)},getWidths:function(e){var t=this.columnModel.getVisibleFrozenCount(!0),n=[];switch(e){case d.L:n=this.get("widths").slice(0,t);break;case d.R:n=this.get("widths").slice(t);break;default:n=this.get("widths")}return n},getFrameWidth:function(e){var t=this.columnModel.getVisibleFrozenCount(!0),n=this.getWidths(e),o=this._getFrameWidth(n);return i.isUndefined(e)&&t>0&&(o+=u),o},setColumnWidth:function(e,t){var n=this.get("widths"),i=this._minWidths[e];n[e]&&(n[e]=Math.max(t,i),this._setColumnWidthVariables(n),this._isModified=!0)},indexOf:function(e,t){var n=this.getWidths(),i=this.getFrameWidth(),s=t?0:this.columnModel.getVisibleMetaColumnCount(),a=0;return e>=i?a=n.length-1:o.forEachArray(n,function(t,n){return t+=u,a=n,e>t&&void(e-=t)}),Math.max(0,a-s)},restoreColumnWidth:function(e){var t=this.get("originalWidths")[e];this.setColumnWidth(e,t)}});e.exports=h},function(e,t,n){"use strict";var i=n(3),o=n(9),s=n(10).dimension,a=s.TABLE_BORDER_WIDTH,r=s.CELL_BORDER_WIDTH,l=o.extend({initialize:function(e,t){this.dataModel=t.dataModel,this.columnModel=t.columnModel,this.focusModel=t.focusModel,this.dimensionModel=t.dimensionModel,this.renderModel=t.renderModel,this.coordRowModel=t.coordRowModel,this.coordColumnModel=t.coordColumnModel,this.listenTo(this.focusModel,"focus",this._onFocus)},getIndexFromMousePosition:function(e,t,n){var i=this.dimensionModel.getPositionFromBodyArea(e,t),o=this._getScrolledPosition(i);return{row:this.coordRowModel.indexOf(o.y),column:this.coordColumnModel.indexOf(o.x,n)}},_getScrolledPosition:function(e){var t=this.renderModel,n=e.x>this.dimensionModel.get("lsideWidth"),i=n?t.get("scrollLeft"):0,o=t.get("scrollTop");return{x:e.x+i,y:e.y+o}},_getRowSpanCount:function(e,t){var n=this.dataModel.get(e).getRowSpanData(t);return n.isMainRow||(e=n.mainRowKey,n=this.dataModel.get(e).getRowSpanData(t)),n.count||1},_getCellVerticalPosition:function(e,t){var n,i,o,s,a=this.coordRowModel;return n=this.dataModel.indexOfRowKey(e),i=n+t-1,o=a.getOffsetAt(n),s=a.getOffsetAt(i)+a.getHeightAt(i)+r,{top:o,bottom:s}},_getCellHorizontalPosition:function(e){for(var t=this.columnModel,n=t.getVisibleMetaColumnCount(),i=this.coordColumnModel.get("widths"),o=t.getVisibleFrozenCount()+n,s=t.indexOfColumnName(e,!0)+n,a=o>s?0:o,l=0;a<s;a+=1)l+=i[a]+r;return{left:l,right:l+i[s]+r}},getCellPosition:function(e,t){var n,i,o;return e=this.dataModel.getMainRowKey(e,t),this.dataModel.get(e)?(n=this._getRowSpanCount(e,t),i=this._getCellVerticalPosition(e,n),o=this._getCellHorizontalPosition(t),{top:i.top,bottom:i.bottom,left:o.left,right:o.right}):{}},_judgeScrollDirection:function(e,t,n){var i,o,s,a,r=this.renderModel,l=r.get("scrollTop"),d=r.get("scrollLeft");return i=e.top<l,o=!i&&e.bottom>l+n.height,t?(s=e.left<d,a=!s&&e.right>d+n.rsideWidth-1):s=a=!1,{isUp:i,isDown:o,isLeft:s,isRight:a}},_onFocus:function(e,t,n){var o;n&&(o=this.getScrollPosition(e,t),i.isEmpty(o)||this.renderModel.set(o))},_makeScrollPosition:function(e,t,n){var i={};return e.isUp?i.scrollTop=t.top:e.isDown&&(i.scrollTop=t.bottom-n.height),e.isLeft?i.scrollLeft=t.left:e.isRight&&(i.scrollLeft=t.right-n.rsideWidth+a),i},getScrollPosition:function(e,t){var n=!this.columnModel.isLside(t),i=this.getCellPosition(e,t),o=this.dimensionModel.getBodySize(),s=this._judgeScrollDirection(i,n,o);return this._makeScrollPosition(s,i,o)}});e.exports=l},function(e,t,n){"use strict";var i=n(2),o=n(9),s=n(16),a=n(15),r=o.extend({initialize:function(e,t){var n,s=t.editingEvent+":cell";o.prototype.initialize.apply(this,arguments),i.assign(this,{dataModel:t.dataModel,columnModel:t.columnModel,coordRowModel:t.coordRowModel,domEventBus:t.domEventBus,domState:t.domState}),this.listenTo(this.dataModel,"reset",this._onResetData),this.listenTo(this.dataModel,"add",this._onAddDataModel),this.domEventBus&&(n=this.domEventBus,this.listenTo(n,s,this._onMouseClickEdit),this.listenTo(n,"mousedown:focus",this._onMouseDownFocus),this.listenTo(n,"key:move",this._onKeyMove),this.listenTo(n,"key:edit",this._onKeyEdit))},defaults:{rowKey:null,columnName:null,prevRowKey:null,prevColumnName:"",editingAddress:null,active:!1},_onResetData:function(){this.blur()},_onAddDataModel:function(e,t){t.focus&&this.focusAt(t.at,0)},_onMouseClickEdit:function(e){this.focusIn(e.rowKey,e.columnName)},_onKeyMove:function(e){var t,n;switch(e.command){case"up":t=this.prevRowKey();break;case"down":t=this.nextRowKey();break;case"left":n=this.prevColumnName();break;case"right":n=this.nextColumnName();break;case"pageUp":t=this._getPageMovedRowKey(!1);break;case"pageDown":t=this._getPageMovedRowKey(!0);break;case"firstColumn":n=this.firstColumnName();break;case"lastColumn":n=this.lastColumnName();break;case"firstCell":t=this.firstRowKey(),n=this.firstColumnName();break;case"lastCell":t=this.lastRowKey(),n=this.lastColumnName()}t=i.isUndefined(t)?this.get("rowKey"):t,n=n||this.get("columnName"),this.focus(t,n,!0)},_onKeyEdit:function(e){var t;switch(e.command){case"currentCell":t=this.which();break;case"nextCell":t=this.nextAddress();break;case"prevCell":t=this.prevAddress()}t&&this.focusIn(t.rowKey,t.columnName,!0)},_getPageMovedRowKey:function(e){var t,n=this.dataModel.indexOfRowKey(this.get("rowKey")),i=this.coordRowModel.getPageMovedIndex(n,e);return t=e?this.nextRowKey(i-n):this.prevRowKey(n-i)},_onMouseDownFocus:function(){this.focusClipboard()},_savePrevious:function(){null!==this.get("rowKey")&&this.set("prevRowKey",this.get("rowKey")),this.get("columnName")&&this.set("prevColumnName",this.get("columnName"))},isCurrentCell:function(e,t,n){var i=this.get("columnName"),o=this.get("rowKey");return n&&(o=this.dataModel.getMainRowKey(o,i)),String(o)===String(e)&&i===t},focus:function(e,t,n){return this.get("active")||this.set("active",!0),!(this._isValidCell(e,t)&&!s.isMetaColumn(t)&&!this.isCurrentCell(e,t))||!!this._triggerFocusChangeEvent(e,t)&&(this.blur(),this.set({rowKey:e,columnName:t}),this.trigger("focus",e,t,n),"radio"===this.columnModel.get("selectType")&&this.dataModel.check(e),!0)},_triggerFocusChangeEvent:function(e,t){var n=new a(null,{rowKey:e,prevRowKey:this.get("rowKey"),columnName:t,prevColumnName:this.get("columnName")});return this.trigger("focusChange",n),!n.isStopped()},focusAt:function(e,t,n){var i=this.dataModel.at(e),o=this.columnModel.at(t,!0),s=!1;return i&&o&&(s=this.focus(i.get("rowKey"),o.name,n)),s},focusIn:function(e,t,n){var i=this.focus(e,t,n);return i&&(e=this.dataModel.getMainRowKey(e,t),this.dataModel.get(e).isEditable(t)?(this.finishEditing(),this.startEditing(e,t)):this.focusClipboard()),i},focusInAt:function(e,t,n){var i=this.dataModel.at(e),o=this.columnModel.at(t,!0),s=!1;return i&&o&&(s=this.focusIn(i.get("rowKey"),o.name,n)),s},focusClipboard:function(){this.trigger("focusClipboard")},refreshState:function(){var e;this.domState.hasFocusedElement()?this.has()||(e=this.restore(),e||this.focusAt(0,0)):this.set("active",!1)},blur:function(){return this.has()?(this.has(!0)&&this._savePrevious(),this.trigger("blur",this.get("rowKey"),this.get("columnName")),this.set({rowKey:null,columnName:null}),this):this},which:function(){return{rowKey:this.get("rowKey"),columnName:this.get("columnName")}},indexOf:function(e){var t=e?this.get("prevRowKey"):this.get("rowKey"),n=e?this.get("prevColumnName"):this.get("columnName");return{row:this.dataModel.indexOfRowKey(t),column:this.columnModel.indexOfColumnName(n,!0)}},has:function(e){var t=this.get("rowKey"),n=this.get("columnName");return e?this._isValidCell(t,n):!s.isBlank(t)&&!s.isBlank(n)},restore:function(){var e=this.get("prevRowKey"),t=this.get("prevColumnName"),n=!1;return this._isValidCell(e,t)&&(this.focus(e,t),this.set({prevRowKey:null,prevColumnName:null}),n=!0),n},isEditingCell:function(e,t){var n=this.get("editingAddress");return n&&String(n.rowKey)===String(e)&&n.columnName===t},startEditing:function(e,t){if(this.get("editingAddress"))return!1;if(i.isUndefined(e)&&i.isUndefined(t))e=this.get("rowKey"),t=this.get("columnName");else if(!this.isCurrentCell(e,t,!0))return!1;return e=this.dataModel.getMainRowKey(e,t),!!this.dataModel.get(e).isEditable(t)&&(this.set("editingAddress",{rowKey:e,columnName:t}),!0)},finishEditing:function(){return!!this.get("editingAddress")&&(this.set("editingAddress",null),!0)},_isValidCell:function(e,t){var n=!s.isBlank(e)&&!!this.dataModel.get(e),i=!s.isBlank(t)&&!!this.columnModel.getColumnModel(t);return n&&i},_findRowKey:function(e){var t,n,i=this.dataModel,o=null;return this.has(!0)&&(t=Math.max(Math.min(i.indexOfRowKey(this.get("rowKey"))+e,this.dataModel.length-1),0),n=i.at(t),n&&(o=n.get("rowKey"))),o},_findColumnName:function(e){var t,n=this.columnModel,i=n.getVisibleColumns(),o=n.indexOfColumnName(this.get("columnName"),!0),s=null;return this.has(!0)&&(t=Math.max(Math.min(o+e,i.length-1),0),s=i[t]&&i[t].name),s},_getRowSpanData:function(e,t){return!(!e||!t)&&this.dataModel.get(e).getRowSpanData(t)},nextRowIndex:function(e){var t=this.nextRowKey(e);return this.dataModel.indexOfRowKey(t)},prevRowIndex:function(e){var t=this.prevRowKey(e);return this.dataModel.indexOfRowKey(t);
},nextColumnIndex:function(){var e=this.nextColumnName();return this.columnModel.indexOfColumnName(e,!0)},prevColumnIndex:function(){var e=this.prevColumnName();return this.columnModel.indexOfColumnName(e,!0)},nextRowKey:function(e){var t,n,i=this.which(),o=i.rowKey;return e="number"==typeof e?e:1,e>1?(o=this._findRowKey(e),n=this._getRowSpanData(o,i.columnName),n&&!n.isMainRow&&(o=this._findRowKey(n.count+e))):(n=this._getRowSpanData(o,i.columnName),n.isMainRow&&n.count>0?o=this._findRowKey(n.count):n&&!n.isMainRow?(t=n.count,n=this._getRowSpanData(n.mainRowKey,i.columnName),o=this._findRowKey(n.count+t)):o=this._findRowKey(1)),o},prevRowKey:function(e){var t,n=this.which(),i=n.rowKey;return e="number"==typeof e?e:1,e*=-1,e<-1?(i=this._findRowKey(e),t=this._getRowSpanData(i,n.columnName),t&&!t.isMainRow&&(i=this._findRowKey(t.count+e))):(t=this._getRowSpanData(i,n.columnName),i=t&&!t.isMainRow?this._findRowKey(t.count-1):this._findRowKey(-1)),i},nextColumnName:function(){return this._findColumnName(1)},prevColumnName:function(){return this._findColumnName(-1)},firstRowKey:function(){return this.dataModel.at(0).get("rowKey")},lastRowKey:function(){return this.dataModel.at(this.dataModel.length-1).get("rowKey")},firstColumnName:function(){var e=this.columnModel.getVisibleColumns();return e[0].name},lastColumnName:function(){var e=this.columnModel.getVisibleColumns(),t=e.length-1;return e[t].name},prevAddress:function(){var e,t,n=this.get("rowKey"),i=this.get("columnName"),o=i===this.firstColumnName(),s=n===this.firstRowKey();return s&&o?(e=n,t=i):o?(e=this.prevRowKey(),t=this.lastColumnName()):(e=n,t=this.prevColumnName()),{rowKey:e,columnName:t}},nextAddress:function(){var e,t,n=this.get("rowKey"),i=this.get("columnName"),o=i===this.lastColumnName(),s=n===this.lastRowKey();return s&&o?(e=n,t=i):o?(e=this.nextRowKey(),t=this.firstColumnName()):(e=n,t=this.nextColumnName()),{rowKey:e,columnName:t}}});e.exports=r},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(9),a=n(25),r=n(26),l=n(10).renderState,d=n(10).dimension.CELL_BORDER_WIDTH,u=1e3,h=s.extend({initialize:function(e,t){var n,o,s;i.assign(this,{dataModel:t.dataModel,columnModel:t.columnModel,focusModel:t.focusModel,dimensionModel:t.dimensionModel,coordRowModel:t.coordRowModel,coordColumnModel:t.coordColumnModel}),n={dataModel:this.dataModel,columnModel:this.columnModel,focusModel:this.focusModel},o=new r([],n),s=new r([],n),this.set({lside:[],rside:[],partialLside:o,partialRside:s}),this.listenTo(this.columnModel,"columnModelChange change",this._onColumnModelChange).listenTo(this.dataModel,"sort reset",this._onDataModelChange).listenTo(this.dataModel,"deleteRange",this._onRangeDataModelChange).listenTo(this.dataModel,"add",this._onAddDataModelChange).listenTo(this.dataModel,"remove",this._onRemoveDataModelChange).listenTo(this.dataModel,"beforeReset",this._onBeforeResetData).listenTo(this.focusModel,"change:editingAddress",this._onEditingAddressChange).listenTo(o,"valueChange",this._executeRelation).listenTo(s,"valueChange",this._executeRelation).listenTo(this.coordRowModel,"reset",this._onChangeRowHeights).listenTo(this.dimensionModel,"columnWidthChanged",this.finishEditing).listenTo(this.dimensionModel,"change:width",this._updateMaxScrollLeft).listenTo(this.dimensionModel,"change:totalRowHeight change:scrollBarSize change:bodyHeight",this._updateMaxScrollTop),this.get("showDummyRows")&&(this.listenTo(this.dimensionModel,"change:bodyHeight change:totalRowHeight",this._resetDummyRowCount),this.on("change:dummyRowCount",this._resetDummyRows)),this.on("change",this._onChangeIndex,this),this._onChangeLayoutBound=i.bind(this._onChangeLayout,this)},defaults:{top:0,bottom:0,scrollTop:0,scrollLeft:0,maxScrollLeft:0,maxScrollTop:0,startIndex:-1,endIndex:-1,startNumber:1,lside:null,rside:null,partialLside:null,partialRside:null,showDummyRows:!1,dummyRowCount:0,emptyMessage:null,state:l.DONE},_onChangeLayout:function(){this.focusModel.finishEditing(),this.focusModel.focusClipboard()},_onChangeIndex:function(e){var t=e.changed,n=i.has(t,"startIndex"),o=i.has(t,"endIndex");(n||o)&&this.refresh()},_onChangeRowHeights:function(){for(var e,t=this.coordRowModel,n=this.get("partialLside"),i=this.get("partialRside"),o=0,s=n.length;o<s;o+=1)e=t.getHeightAt(o),n.at(o).set("height",e),i.at(o).set("height",e)},_updateMaxScrollLeft:function(){var e=this.dimensionModel,t=this.coordColumnModel.getFrameWidth("R")-e.get("rsideWidth")+e.getScrollYWidth();this.set("maxScrollLeft",t)},_updateMaxScrollTop:function(){var e=this.dimensionModel,t=e.get("totalRowHeight")-e.get("bodyHeight")+e.getScrollXHeight();this.set("maxScrollTop",t)},_onBeforeResetData:function(e){e>u&&this.set("state",l.LOADING)},_onEditingAddressChange:function(e,t){var n=t,o=!0,s=this;t||(n=e.previous("editingAddress"),o=!1),this._updateCellData(n.rowKey,n.columnName,{editing:o}),this._triggerEditingStateChanged(n.rowKey,n.columnName),i.defer(function(){s._toggleChangeLayoutEventHandlers(o)})},_toggleChangeLayoutEventHandlers:function(e){var t="change:scrollTop change:scrollLeft",n="columnWidthChanged";e?(this.listenToOnce(this.dimensionModel,n,this._onChangeLayoutBound),this.once(t,this._onChangeLayoutBound)):(this.stopListening(this.dimensionModel,n,this._onChangeLayoutBound),this.off(t,this._onChangeLayoutBound))},_triggerEditingStateChanged:function(e,t){var n=this.getCellData(e,t);o.pick(n,"columnModel","editOptions","useViewMode")!==!1&&null===n.convertedHTML&&this.trigger("editingStateChanged",n)},_updateCellData:function(e,t,n){var i=this._getRowModel(e,t);i&&i.setCell(t,n)},initializeVariables:function(){this.set({top:0,scrollTop:0,scrollLeft:0,startNumber:1})},getCollection:function(e){var t=this._getPartialWhichSideType(e);return this.get(t)},_getPartialWhichSideType:function(e){return o.isString(e)?"partial"+e+"side":"partialRside"},_onColumnModelChange:function(){this.set({scrollLeft:0,scrollTop:0},{silent:!0}),this._resetViewModelList(),this._setRenderingRange(!0),this.refresh({change:!1,columnModelChanged:!0}),this._updateMaxScrollLeft()},_onDataModelChange:function(){this._resetViewModelList(),this._setRenderingRange(!0),this.refresh({type:"reset",dataListChanged:!0})},_onAddDataModelChange:function(e,t){var n,o,s,a,r=this._getColumnNamesOfEachSide(),l=t.at;this._setRenderingRange(!0),e=i.isArray(e)?e:e.models,i.each(e,function(e,t){n=this.coordRowModel.getHeightAt(t),i.each(["lside","rside"],function(i){s=l+t+1,o=this._createViewDataFromDataModel(e,r[i],n,s),a=this._createRowModel(o,!0),this.get(i).splice(l+t,0,a)},this)},this),this.refresh({type:"add",dataListChanged:!0}),t.focus&&this.focusModel.focusAt(t.at,0)},_onRemoveDataModelChange:function(e,t){i.each(["lside","rside"],function(e){this.get(e).splice(t,1)},this),this._setRenderingRange(!0),this.refresh({dataListChanged:!0})},_onRangeDataModelChange:function(e){var t=this.columnModel,n=e.rowKeys,o=e.columnNames;this._setRenderingRange(!0),i.each(["partialLside","partialRside"],function(e){i.each(this.get(e).models,function(e){var s=e.get("rowKey"),a=i.contains(n,s);a&&i.each(o,function(e){t.getColumnModel(e).editOptions&&this._updateCellData(s,e,{value:"",formattedValue:""})},this)},this)},this),this.refresh({type:"deleteRange",dataListChanged:!0})},_resetDummyRows:function(){this._clearDummyRows(),this._fillDummyRows(),this.trigger("rowListChanged")},_setRenderingRange:function(e){var t=this.dataModel.length;this.set({startIndex:t?0:-1,endIndex:t-1},{silent:e})},_createViewDataFromDataModel:function(e,t,n,o){var s={rowNum:o,height:n,rowKey:e.get("rowKey"),_extraData:e.get("_extraData")};return i.each(t,function(t){var n=e.get(t);"_number"!==t||i.isNumber(n)||(n=o),s[t]=n}),s},_getColumnNamesOfEachSide:function(){var e=this.columnModel.getVisibleFrozenCount(!0),t=this.columnModel.getVisibleColumns(null,!0),n=i.pluck(t,"name");return{lside:n.slice(0,e),rside:n.slice(e)}},_addViewModelListWithRange:function(e,t){var n,i,o,s=this._getColumnNamesOfEachSide();if(e>=0&&t>=0)for(o=e;o<=t;o+=1)n=this.dataModel.at(o),i=this.coordRowModel.getHeightAt(o),this._addViewModelList(n,s,i,o)},_addViewModelList:function(e,t,n,o){i.each(["lside","rside"],function(i){var s;this.get(i)[o]||(s=this._createViewDataFromDataModel(e,t[i],n,o+1),this.get(i)[o]=this._createRowModel(s,!0))},this)},_updateRowNumber:function(e,t){for(var n,i,o,s=this.get("lside"),a=e;a<=t;a+=1)n=s[a],o=a+1,n&&(i=n.get("rowNum"),o=a+this.get("startNumber"),i!==o&&(n.set({rowNum:o},{silent:!0}),n.setCell("_number",{formattedValue:o,value:o})))},_resetPartialViewModelList:function(e,t){var n,o,s,a;i.each(["L","R"],function(i){n=i.toLowerCase()+"side",o=this._getPartialWhichSideType(i),s=this.get(n),a=s.slice(e,t+1),this.get(o).reset(a)},this)},_getActualRowCount:function(){return this.get("endIndex")-this.get("startIndex")+1},_clearDummyRows:function(){var e=this.get("endIndex")-this.get("startIndex")+1;i.each(["lside","rside"],function(t){for(var n=this.get(t);n.length>e;)n.pop()},this)},_resetDummyRowCount:function(){var e=this.dimensionModel,t=e.get("totalRowHeight"),n=e.get("rowHeight")+d,i=e.get("bodyHeight")-e.getScrollXHeight(),o=0;t<i&&(o=Math.ceil((i-t)/n)),this.set("dummyRowCount",o)},_fillDummyRows:function(){var e,t,n=this.get("dummyRowCount");n&&(e=this.get("startNumber")+this.get("endIndex")+1,t=this.dimensionModel.get("rowHeight"),i.times(n,function(){i.each(["lside","rside"],function(n){this.get(n).push(this._createRowModel({height:t,rowNum:e}))},this),e+=1},this))},refresh:function(e){var t,n,i,o=!!e&&e.columnModelChanged,s=!!e&&e.dataListChanged,a=!!e&&e.type;if(t=this.get("startIndex"),n=this.get("endIndex"),"add"!==a&&"deleteRange"!==a&&this._addViewModelListWithRange(t,n),"deleteRange"!==a&&this._updateRowNumber(t,n),this._resetPartialViewModelList(t,n),this._fillDummyRows(),t>=0&&n>=0)for(i=t;i<=n;i+=1)this._executeRelation(i);o?this.trigger("columnModelChanged"):(this.trigger("rowListChanged",s),s&&this.coordRowModel.syncWithDom()),this._refreshState()},_refreshState:function(){this.dataModel.length?this.set("state",l.DONE):this.set("state",l.EMPTY)},_getCollectionByColumnName:function(e){var t,n=this.get("partialLside");return t=n.at(0)&&n.at(0).get(e)?n:this.get("partialRside")},_getRowModel:function(e,t){var n=this._getCollectionByColumnName(t);return n.get(e)},getCellData:function(e,t){var n=this._getRowModel(e,t),i=null;return n&&(i=n.get(t)),i},_executeRelation:function(e){var t,n,o=this.dataModel.at(e),s=e-this.get("startIndex");n=o.executeRelationCallbacksAll(),i.each(n,function(e,n){t=this._getCollectionByColumnName(n).at(s),t&&t.setCell(n,e)},this)},_createRowModel:function(e,t){return new a(e,{parse:t,dataModel:this.dataModel,columnModel:this.columnModel,focusModel:this.focusModel})},_resetViewModelList:function(){i.each(["lside","rside"],function(e){this.set(e,new Array(this.dataModel.length))},this)}});e.exports=h},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(9),a=n(16),r=s.extend({initialize:function(e,t){var n=e&&e.rowKey,i=t.dataModel,o=i.get(n);this.dataModel=i,this.columnModel=t.columnModel,this.focusModel=t.focusModel,o&&(this.listenTo(o,"change",this._onDataModelChange),this.listenTo(o,"restore",this._onDataModelRestore),this.listenTo(o,"extraDataChanged",this._setRowExtraData),this.listenTo(i,"disabledChanged",this._onDataModelDisabledChanged),this.rowData=o)},idAttribute:"rowKey",_onDataModelChange:function(e){i.each(e.changed,function(t,n){var i,o;this.has(n)&&(i=this.columnModel.getColumnModel(n),o=this.columnModel.isTextType(n),this.setCell(n,this._getValueAttrs(t,e,i,o)))},this)},_onDataModelRestore:function(e){var t=this.get(e);t&&this.trigger("restore",t)},_getColumnNameList:function(){var e=this.columnModel.getVisibleColumns(null,!0);return i.pluck(e,"name")},_onDataModelDisabledChanged:function(){var e=this._getColumnNameList();i.each(e,function(e){this.setCell(e,{disabled:this.rowData.isDisabled(e),className:this._getClassNameString(e)})},this)},_setRowExtraData:function(){i.each(this._getColumnNameList(),function(e){var t,n=this.get(e);!o.isUndefined(n)&&n.isMainRow&&(t=this.rowData.getCellState(e),this.setCell(e,{disabled:t.disabled,editable:t.editable,className:this._getClassNameString(e)}))},this)},parse:function(e,t){return this._formatData(e,t.dataModel,t.columnModel,t.focusModel)},_formatData:function(e,t,n,s){var a,r,l=e.rowKey,d=e.height;return i.isUndefined(l)?e:(r=t.get(l),a=i.omit(e,"rowKey","_extraData","height","rowNum"),i.each(a,function(a,u){var h=this._getRowSpanData(u,e,t.isRowSpanEnable()),c=r.getCellState(u),g=n.isTextType(u),m=n.getColumnModel(u);e[u]={rowKey:l,height:d,columnName:u,rowSpan:h.count,isMainRow:h.isMainRow,mainRowKey:h.mainRowKey,editable:c.editable,disabled:c.disabled,editing:s.isEditingCell(l,u),whiteSpace:m.whiteSpace||"nowrap",valign:m.valign,listItems:o.pick(m,"editOptions","listItems"),className:this._getClassNameString(u,r,s),columnModel:m,changed:[]},i.assign(e[u],this._getValueAttrs(a,r,m,g))},this),e)},_getClassNameString:function(e,t,n){var i;return t||(t=this.dataModel.get(this.get("rowKey")))?(n||(n=this.focusModel),i=t.getClassNameList(e),i.join(" ")):""},_getValueAttrs:function(e,t,n,i){var s=o.pick(n,"editOptions","prefix"),a=o.pick(n,"editOptions","postfix"),r=o.pick(n,"editOptions","converter"),l=t.toJSON();return{value:this._getValueToDisplay(e,n,i),formattedValue:this._getFormattedValue(e,l,n),prefix:this._getExtraContent(s,e,l),postfix:this._getExtraContent(a,e,l),convertedHTML:this._getConvertedHTML(r,e,l)}},_getFormattedValue:function(e,t,n){var o;return o=i.isFunction(n.formatter)?n.formatter(e,t,n):e,i.isNumber(o)?o=String(o):o||(o=""),o},_getExtraContent:function(e,t,n){var s="";return i.isFunction(e)?s=e(t,n):o.isExisty(e)&&(s=e),s},_getConvertedHTML:function(e,t,n){var o=null;return i.isFunction(e)&&(o=e(t,n)),o===!1&&(o=null),o},_getValueToDisplay:function(e,t,n){var i=o.isExisty,s=t.useHtmlEntity,a=t.defaultValue;return i(e)||(e=i(a)?a:""),n&&s&&o.hasEncodableString(e)&&(e=o.encodeHTMLEntity(e)),e},_getRowSpanData:function(e,t,n){var i=o.pick(t,"_extraData","rowSpanData",e);return n&&i||(i={mainRowKey:t.rowKey,count:0,isMainRow:!0}),i},updateClassName:function(e){this.setCell(e,{className:this._getClassNameString(e)})},setCell:function(e,t){var n,o,s,r=!1,l=[];this.has(e)&&(o=this.get("rowKey"),s=i.clone(this.get(e)),i.each(t,function(e,t){a.isEqual(s[t],e)||(r="value"===t||r,s[t]=e,l.push(t))},this),l.length&&(s.changed=l,this.set(e,s,{silent:this._shouldSetSilently(s,r)}),r&&(n=this.dataModel.indexOfRowKey(o),this.trigger("valueChange",n))))},_shouldSetSilently:function(e,t){var n=e.editing&&t,s=o.pick(e,"columnModel","editOptions","useViewMode")!==!1,a=i.contains(e.changed,"editing")&&e.editing;return n||s&&a}});e.exports=r},function(e,t,n){"use strict";var i=n(2),o=n(12),s=n(25),a=o.extend({initialize:function(e,t){i.assign(this,{dataModel:t.dataModel,columnModel:t.columnModel,focusModel:t.focusModel})},model:s});e.exports=a},function(e,t,n){"use strict";var i=n(2),o=n(24),s=n(10).dimension,a=s.CELL_BORDER_WIDTH,r=.3,l=.1,d=o.extend({initialize:function(){o.prototype.initialize.apply(this,arguments),this.on("change:scrollTop",this._onChangeScrollTop,this),this.listenTo(this.dimensionModel,"change:bodyHeight",this._onChangeBodyHeight)},_onChangeScrollTop:function(){this._shouldRefresh(this.get("scrollTop"))&&this._setRenderingRange()},_onChangeBodyHeight:function(){this._setRenderingRange()},_setRenderingRange:function(e){var t,n,i=this.get("scrollTop"),o=this.dimensionModel,s=this.dataModel,l=this.coordRowModel,d=o.get("bodyHeight"),u=parseInt(d*r,10),h=Math.max(l.indexOf(i-u),0),c=Math.min(l.indexOf(i+d+u),s.length-1);s.isRowSpanEnable()&&(h+=this._getStartRowSpanMinCount(h),c+=this._getEndRowSpanMaxCount(c)),t=l.getOffsetAt(h),n=l.getOffsetAt(c)+l.getHeightAt(c)+a,this.set({top:t,bottom:n,startIndex:h,endIndex:c},{silent:e})},_getStartRowSpanMinCount:function(e){var t,n=this.dataModel.at(e),o=0;return n&&(t=i.pluck(n.getRowSpanData(),"count"),t.push(0),o=i.min(t)),o},_getEndRowSpanMaxCount:function(e){var t,n=this.dataModel.at(e),o=0;return n&&(t=i.pluck(n.getRowSpanData(),"count"),t.push(0),o=i.max(t)),o>0&&(o-=1),o},_shouldRefresh:function(e){var t=this.dimensionModel.get("bodyHeight"),n=e+t,i=this.dimensionModel.get("totalRowHeight"),o=this.get("top"),s=this.get("bottom"),a=parseInt(t*l,10),r=e-o<a,d=s-n<a;return r&&o>0||d&&s<i}});d.BUFFER_RATIO=r,d.BUFFER_HIT_RATIO=l,e.exports=d},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(9),a=n(15),r=n(16),l=n(10).selectionType,d=s.extend({initialize:function(e,t){var n;s.prototype.initialize.apply(this,arguments),o.assign(this,{dataModel:t.dataModel,columnModel:t.columnModel,dimensionModel:t.dimensionModel,focusModel:t.focusModel,renderModel:t.renderModel,coordRowModel:t.coordRowModel,coordConverterModel:t.coordConverterModel,domEventBus:t.domEventBus,inputRange:null,minimumColumnRange:null,intervalIdForAutoScroll:null,scrollPixelScale:40,enabled:!0,selectionType:l.CELL,selectionUnit:e.selectionUnit}),this.listenTo(this.dataModel,"add remove sort reset",this.end),this.listenTo(this.dataModel,"paste",this._onPasteData),this.isEnabled()&&t.domEventBus&&(n=t.domEventBus,this.listenTo(n,"dragstart:header",this._onDragStartHeader),this.listenTo(n,"dragmove:header",this._onDragMoveHeader),this.listenTo(n,"dragmove:body",this._onDragMoveBody),this.listenTo(n,"dragend:body",this._onDragEndBody),this.listenTo(n,"mousedown:body",this._onMouseDownBody),this.listenTo(n,"key:move key:edit",this._onKeyMoveOrEdit),this.listenTo(n,"key:select",this._onKeySelect),this.listenTo(n,"key:delete",this._onKeyDelete)),this.on("change:range",this._triggerSelectionEvent)},defaults:{range:null},_onDragStartHeader:function(e){var t,n=this.columnModel,i=n.getUnitColumnNamesIfMerged(e.columnName);return o.some(i,r.isMetaColumn)?void e.stop():(t=this._getColumnRangeWithNames(i),void(e.shiftKey?(this.update(0,t[1],l.COLUMN),this._extendColumnSelection(t,e.pageX,e.pageY)):(this.minimumColumnWidth=t,this.selectColumn(t[0]),this.update(0,t[1]))))},_onDragMoveHeader:function(e){var t,n,i=this.columnModel;e.isOnHeaderArea&&!e.columnName||(t=i.getUnitColumnNamesIfMerged(e.columnName),t.length&&(n=this._getColumnRangeWithNames(t)),this._extendColumnSelection(n,e.pageX,e.pageY))},_onKeyMoveOrEdit:function(){this.end()},_onKeySelect:function(e){var t=this._getRecentAddress(),n=this.dataModel.length-1,i=this.columnModel.getVisibleColumns().length-1;switch(e.command){case"up":t.row-=1;break;case"down":t.row+=1;break;case"left":t.column-=1;break;case"right":t.column+=1;break;case"pageUp":t.row=this.coordRowModel.getPageMovedIndex(t.row,!1);break;case"pageDown":t.row=this.coordRowModel.getPageMovedIndex(t.row,!0);break;case"firstColumn":t.column=0;break;case"lastColumn":t.column=i;break;case"firstCell":t.row=0,t.column=0;break;case"lastCell":t.row=n,t.column=i;break;case"all":this.selectAll(),t=null;break;default:t=null}t&&(this.update(t.row,t.column,this.getSelectionUnit()),this._scrollTo(t.row,t.column))},_onKeyDelete:function(){var e,t=this.dataModel;this.hasSelection()?t.delRange(this.get("range")):(e=this.focusModel.which(),t.del(e.rowKey,e.columnName))},_getRecentAddress:function(){var e,t,n=this.focusModel.indexOf(),i=this.get("range"),s=o.assign({},n);return i&&(e=i.row,t=i.column,s.row=e[0],s.column=t[0],e[1]>n.row&&(s.row=e[1]),t[1]>n.column&&(s.column=t[1])),s},_isValidAddress:function(e){return!!this.dataModel.at(e.row)&&!!this.columnModel.at(e.colummn)},_scrollTo:function(e,t){var n,i,o,s,a=this.dataModel.at(e),r=this.columnModel.at(t);a&&r&&(n=a.get("rowKey"),i=r.name,s=this.coordConverterModel.getScrollPosition(n,i),s&&(o=this.getType(),o===l.COLUMN?delete s.scrollTop:o===l.ROW&&delete s.scrollLeft,this.renderModel.set(s)))},_getTypeByColumnIndex:function(e){var t=this.columnModel.getVisibleColumns(null,!0),n=t[e].name;switch(n){case"_button":return null;case"_number":return l.ROW;default:return l.CELL}},_onMouseDownBody:function(e){var t,n,i=this.coordConverterModel.getIndexFromMousePosition(e.pageX,e.pageY,!0),o=this._getTypeByColumnIndex(i.column);o&&(t=i.row,n=i.column-this.columnModel.getVisibleMetaColumnCount(),e.shiftKey?this.update(t,Math.max(n,0)):o===l.ROW?this.selectRow(t):(this.focusModel.focusAt(t,n),this.end()))},_onDragMoveBody:function(e){var t=this.coordConverterModel.getIndexFromMousePosition(e.pageX,e.pageY);this.update(t.row,t.column,this.getSelectionUnit()),this._setScrolling(e.pageX,e.pageY)},_onDragEndBody:function(){this.stopAutoScroll()},_onPasteData:function(e){this.start(e.startIdx.row,e.startIdx.column),this.update(e.endIdx.row,e.endIdx.column)},_getColumnRangeWithNames:function(e){var t=this.columnModel,n=o.map(e,function(e){return t.indexOfColumnName(e,!0)}),i=r.getMinMax(n);return[i.min,i.max]},setType:function(e){this.selectionType=l[e]||this.selectionType},getType:function(){return this.selectionType},getSelectionUnit:function(){return this.get("selectionUnit").toUpperCase()},enable:function(){this.enabled=!0},disable:function(){this.end(),this.enabled=!1},isEnabled:function(){return this.enabled},start:function(e,t,n){this.isEnabled()&&(this.setType(n),this.inputRange={row:[e,e],column:[t,t]},this._resetRangeAttribute())},update:function(e,t,n){var i;!this.enabled||n!==l.COLUMN&&e<0||n!==l.ROW&&t<0||(this.hasSelection()?this.setType(n):(i=this.focusModel.indexOf(),n===l.ROW?this.start(i.row,0,l.ROW):this.start(i.row,i.column,l.CELL)),this._updateInputRange(e,t),this._resetRangeAttribute())},_updateInputRange:function(e,t){var n=this.inputRange;this.selectionType===l.ROW?t=this.columnModel.getVisibleColumns().length-1:this.selectionType===l.COLUMN&&(e=this.dataModel.length-1),n.row[1]=e,n.column[1]=t},_extendColumnSelection:function(e,t,n){var i,o=this.minimumColumnRange,s=this.coordConverterModel.getIndexFromMousePosition(t,n),a={row:[0,this.dataModel.length-1],column:[]};e&&e.length||(e=[s.column]),this._setScrolling(t,n),o?i=r.getMinMax(e.concat(o)):(e.push(this.inputRange.column[0]),i=r.getMinMax(e)),a.column.push(i.min,i.max),this._resetRangeAttribute(a)},_setScrolling:function(e,t){var n=this.dimensionModel.getOverflowFromMousePosition(e,t);this.stopAutoScroll(),this._isAutoScrollable(n.x,n.y)&&(this.intervalIdForAutoScroll=setInterval(o.bind(this._adjustScroll,this,n.x,n.y)))},end:function(){this.inputRange=null,this.unset("range"),this.minimumColumnRange=null},stopAutoScroll:function(){o.isNull(this.intervalIdForAutoScroll)||(clearInterval(this.intervalIdForAutoScroll),this.intervalIdForAutoScroll=null)},selectRow:function(e){this.isEnabled()&&(this.focusModel.focusAt(e,0),this.start(e,0,l.ROW),this.update(e,this.columnModel.getVisibleColumns().length-1))},selectColumn:function(e){this.isEnabled()&&(this.focusModel.focusAt(0,e),this.start(0,e,l.COLUMN),this.update(this.dataModel.length-1,e))},selectAll:function(){this.isEnabled()&&(this.start(0,0,l.CELL),this.update(this.dataModel.length-1,this.columnModel.getVisibleColumns().length-1))},getStartIndex:function(){var e=this.get("range");return{row:e.row[0],column:e.column[0]}},getEndIndex:function(){var e=this.get("range");return{row:e.row[1],column:e.column[1]}},hasSelection:function(){return!!this.get("range")},_isSingleCell:function(e,t){var n=1===e.length,i=1===t.length,o=n&&!i&&t[0].getRowSpanData(e[0]).count===t.length;return n&&i||o},getValuesToString:function(){var e=this,t=this._getRangeRowList(),n=this._getRangeColumnNames(),i=o.map(t,function(t){return o.map(n,function(n){return e.getValueToString(t.get("rowKey"),n)}).join("\t")});return this._isSingleCell(n,t)?i[0]:i.join("\n")},getValueToString:function(e,t){var n,i=this.columnModel,o=this.renderModel.getCellData(e,t),s=i.getCopyOptions(t),a=i.getColumnModel(t),r=this.dataModel.get(e),l=r.getValueString(t);return n=s.customValue?this._getCustomValue(s.customValue,l,r.toJSON(),a):s.useListItemText?l:s.useFormattedValue?o.formattedValue:l},_getCustomValue:function(e,t,n,i){var s;return s=o.isFunction(e)?e(t,n,i):e},_getRangeRowList:function(){var e=this.get("range").row;return this.dataModel.slice(e[0],e[1]+1)},_getRangeColumnNames:function(){var e=this.get("range").column,t=this.columnModel.getVisibleColumns().slice(e[0],e[1]+1);return o.pluck(t,"name")},_isAutoScrollable:function(e,t){return!(0===e&&0===t)},_adjustScroll:function(e,t){var n=this.renderModel;e&&this._adjustScrollLeft(e,n.get("scrollLeft"),n.get("maxScrollLeft")),t&&this._adjustScrollTop(t,n.get("scrollTop"),n.get("maxScrollTop"))},_adjustScrollLeft:function(e,t,n){var i=t,o=this.scrollPixelScale;e<0?i=Math.max(0,t-o):e>0&&(i=Math.min(n,t+o)),this.renderModel.set("scrollLeft",i)},_adjustScrollTop:function(e,t,n){var i=t,o=this.scrollPixelScale;e<0?i=Math.max(0,t-o):e>0&&(i=Math.min(n,t+o)),this.renderModel.set("scrollTop",i)},_resetRangeAttribute:function(e){var t,n,i,s=this.dataModel;if(e=e||this.inputRange,!e)return void this.set("range",null);if(n={row:o.sortBy(e.row),column:o.sortBy(e.column)},s.isRowSpanEnable()&&this.selectionType===l.CELL){do i=o.assign([],n.row),n=this._getRowSpannedIndex(n),t=n.row[0]!==i[0]||n.row[1]!==i[1];while(t);this._setRangeMinMax(n.row,n.column)}this.set("range",n)},_triggerSelectionEvent:function(){var e,t,n,i,o,s,r,l=this.get("range"),d=this.dataModel,u=this.columnModel;l&&(e=l.row,t=l.column,i=d.getRowDataAt(e[0]),s=u.at(t[0]),o=d.getRowDataAt(e[1]),r=u.at(t[1]),i&&o&&s&&r&&(n=new a(null,{range:{start:[i.rowKey,s.name],end:[o.rowKey,r.name]}}),this.trigger("selection",n)))},_setRangeMinMax:function(e,t){e&&(e[0]=Math.max(0,e[0]),e[1]=Math.min(this.dataModel.length-1,e[1])),t&&(t[0]=Math.max(0,t[0]),t[1]=Math.min(this.columnModel.getVisibleColumns().length-1,t[1]))},_concatRowSpanIndexFromStart:function(e){var t,n=e.startIndex,i=e.endIndex,o=e.columnName,s=e.startRowSpanDataMap&&e.startRowSpanDataMap[o],a=e.startIndexList,r=e.endIndexList;s&&(s.isMainRow?(t=n+s.count-1,t>i&&r.push(t)):(t=n+s.count,a.push(t)))},_concatRowSpanIndexFromEnd:function(e){var t,n,i=e.endIndex,o=e.columnName,s=e.endRowSpanDataMap&&e.endRowSpanDataMap[o],a=e.endIndexList,r=e.dataModel;s&&(s.isMainRow?(t=i+s.count-1,a.push(t)):(t=i+s.count,n=r.at(t).getRowSpanData(o),t+=n.count-1,t>i&&a.push(t)))},_getRowSpannedIndex:function(e){var t,n,s,a=this.columnModel.getVisibleColumns().slice(e.column[0],e.column[1]+1),r=this.dataModel,l=[e.row[0]],d=[e.row[1]],u=r.at(e.row[0]),h=r.at(e.row[1]),c=i.extend({},e);return u&&h?(t=r.at(e.row[0]).getRowSpanData(),n=r.at(e.row[1]).getRowSpanData(),o.each(a,function(i){s={columnName:i.name,startIndex:e.row[0],endIndex:e.row[1],endRowSpanDataMap:n,startRowSpanDataMap:t,startIndexList:l,endIndexList:d,dataModel:r},this._concatRowSpanIndexFromStart(s),this._concatRowSpanIndexFromEnd(s)},this),c.row=[Math.min.apply(null,l),Math.max.apply(null,d)],c):c}});e.exports=d},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(9),a=n(10).summaryType,r=s.extend({initialize:function(e,t){this.dataModel=t.dataModel,this.autoColumnNames=t.autoColumnNames,this.columnSummaryMap={},this.listenTo(this.dataModel,"add remove reset",this._resetSummaryMap),this.listenTo(this.dataModel,"change",this._onChangeData),this.listenTo(this.dataModel,"deleteRange",this._onDeleteRangeData),this._resetSummaryMap()},_calculate:function(e){var t,n,i=Number.MAX_VALUE,o=Number.MIN_VALUE,s=0,r=e.length,l={};for(t=0;t<r;t+=1)n=Number(e[t]),isNaN(n)&&(n=0),s+=n,i>n&&(i=n),o<n&&(o=n);return l[a.SUM]=s,l[a.MIN]=i,l[a.MAX]=o,l[a.AVG]=r?s/r:0,l[a.CNT]=r,l},_resetSummaryMap:function(){this._resetSummarySummaryValue()},_resetSummarySummaryValue:function(e){var t=this.autoColumnNames;e&&(t=i.intersection(e,this.autoColumnNames)),i.each(t,function(e){var t=this.dataModel.getColumnValues(e),n=this._calculate(t);this.columnSummaryMap[e]=n,this.trigger("change",e,n)},this)},_onChangeData:function(e){this._resetSummarySummaryValue(i.keys(e.changed))},_onDeleteRangeData:function(e){this._resetSummarySummaryValue(e.columnNames)},getValue:function(e,t){var n,s=this.columnSummaryMap[e];return t?(n=o.pick(s,t),i.isUndefined(n)?null:n):i.isUndefined(s)?null:s}});e.exports=r},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(9),a=s.extend({initialize:function(e,t){s.prototype.initialize.apply(this,arguments),o.assign(this,{columnModel:t.columnModel,dataModel:t.dataModel,selectionModel:t.selectionModel,renderModel:t.renderModel,focusModel:t.focusModel,copyOptions:t.copyOptions,domEventBus:t.domEventBus}),this.listenTo(t.domEventBus,"key:clipboard",this._onKeyClipboard)},defaults:{text:null},setClipboardText:function(){this.set("text",this._getClipboardText())},pasteClipboardDataToGrid:function(e){var t,n,i,o,s=this.selectionModel,a=this.focusModel,r=this.dataModel;s.hasSelection()?(t=s.get("range"),n=t.row[1]-t.row[0]+1,i=t.column[1]-t.column[0]+1,e=this._duplicateData(e,n,i),o=s.getStartIndex()):o=a.indexOf(),r.paste(e,o)},_onKeyClipboard:function(e){var t=e.command;"copy"===t&&this.setClipboardText()},_duplicateData:function(e,t,n){var s=e.length,a=e[0].length,r=Math.floor(t/s)-1,l=Math.floor(n/a)-1,d=i.extend(!0,[],e);return o.times(r,function(){o.forEach(e,function(e){d.push(e.slice(0))})}),o.forEach(d,function(e){var t=e.slice(0);o.times(l,function(){[].push.apply(e,t)})}),d},_getClipboardText:function(){var e,t=this.selectionModel,n=this.focusModel.which();return e=t.hasSelection()?t.getValuesToString():t.getValueToString(n.rowKey,n.columnName)}});e.exports=a},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(32),a=n(33),r=n(34),l=n(35),d=n(37),u=n(39),h=n(41),c=n(43),g=n(45),m=n(46),f=n(47),p=n(48),M=n(49),_=n(50),C=n(51),w=n(52),v=n(53),y=n(54),R=n(55),E=n(16).isOptionEnabled,b=n(10).frame,D=o.defineClass({init:function(e){this.domState=e.domState,this.domEventBus=e.domEventBus,this.modelManager=e.modelManager,this.painterManager=e.painterManager,this.componentHolder=e.componentHolder,this.summaryOptions=e.summary,this.heightResizable=e.heightResizable},createContainer:function(){return new a({el:this.domState.$el,gridId:this.modelManager.gridId,domEventBus:this.domEventBus,dataModel:this.modelManager.dataModel,dimensionModel:this.modelManager.dimensionModel,viewFactory:this})},createContentArea:function(){return new r({dimensionModel:this.modelManager.dimensionModel,viewFactory:this})},createPagination:function(){return E(this.componentHolder.getOptions("pagination"))?new l({componentHolder:this.componentHolder,dimensionModel:this.modelManager.dimensionModel,focusModel:this.modelManager.focusModel}):null},createHeightResizeHandle:function(){return E(this.heightResizable)?new d({dimensionModel:this.modelManager.dimensionModel,domEventBus:this.domEventBus}):null},createStateLayer:function(){return new u({dimensionModel:this.modelManager.dimensionModel,renderModel:this.modelManager.renderModel})},createClipboard:function(){return new h({clipboardModel:this.modelManager.clipboardModel,focusModel:this.modelManager.focusModel,domEventBus:this.domEventBus})},createFrame:function(e){var t=e===b.L?c:g;return new t({dimensionModel:this.modelManager.dimensionModel,renderModel:this.modelManager.renderModel,viewFactory:this})},createHeader:function(e){return new m({whichSide:e,headerHeight:this.modelManager.dimensionModel.get("headerHeight"),renderModel:this.modelManager.renderModel,focusModel:this.modelManager.focusModel,selectionModel:this.modelManager.selectionModel,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,coordRowModel:this.modelManager.coordRowModel,coordColumnModel:this.modelManager.coordColumnModel,domEventBus:this.domEventBus,viewFactory:this})},createSummary:function(e){var t={};return this.summaryOptions?(i.each(this.summaryOptions.columnContent,function(e,n){i.isFunction(e.template)&&(t[n]=e.template)}),new _({whichSide:e,columnModel:this.modelManager.columnModel,renderModel:this.modelManager.renderModel,dimensionModel:this.modelManager.dimensionModel,coordColumnModel:this.modelManager.coordColumnModel,summaryModel:this.modelManager.summaryModel,columnTemplateMap:t})):null;
},createHeaderResizeHandle:function(e,t,n){return new f({whichSide:e,handleHeights:t,frozenBorder:n,columnModel:this.modelManager.columnModel,dimensionModel:this.modelManager.dimensionModel,coordColumnModel:this.modelManager.coordColumnModel,domEventBus:this.domEventBus})},createBody:function(e){return new p({whichSide:e,renderModel:this.modelManager.renderModel,dimensionModel:this.modelManager.dimensionModel,domEventBus:this.domEventBus,viewFactory:this})},createBodyTable:function(e){return new M({whichSide:e,dimensionModel:this.modelManager.dimensionModel,coordColumnModel:this.modelManager.coordColumnModel,renderModel:this.modelManager.renderModel,columnModel:this.modelManager.columnModel,painterManager:this.painterManager,viewFactory:this})},createRowList:function(e){return new C({el:e.el,whichSide:e.whichSide,bodyTableView:e.bodyTableView,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,dimensionModel:this.modelManager.dimensionModel,selectionModel:this.modelManager.selectionModel,renderModel:this.modelManager.renderModel,focusModel:this.modelManager.focusModel,coordRowModel:this.modelManager.coordRowModel,painterManager:this.painterManager})},createSelectionLayer:function(e){return new w({whichSide:e,selectionModel:this.modelManager.selectionModel,dimensionModel:this.modelManager.dimensionModel,columnModel:this.modelManager.columnModel,coordRowModel:this.modelManager.coordRowModel,coordColumnModel:this.modelManager.coordColumnModel})},createEditingLayer:function(){return new v({renderModel:this.modelManager.renderModel,inputPainters:this.painterManager.getInputPainters(!0),domState:this.domState})},createDatePickerLayer:function(){return s?new y({focusModel:this.modelManager.focusModel,columnModel:this.modelManager.columnModel,textPainter:this.painterManager.getInputPainters().text,domState:this.domState,domEventBus:this.domEventBus}):null},createFocusLayer:function(e){return new R({whichSide:e,dimensionModel:this.modelManager.dimensionModel,columnModel:this.modelManager.columnModel,focusModel:this.modelManager.focusModel,coordRowModel:this.modelManager.coordRowModel,coordColumnModel:this.modelManager.coordColumnModel,coordConverterModel:this.modelManager.coordConverterModel})}});e.exports=D},function(e,t){e.exports=o},function(e,t,n){"use strict";var i=n(7),o=n(4),s=n(15),a=s.targetTypeConst,r=n(10).attrName,l=n(18),d=o.extend({initialize:function(e){o.prototype.initialize.call(this),this.gridId=e.gridId,this.dimensionModel=e.dimensionModel,this.dataModel=e.dataModel,this.viewFactory=e.viewFactory,this.domEventBus=e.domEventBus,this._createChildViews(),this.listenTo(this.dimensionModel,"setWidth",this._onSetWidth),i(window).on("resize.grid",i.proxy(this._onResizeWindow,this)),this.__$el=this.$el.clone()},events:{click:"_onClick",dblclick:"_onDblClick",mousedown:"_onMouseDown",mouseover:"_onMouseOver",mouseout:"_onMouseOut",selectstart:"_preventDrag",dragstart:"_preventDrag"},_createChildViews:function(){var e=this.viewFactory;this._addChildren([e.createContentArea(),e.createHeightResizeHandle(),e.createPagination(),e.createStateLayer(),e.createEditingLayer(),e.createDatePickerLayer(),e.createClipboard()])},_onResizeWindow:function(){this.domEventBus.trigger("windowResize")},_preventDrag:function(){return!1},_onSetWidth:function(){this.$el.width(this.dimensionModel.get("width"))},_onClick:function(e){var t=e.pageX-window.pageXOffset,n=e.pageY-window.pageYOffset,o=i(document.elementFromPoint(t,n)),r=new s(e,s.getTargetInfo(o));this.domEventBus.trigger("click",r),r.isStopped()||r.targetType!==a.CELL||this.domEventBus.trigger("click:cell",r)},_onDblClick:function(e){var t=i(e.target),n=new s(e,s.getTargetInfo(t));this.domEventBus.trigger("dblclick",n),n.isStopped()||n.targetType!==a.CELL||this.domEventBus.trigger("dblclick:cell",n)},_onMouseOver:function(e){var t=i(e.target),n=new s(e,s.getTargetInfo(t));this.domEventBus.trigger("mouseover",n)},_onMouseOut:function(e){var t=i(e.target),n=new s(e,s.getTargetInfo(t));this.domEventBus.trigger("mouseout",n)},_onMouseDown:function(e){var t=i(e.target),n=new s(e,s.getTargetInfo(t)),o=!t.is("input, a, button, select, textarea"),a="_button"===n.columnName&&t.parent().is("label");o&&!a&&(e.preventDefault(),t[0].unselectable=!0,this.domEventBus.trigger("mousedown:focus",n))},render:function(){var e=this._renderChildren();return this.$el.addClass(l.CONTAINER).attr(r.GRID_ID,this.gridId).append(e),this._triggerChildrenAppended(),this},destroy:function(){this.stopListening(),i(window).off("resize.grid"),this._destroyChildren(),this.$el.replaceWith(this.__$el),this.$el=this.__$el=null}});e.exports=d},function(e,t,n){"use strict";function i(e){return s("<div>").addClass(r.BORDER_LINE).addClass(e)}var o,s=n(7),a=n(4),r=n(18),l=n(10).frame;o=a.extend({initialize:function(e){a.prototype.initialize.call(this),this.viewFactory=e.viewFactory,this.dimensionModel=e.dimensionModel,this._addFrameViews()},className:r.CONTENT_AREA,_addFrameViews:function(){var e=this.viewFactory;this._addChildren([e.createFrame(l.L),e.createFrame(l.R)])},render:function(){var e=this.dimensionModel,t=e.getScrollXHeight(),n=this._renderChildren().concat([i(r.BORDER_TOP),i(r.BORDER_LEFT),i(r.BORDER_RIGHT),i(r.BORDER_BOTTOM).css("bottom",t)]);return e.get("scrollX")||this.$el.addClass(r.NO_SCROLL_X),e.get("scrollY")||this.$el.addClass(r.NO_SCROLL_Y),this.$el.append(n),this}}),e.exports=o},function(e,t,n){"use strict";var i=n(2),o=n(36),s=n(4),a={totalItems:1,itemsPerPage:10,visiblePages:5,centerAlign:!0},r="tui-pagination",l=s.extend({initialize:function(e){this.dimensionModel=e.dimensionModel,this.componentHolder=e.componentHolder,this._stopEventPropagation(),this.on("appended",this._onAppended)},className:r,render:function(){return this._destroyChildren(),this.componentHolder.setInstance("pagination",this._createComponent()),this},_stopEventPropagation:function(){this.$el.mousedown(function(e){e.stopPropagation()})},_onAppended:function(){this.dimensionModel.set("paginationHeight",this.$el.outerHeight())},_createOptionObject:function(){var e=this.componentHolder.getOptions("pagination");return e===!0&&(e={}),i.assign({},a,e)},_createComponent:function(){var e=o;if(!e)throw new Error("Cannot find component 'tui.component.Pagination'");return new e(this.$el,this._createOptionObject())}});e.exports=l},function(e,t){e.exports=s},function(e,t,n){"use strict";var i=n(4),o=n(18),s=n(38),a=i.extend({initialize:function(e){this.dimensionModel=e.dimensionModel,this.domEventBus=e.domEventBus,this.dragEmitter=new s({type:"resizeHeight",cursor:"row-resize",domEventBus:this.domEventBus}),this.on("appended",this._onAppended)},className:o.HEIGHT_RESIZE_HANDLE,events:{mousedown:"_onMouseDown"},_onAppended:function(){this.dimensionModel.set("resizeHandleHeight",this.$el.outerHeight())},_onMouseDown:function(e){e.preventDefault(),this.dragEmitter.start(e,{mouseOffsetY:e.offsetY})},render:function(){return this.$el.html("<button><span></span></button>"),this}});e.exports=a},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(3),a=n(15),r=s.defineClass({init:function(e){o.assign(this,{type:e.type,domEventBus:e.domEventBus,onDragMove:e.onDragMove,onDragEnd:e.onDragEnd,cursor:e.cursor,startData:null})},start:function(e,t){var n=new a(e,t);this.domEventBus.trigger("dragstart:"+this.type,n),n.isStopped()||this._startDrag(e.target,t)},_startDrag:function(e,t){this.startData=t,this._attachDragEvents(),this.cursor&&i("body").css("cursor",this.cursor),e.setCapture&&e.setCapture()},_endDrag:function(){this.startData=null,this._detachDragEvents(),this.cursor&&i("body").css("cursor","default"),document.releaseCapture&&document.releaseCapture()},_onMouseMove:function(e){var t=new a(e,{startData:this.startData,pageX:e.pageX,pageY:e.pageY});o.isFunction(this.onDragMove)&&this.onDragMove(t),t.isStopped()||this.domEventBus.trigger("dragmove:"+this.type,t)},_onMouseUp:function(e){var t=new a(e,{startData:this.startData});o.isFunction(this.onDragEnd)&&this.onDragEnd(t),t.isStopped()||(this.domEventBus.trigger("dragend:"+this.type,t),this._endDrag())},_onSelectStart:function(e){e.preventDefault()},_attachDragEvents:function(){i(document).on("mousemove.grid",o.bind(this._onMouseMove,this)).on("mouseup.grid",o.bind(this._onMouseUp,this)).on("selectstart.grid",o.bind(this._onSelectStart,this))},_detachDragEvents:function(){i(document).off(".grid")}});e.exports=r},function(e,t,n){"use strict";var i=n(2),o=n(4),s=n(10).renderState,a=n(18),r=n(40),l=n(10).dimension.TABLE_BORDER_WIDTH,d=o.extend({initialize:function(e){this.dimensionModel=e.dimensionModel,this.renderModel=e.renderModel,this.listenTo(this.dimensionModel,"change",this._refreshLayout),this.listenTo(this.renderModel,"change:state",this.render)},className:a.LAYER_STATE,template:i.template('<div class="'+a.LAYER_STATE_CONTENT+'">    <p><%= text %></p>    <% if (isLoading) { %>    <div class="'+a.LAYER_STATE_LOADING+'"></div>    <% } %></div>'),render:function(){var e=this.renderModel.get("state");return e===s.DONE?this.$el.hide():this._showLayer(e),this},_showLayer:function(e){var t=this.template({text:this._getMessage(e),isLoading:e===s.LOADING});this.$el.html(t).show(),this._refreshLayout()},_getMessage:function(e){switch(e){case s.LOADING:return r.get("display.loadingData");case s.EMPTY:return r.get("display.noData");default:return null}},_refreshLayout:function(){var e=this.dimensionModel,t=e.get("headerHeight"),n=e.get("bodyHeight"),i=e.getScrollXHeight(),o=e.getScrollYWidth();this.$el.css({top:t-l,height:n-i-l,left:0,right:o})}});e.exports=d},function(e,t,n){"use strict";function i(e){var t,n={};return o.each(e,function(e,i){o.each(e,function(e,o){t=[i,o].join("."),n[t]=e})},this),n}var o=n(2),s=n(16),a={en:{display:{noData:"No data.",loadingData:"Loading data.",resizeHandleGuide:"You can change the width of the column by mouse drag, and initialize the width by double-clicking."},net:{confirmCreate:"Are you sure you want to create {{count}} data?",confirmUpdate:"Are you sure you want to update {{count}} data?",confirmDelete:"Are you sure you want to delete {{count}} data?",confirmModify:"Are you sure you want to modify {{count}} data?",noDataToCreate:"No data to create.",noDataToUpdate:"No data to update.",noDataToDelete:"No data to delete.",noDataToModify:"No data to modify.",failResponse:"An error occurred while requesting data.\nPlease try again."}},ko:{display:{noData:"데이터가 존재하지 않습니다.",loadingData:"데이터를 불러오는 중입니다.",resizeHandleGuide:"마우스 드래그하여 컬럼 너비를 조정할 수 있고, 더블 클릭으로 컬럼 너비를 초기화할 수 있습니다."},net:{confirmCreate:"{{count}}건의 데이터를 생성하겠습니까?",confirmUpdate:"{{count}}건의 데이터를 수정하겠습니까?",confirmDelete:"{{count}}건의 데이터를 삭제하겠습니까?",confirmModify:"{{count}}건의 데이터를 처리하겠습니까?",noDataToCreate:"생성할 데이터가 없습니다.",noDataToUpdate:"수정할 데이터가 없습니다.",noDataToDelete:"삭제할 데이터가 없습니다.",noDataToModify:"처리할 데이터가 없습니다.",failResponse:"데이터 요청 중에 에러가 발생하였습니다.\n다시 시도하여 주시기 바랍니다."}}},r={};e.exports={setLanguage:function(e,t){var n,s,l=a[e];if(!l&&!t)throw new Error("You should set messages to map the locale code.");s=i(t),l?(n=i(l),r=o.extend(n,s)):r=s},get:function(e,t){var n=r[e];return t&&(n=s.replaceText(n,t)),n}}},function(e,t,n){"use strict";function i(e){return"key:clipboard"!==e.type}function o(e){return"key:clipboard"===e.type&&"paste"===e.command}var s,a=n(7),r=n(2),l=n(3),d=n(4),u=n(17),h=n(42),c=n(18),g=10,m=l.browser.edge,f=!!window.clipboardData;s=d.extend({initialize:function(e){r.assign(this,{focusModel:e.focusModel,clipboardModel:e.clipboardModel,domEventBus:e.domEventBus,isLocked:!1,lockTimerId:null}),this.listenTo(this.focusModel,"focusClipboard",this._onFocusClipboard),this.listenTo(this.clipboardModel,"change:text",this._onClipboardTextChange)},tagName:"div",className:c.CLIPBOARD,attributes:{contenteditable:!0},events:{keydown:"_onKeyDown",copy:"_onCopy",paste:"_onPaste",blur:"_onBlur"},render:function(){return this},_onBlur:function(){var e=this.focusModel;setTimeout(function(){e.refreshState()},0)},_onKeyDown:function(e){var t;return this.isLocked?void e.preventDefault():(t=h.generate(e),void(t&&(this._lock(),i(t)&&e.preventDefault(),o(t)||this.domEventBus.trigger(t.type,t))))},_onCopy:function(e){var t=this.clipboardModel.get("text");f||(e.originalEvent||e).clipboardData.setData("text/plain",t),e.preventDefault()},_onPaste:function(e){var t=(e.originalEvent||e).clipboardData||window.clipboardData;m||f?this._pasteInMSBrowsers(t):(e.preventDefault(),this._pasteInOtherBrowsers(t))},_onFocusClipboard:function(){try{this._hasFocus()||(this.$el.focus(),this._hasFocus()||this.$el.focus())}catch(e){}},_onClipboardTextChange:function(){var e=this.clipboardModel.get("text");f?window.clipboardData.setData("Text",e):this.$el.html(e).focus()},_pasteInOtherBrowsers:function(e){var t,n=this.clipboardModel,i=e.getData("text/html");i&&a(i).find("tbody").length>0?(this.$el.html("<table>"+a(i).find("tbody").html()+"</table>"),t=this.$el.find("table")[0],i=u.convertTableToData(t),this.$el.html("")):(i=e.getData("text/plain"),i=u.convertTextToData(i)),n.pasteClipboardDataToGrid(i)},_pasteInMSBrowsers:function(e){var t,n=this,i=this.clipboardModel,o=e.getData("Text");o=u.convertTextToData(o),setTimeout(function(){n.$el.find("table").length>0&&(t=n.$el.find("table")[0],o=u.convertTableToData(t)),n.$el.html(""),i.pasteClipboardDataToGrid(o)},0)},_lock:function(){this.isLocked=!0,this.lockTimerId=setTimeout(r.bind(this._unlock,this),g)},_unlock:function(){this.isLocked=!1,this.lockTimerId=null},_hasFocus:function(){return this.$el.is(":focus")}}),s.KEYDOWN_LOCK_TIME=g,e.exports=s},function(e,t,n){"use strict";function i(e){var t=[];return(e.ctrlKey||e.metaKey)&&t.push("ctrl"),e.shiftKey&&t.push("shift"),t.push(r[e.keyCode]),t.join("-")}var o=n(2),s=n(15),a={backspace:8,tab:9,enter:13,ctrl:17,esc:27,left:37,up:38,right:39,down:40,a:65,c:67,v:86,space:32,pageUp:33,pageDown:34,home:36,end:35,del:46},r=o.invert(a),l={up:["move","up"],down:["move","down"],left:["move","left"],right:["move","right"],pageUp:["move","pageUp"],pageDown:["move","pageDown"],home:["move","firstColumn"],end:["move","lastColumn"],enter:["edit","currentCell"],space:["edit","currentCell"],tab:["edit","nextCell"],backspace:["delete"],del:["delete"],"shift-tab":["edit","prevCell"],"shift-up":["select","up"],"shift-down":["select","down"],"shift-left":["select","left"],"shift-right":["select","right"],"shift-pageUp":["select","pageUp"],"shift-pageDown":["select","pageDown"],"shift-home":["select","firstColumn"],"shift-end":["select","lastColumn"],"ctrl-a":["select","all"],"ctrl-c":["clipboard","copy"],"ctrl-v":["clipboard","paste"],"ctrl-home":["move","firstCell"],"ctrl-end":["move","lastCell"],"ctrl-shift-home":["select","firstCell"],"ctrl-shift-end":["select","lastCell"]};e.exports={generate:function(e){var t,n=i(e),o=l[n];return o&&(t=new s(e,{type:"key:"+o[0],command:o[1]})),t}}},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(44),a=n(18),r=n(10).frame,l=s.extend({initialize:function(){s.prototype.initialize.apply(this,arguments),o.assign(this,{whichSide:r.L}),this.listenTo(this.dimensionModel,"change:lsideWidth",this._onFrameWidthChanged)},className:a.LSIDE_AREA,_onFrameWidthChanged:function(){this.$el.css({width:this.dimensionModel.get("lsideWidth")})},beforeRender:function(){this.$el.css({display:"block",width:this.dimensionModel.get("lsideWidth")})},afterRender:function(){this.dimensionModel.get("scrollX")&&this.$el.append(i("<div>").addClass(a.SCROLLBAR_LEFT_BOTTOM))}});e.exports=l},function(e,t,n){"use strict";var i=n(2),o=n(4),s=n(10),a=s.frame,r=s.summaryPosition,l=o.extend({initialize:function(e){o.prototype.initialize.call(this),i.assign(this,{viewFactory:e.viewFactory,renderModel:e.renderModel,dimensionModel:e.dimensionModel,whichSide:e.whichSide||a.R}),this.listenTo(this.renderModel,"columnModelChanged",this.render)},render:function(){return this.$el.empty(),this._destroyChildren(),this.beforeRender(),this._addChildren(this._createChildren()),this.$el.append(this._renderChildren()),this.afterRender(),this},beforeRender:function(){},afterRender:function(){},_createChildren:function(){var e,t=this.viewFactory,n=this.dimensionModel.get("summaryPosition"),i=t.createHeader(this.whichSide),o=t.createBody(this.whichSide),s=t.createSummary(this.whichSide,n);return e=n===r.TOP?[i,s,o]:n===r.BOTTOM?[i,o,s]:[i,o]}});e.exports=l},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(44),a=n(18),r=n(10),l=r.frame,d=r.summaryPosition,u=r.dimension.CELL_BORDER_WIDTH,h=s.extend({initialize:function(){s.prototype.initialize.apply(this,arguments),o.assign(this,{whichSide:l.R,$scrollBorder:null}),this.listenTo(this.dimensionModel,"change:lsideWidth change:rsideWidth",this._onFrameWidthChanged),this.listenTo(this.dimensionModel,"change:bodyHeight change:headerHeight",this._resetScrollBorderHeight)},className:a.RSIDE_AREA,_onFrameWidthChanged:function(){this._refreshLayout()},_refreshLayout:function(){var e=this.dimensionModel,t=e.get("rsideWidth"),n=e.get("lsideWidth");n>0&&!e.isDivisionBorderDoubled()&&(t+=u,n-=u),this.$el.css({width:t,marginLeft:n})},_resetScrollBorderHeight:function(){var e,t;this.$scrollBorder&&(e=this.dimensionModel,t=e.get("bodyHeight")-e.getScrollXHeight(),this.$scrollBorder.height(t))},beforeRender:function(){this.$el.css("display","block"),this._refreshLayout()},afterRender:function(){var e=this.dimensionModel,t=e.get("scrollX"),n=e.get("scrollY"),i=e.get("headerHeight"),o=e.get("summaryHeight"),s=e.get("summaryPosition");e.hasFrozenBorder()&&this._setFrozenBorder(i,t),n&&(this._setScrollbar(i,o,s,t),o&&this._applyStyleToSummary(i,o,s,t),this._resetScrollBorderHeight())},_setScrollbar:function(e,t,n,o){var s,r;s=i("<div />").addClass(a.SCROLLBAR_HEAD),r=i("<div />").addClass(a.SCROLLBAR_BORDER),n===d.TOP&&(e+=t),s.height(e-2),r.css("top",e+"px"),this.$el.append(s,r),o&&this.$el.append(i("<div>").addClass(a.SCROLLBAR_RIGHT_BOTTOM)),this.$scrollBorder=r},_setFrozenBorder:function(e,t){var n=this.dimensionModel.get("frozenBorderWidth"),o=this.viewFactory.createHeaderResizeHandle(l.L,[e],!0),s=this.$el;s.append(o.render().$el),s.find("."+a.HEAD_AREA).css("border-left-width",n),s.find("."+a.BODY_AREA).css("border-left-width",n),s.find("."+a.SUMMARY_AREA).css("border-left-width",n),s.find("."+a.TABLE).css("border-left-width",0),t&&s.append(i("<div>").addClass(a.FROZEN_BORDER_BOTTOM).css("width",n))},_applyStyleToSummary:function(e,t,n,o){var s,r={};n===d.TOP?(r.top=e,s=a.SUMMARY_AREA_RIGHT_TOP):(r.bottom=o?this.dimensionModel.getScrollXHeight():0,s=a.SUMMARY_AREA_RIGHT_BOTTOM),r.height=t,this.$el.append(i("<div>").addClass(a.SUMMARY_AREA_RIGHT).addClass(s).css(r))}});e.exports=h},function(e,t,n){"use strict";function i(e,t){for(var n=0,i=Math.min(e.length,t.length);n<i&&e[n].name===t[n].name;n+=1);return n}var o,s=n(7),a=n(2),r=n(4),l=n(16),d=n(10),u=n(18),h=n(15),c=n(38),g=d.frame,m=10,f=d.keyCode,p=d.attrName.COLUMN_NAME,M=d.dimension.CELL_BORDER_WIDTH,_=d.dimension.TABLE_BORDER_WIDTH,C=200;o=r.extend({initialize:function(e){r.prototype.initialize.call(this),a.assign(this,{renderModel:e.renderModel,coordColumnModel:e.coordColumnModel,selectionModel:e.selectionModel,focusModel:e.focusModel,columnModel:e.columnModel,dataModel:e.dataModel,coordRowModel:e.coordRowModel,viewFactory:e.viewFactory,domEventBus:e.domEventBus,headerHeight:e.headerHeight,whichSide:e.whichSide||g.R}),this.dragEmitter=new c({type:"header",domEventBus:this.domEventBus,onDragMove:a.bind(this._onDragMove,this)}),this.listenTo(this.renderModel,"change:scrollLeft",this._onScrollLeftChange).listenTo(this.coordColumnModel,"columnWidthChanged",this._onColumnWidthChanged).listenTo(this.selectionModel,"change:range",this._refreshSelectedHeaders).listenTo(this.focusModel,"change:columnName",this._refreshSelectedHeaders).listenTo(this.dataModel,"sortChanged",this._updateBtnSortState),this.whichSide===g.L&&"checkbox"===this.columnModel.get("selectType")&&this.listenTo(this.dataModel,"change:_button disabledChanged extraDataChanged add remove reset",a.debounce(a.bind(this._syncCheckedState,this),m))},className:u.HEAD_AREA,events:{click:"_onClick","keydown input":"_onKeydown","mousedown th":"_onMouseDown"},template:a.template('<table class="'+u.TABLE+'"><colgroup><%=colGroup%></colgroup><tbody><%=tBody%></tbody></table>'),templateHeader:a.template('<th <%=attrColumnName%>="<%=columnName%>" class="<%=className%>" height="<%=height%>" <%if(colspan > 0) {%>colspan=<%=colspan%> <%}%><%if(rowspan > 0) {%>rowspan=<%=rowspan%> <%}%>><%=title%><%=btnSort%></th>'),templateCol:a.template('<col <%=attrColumnName%>="<%=columnName%>" style="width:<%=width%>px">'),markupBtnSort:'<a class="'+u.BTN_SORT+'"></a>',_getColGroupMarkup:function(){var e=this._getColumnData(),t=e.widths,n=e.columns,i=[];return a.each(t,function(e,t){i.push(this.templateCol({attrColumnName:p,columnName:n[t].name,width:e+M}))},this),i.join("")},_getSelectedColumnNames:function(){var e=this.selectionModel.get("range").column,t=this.columnModel.getVisibleColumns(),n=t.slice(e[0],e[1]+1);return a.pluck(n,"name")},_onDragMove:function(e){var t=s(e.target);e.setData({columnName:t.closest("th").attr(p),isOnHeaderArea:s.contains(this.el,t[0])})},_getContainingMergedColumnNames:function(e){var t=this.columnModel,n=a.pluck(t.get("complexHeaderColumns"),"name");return a.filter(n,function(n){var i=t.getUnitColumnNamesIfMerged(n);return a.every(i,function(t){return a.contains(e,t)})})},_refreshSelectedHeaders:function(){var e,t,n=this.$el.find("th");this.selectionModel.hasSelection()?e=this._getSelectedColumnNames():this.focusModel.has(!0)&&(e=[this.focusModel.get("columnName")]),n.removeClass(u.CELL_SELECTED),e&&(t=this._getContainingMergedColumnNames(e),a.each(e.concat(t),function(e){n.filter("["+p+'="'+e+'"]').addClass(u.CELL_SELECTED)}))},_onKeydown:function(e){e.keyCode===f.TAB&&(e.preventDefault(),this.focusModel.focusClipboard())},_onMouseDown:function(e){var t,n=s(e.target);this._triggerPublicMousedown(e)&&(n.hasClass(u.BTN_SORT)||(t=n.closest("th").attr(p),t&&this.dragEmitter.start(e,{columnName:t})))},_triggerPublicMousedown:function(e){var t,n,i,o=new h(e,h.getTargetInfo(s(e.target)));return t=(new Date).getTime(),this.domEventBus.trigger("mousedown",o),n=(new Date).getTime(),i=n-t>C,!o.isStopped()&&!i},_getHeaderMainCheckbox:function(){return this.$el.find("th["+p+'="_button"] input')},_syncCheckedState:function(){var e,t,n=this.dataModel.getCheckedState();e=this._getHeaderMainCheckbox(),e.length&&(t=n.available?{checked:n.available===n.checked,disabled:!1}:{checked:!1,disabled:!0},e.prop(t))},_onColumnWidthChanged:function(){var e=this.coordColumnModel.getWidths(this.whichSide),t=this.$el.find("col"),n=this.coordRowModel;a.each(e,function(e,n){t.eq(n).css("width",e+M)}),this.whichSide===g.R&&a.defer(function(){n.syncWithDom()})},_onScrollLeftChange:function(e,t){this.whichSide===g.R&&(this.el.scrollLeft=t)},_onClick:function(e){var t=s(e.target),n=t.closest("th").attr(p),i=new h(e);"_button"===n&&t.is("input")?(i.setData({checked:t.prop("checked")}),this.domEventBus.trigger("click:headerCheck",i)):t.is("a."+u.BTN_SORT)&&(i.setData({columnName:n}),this.domEventBus.trigger("click:headerSort",i))},_updateBtnSortState:function(e){var t;this._$currentSortBtn&&this._$currentSortBtn.removeClass(u.BTN_SORT_DOWN+" "+u.BTN_SORT_UP),this._$currentSortBtn=this.$el.find("th["+p+'="'+e.columnName+'"] a.'+u.BTN_SORT),t=e.ascending?u.BTN_SORT_UP:u.BTN_SORT_DOWN,this._$currentSortBtn.addClass(t)},render:function(){var e;return this._destroyChildren(),this.$el.css({height:this.headerHeight-_}).html(this.template({colGroup:this._getColGroupMarkup(),tBody:this._getTableBodyMarkup()})),this.coordColumnModel.get("resizable")&&(e=this._getResizeHandleHeights(),this._addChildren(this.viewFactory.createHeaderResizeHandle(this.whichSide,e)),this.$el.append(this._renderChildren())),this},_getColumnData:function(){var e=this.coordColumnModel.getWidths(this.whichSide),t=this.columnModel.getVisibleColumns(this.whichSide,!0);return{widths:e,columns:t}},_getTableBodyMarkup:function(){var e,t,n=this._getColumnHierarchyList(),i=this._getHierarchyMaxRowCount(n),o=this.headerHeight,s=new Array(i),r=new Array(i),d=[],h=l.getRowHeight(i,o)-1,c=1;return a.each(n,function(t,l){var g=n[l].length,m=0;a.each(t,function(t,n){var a=t.name,l=[u.CELL,u.CELL_HEAD];t.validation&&t.validation.required&&l.push(u.CELL_REQRUIRED),c=g-1===n&&i-g+1>1?i-g+1:1,e=h*c,n===g-1?e=o-m-2:m+=e+1,r[n]===a?(s[n].pop(),d[n]+=1):d[n]=1,r[n]=a,s[n]=s[n]||[],s[n].push(this.templateHeader({attrColumnName:p,columnName:a,className:l.join(" "),height:e,colspan:d[n],rowspan:c,title:t.title,btnSort:t.sortable?this.markupBtnSort:""}))},this)},this),t=a.map(s,function(e){return"<tr>"+e.join("")+"</tr>"}),t.join("")},_getHierarchyMaxRowCount:function(e){var t=[0];return a.each(e,function(e){t.push(e.length)},this),Math.max.apply(Math,t)},_getColumnHierarchyList:function(){var e,t=this._getColumnData().columns;return e=a.map(t,function(e){return this._getColumnHierarchy(e).reverse()},this)},_getColumnHierarchy:function(e,t){var n=this.columnModel.get("complexHeaderColumns");return t=t||[],e&&(t.push(e),n&&a.each(n,function(n){s.inArray(e.name,n.childNames)!==-1&&this._getColumnHierarchy(n,t)},this)),t},_getResizeHandleHeights:function(){for(var e,t,n=this._getColumnHierarchyList(),o=this._getHierarchyMaxRowCount(n),s=l.getRowHeight(o,this.headerHeight)-1,a=[],r=1,d=n.length;r<d;r+=1)e=i(n[r],n[r-1]),t=s*(o-e),a.push(t);return a.push(s*o),a}}),o.DELAY_SYNC_CHECK=m,e.exports=o},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(3),a=n(4),r=n(10),l=n(18),d=n(38),u=n(40),h=r.attrName,c=r.frame,g=r.dimension.CELL_BORDER_WIDTH,m=r.dimension.RESIZE_HANDLE_WIDTH,f=3,p=7,M=a.extend({initialize:function(e){o.assign(this,{columnModel:e.columnModel,coordColumnModel:e.coordColumnModel,dimensionModel:e.dimensionModel,domEventBus:e.domEventBus,handleHeights:e.handleHeights,whichSide:e.whichSide||c.R,frozenBorder:e.frozenBorder||!1}),this.dragEmitter=new d({type:"resizeColumn",cursor:"col-resize",domEventBus:this.domEventBus,onDragMove:o.bind(this._onDragMove,this)}),this.listenTo(this.coordColumnModel,"columnWidthChanged",this._refreshHandlerPosition)},className:l.COLUMN_RESIZE_CONTAINER,events:function(){var e={};return e["mousedown ."+l.COLUMN_RESIZE_HANDLE]="_onMouseDown",e["dblclick ."+l.COLUMN_RESIZE_HANDLE]="_onDblClick",e},template:o.template("<div "+h.COLUMN_INDEX+'="<%=columnIndex%>" '+h.COLUMN_NAME+'="<%=columnName%>" class="'+l.COLUMN_RESIZE_HANDLE+' <%=lastClass%>" title="<%=title%>"style="width:<%=width%>;height:<%=height%>;display:<%=displayType%>"></div>'),_getColumnData:function(){var e=this.coordColumnModel.getWidths(this.whichSide),t=this.columnModel.getVisibleColumns(this.whichSide,!0);return{widths:e,columns:t}},_getResizeHandlerMarkup:function(){var e=this.frozenBorder,t=this._getColumnData().columns,n=t.length,i=e?this.dimensionModel.get("frozenBorderWidth")+f:p,s=o.map(e?[o.last(t)]:t,function(t,o){var s=t.name;return this.template({lastClass:o+1===n?l.COLUMN_RESIZE_HANDLE_LAST:"",columnIndex:e?n-1:o,columnName:s,width:i+"px",height:this.handleHeights[o]+"px",title:u.get("resizeHandleGuide"),displayType:t.resizable===!1?"none":"block"})},this);return s.join("")},render:function(){var e=this.dimensionModel.get("headerHeight"),t=this._getResizeHandlerMarkup(),n={display:"block"};return this.frozenBorder?this.$el.addClass(l.FROZEN_BORDER_TOP):o.extend(n,{marginTop:-e,height:e}),this.$el.empty().html(t).css(n),this._refreshHandlerPosition(),this},_refreshHandlerPosition:function(){var e=this._getColumnData(),t=e.widths,n=this.$el.find("."+l.COLUMN_RESIZE_HANDLE),i=Math.floor(m/2),o=0,a=0;s.forEachArray(n,function(e,s){var r=n.eq(s);this.frozenBorder||(o+=t[s]+g,a=o-i),r.css("left",a)},this)},_onMouseDown:function(e){var t=i(e.target),n=this.coordColumnModel.getWidths(this.whichSide),o=parseInt(t.attr(h.COLUMN_INDEX),10);this.dragEmitter.start(e,{width:n[o],columnIndex:this._getHandlerColumnIndex(o),pageX:e.pageX})},_onDragMove:function(e){var t=e.startData,n=e.pageX-t.pageX;e.setData({columnIndex:t.columnIndex,width:t.width+n})},_onDblClick:function(e){var t=i(e.target),n=parseInt(t.attr(h.COLUMN_INDEX),10);this.domEventBus.trigger("dblclick:resizeColumn",{columnIndex:this._getHandlerColumnIndex(n)})},_getHandlerColumnIndex:function(e){return this.whichSide===c.R?e+this.columnModel.getVisibleFrozenCount(!0):e}});e.exports=M},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(4),a=n(38),r=n(15),l=n(16),d=n(10),u=n(18),h=d.frame,c=200,g=10,m=s.extend({initialize:function(e){s.prototype.initialize.call(this),o.assign(this,{dimensionModel:e.dimensionModel,renderModel:e.renderModel,viewFactory:e.viewFactory,domEventBus:e.domEventBus,$container:null,whichSide:e&&e.whichSide||h.R}),this.listenTo(this.dimensionModel,"change:bodyHeight",this._onBodyHeightChange).listenTo(this.dimensionModel,"change:totalRowHeight",this._resetContainerHeight).listenTo(this.renderModel,"change:scrollTop",this._onScrollTopChange).listenTo(this.renderModel,"change:scrollLeft",this._onScrollLeftChange),this.dragEmitter=new a({type:"body",domEventBus:this.domEventBus,onDragMove:o.bind(this._onDragMove,this)})},className:u.BODY_AREA,events:function(){var e={};return e.scroll="_onScroll",e["mousedown ."+u.BODY_CONTAINER]="_onMouseDown",e},_onBodyHeightChange:function(e,t){this.$el.css("height",t+"px")},_resetContainerHeight:function(){this.$container.css({height:this.dimensionModel.get("totalRowHeight")})},_onScroll:function(e){var t={scrollTop:e.target.scrollTop};this.whichSide===h.R&&(t.scrollLeft=e.target.scrollLeft),this.renderModel.set(t)},_onScrollLeftChange:function(e,t){this.whichSide===h.R&&(this.el.scrollLeft=t)},_onScrollTopChange:function(e,t){this.el.scrollTop=t},_onMouseDown:function(e){var t=i(e.target),n=t.is("input, teaxarea");this._triggerPublicMousedown(e)&&(this._triggerBodyMousedown(e),n&&e.shiftKey&&e.preventDefault(),l.isRightClickEvent(e)||n&&!e.shiftKey||this.dragEmitter.start(e,{pageX:e.pageX,pageY:e.pageY}))},_triggerPublicMousedown:function(e){var t,n,o=new r(e,r.getTargetInfo(i(e.target))),s=!0;return o.targetType===r.targetTypeConst.DUMMY?s=!1:(t=(new Date).getTime(),this.domEventBus.trigger("mousedown",o),o.isStopped()?s=!1:(n=(new Date).getTime(),s=n-t<=c)),s},_triggerBodyMousedown:function(e){var t=new r(e,{pageX:e.pageX,pageY:e.pageY,shiftKey:e.shiftKey});this.domEventBus.trigger("mousedown:body",t)},_onDragMove:function(e){var t=e.startData,n={pageX:e.pageX,pageY:e.pageY};this._getMouseMoveDistance(t,n)<g&&e.stop()},_getMouseMoveDistance:function(e,t){var n=Math.abs(e.pageX-t.pageX),i=Math.abs(e.pageY-t.pageY);return Math.round(Math.sqrt(Math.pow(n,2)+Math.pow(i,2)))},render:function(){var e=this.whichSide;return this._destroyChildren(),this.dimensionModel.get("scrollX")||this.$el.css("overflow-x","hidden"),this.dimensionModel.get("scrollY")||e!==h.R||this.$el.css("overflow-y","hidden"),this.$el.css("height",this.dimensionModel.get("bodyHeight")),this.$container=i("<div>").addClass(u.BODY_CONTAINER),this.$el.append(this.$container),this._addChildren([this.viewFactory.createBodyTable(e),this.viewFactory.createSelectionLayer(e),this.viewFactory.createFocusLayer(e)]),this.$container.append(this._renderChildren()),this._resetContainerHeight(),this}});e.exports=m},function(e,t,n){"use strict";var i=n(2),o=n(4),s=n(10),a=n(18),r=s.dimension.CELL_BORDER_WIDTH,l=s.attrName.COLUMN_NAME,d=o.extend({initialize:function(e){o.prototype.initialize.call(this),i.assign(this,{dimensionModel:e.dimensionModel,coordColumnModel:e.coordColumnModel,renderModel:e.renderModel,columnModel:e.columnModel,viewFactory:e.viewFactory,painterManager:e.painterManager,whichSide:e.whichSide||"R"}),this.listenTo(this.coordColumnModel,"columnWidthChanged",this._onColumnWidthChanged),this.listenTo(this.renderModel,"change:dummyRowCount",this._onChangeDummyRowCount),this.listenTo(this.dimensionModel,"change:bodyHeight",this._resetHeight),this._attachAllTableEventHandlers()},
className:a.BODY_TABLE_CONTAINER,template:i.template('<table class="'+a.TABLE+'">   <colgroup><%=colGroup%></colgroup>   <tbody><%=tbody%></tbody></table>'),templateCol:i.template('<col <%=attrColumnName%>="<%=columnName%>" style="width:<%=width%>px">'),_onColumnWidthChanged:function(){var e=this.coordColumnModel.getWidths(this.whichSide),t=this.$el.find("col");i.each(e,function(e,n){t.eq(n).css("width",e+r)},this)},_onChangeDummyRowCount:function(){this._resetOverflow(),this._resetHeight()},_resetOverflow:function(){var e="visible";this.renderModel.get("dummyRowCount")>0&&(e="hidden"),this.$el.css("overflow",e)},_resetHeight:function(){var e=this.dimensionModel;this.renderModel.get("dummyRowCount")>0?this.$el.height(e.get("bodyHeight")-e.getScrollXHeight()):this.$el.css("height","")},resetTablePosition:function(){this.$el.css("top",this.renderModel.get("top"))},render:function(){return this._destroyChildren(),this.$el.html(this.template({colGroup:this._getColGroupMarkup(),tbody:""})),this._addChildren(this.viewFactory.createRowList({bodyTableView:this,el:this.$el.find("tbody"),whichSide:this.whichSide})),this._renderChildren(),this._resetHeight(),this._resetOverflow(),this},_attachAllTableEventHandlers:function(){var e=this.painterManager.getCellPainters();i.each(e,function(e){e.attachEventHandlers(this.$el,"")},this)},redrawTable:function(e){return this.$el[0].innerHTML=this.template({colGroup:this._getColGroupMarkup(),tbody:e}),this.$el.find("tbody")},_getColGroupMarkup:function(){var e=this.whichSide,t=this.coordColumnModel.getWidths(e),n=this.columnModel.getVisibleColumns(e,!0),o="";return i.each(n,function(e,n){o+=this.templateCol({attrColumnName:l,columnName:e.name,width:t[n]+r})},this),o}});e.exports=d},function(e,t,n){"use strict";var i=n(2),o=n(4),s=n(18),a=n(10),r=a.frame,l=a.attrName.COLUMN_NAME,d=a.dimension.CELL_BORDER_WIDTH,u=o.extend({initialize:function(e){this.columnTemplateMap=e.columnTemplateMap||{},this.whichSide=e.whichSide,this.columnModel=e.columnModel,this.dimensionModel=e.dimensionModel,this.coordColumnModel=e.coordColumnModel,this.renderModel=e.renderModel,this.summaryModel=e.summaryModel,this.listenTo(this.renderModel,"change:scrollLeft",this._onChangeScrollLeft),this.listenTo(this.coordColumnModel,"columnWidthChanged",this._onChangeColumnWidth),this.listenTo(this.columnModel,"setSummaryContent",this._setColumnContent),this.summaryModel&&this.listenTo(this.summaryModel,"change",this._onChangeSummaryValue)},className:s.SUMMARY_AREA,events:{scroll:"_onScrollView"},template:i.template('<table class="<%=className%>" style="height:<%=height%>px"><colgroup><%=colgroup%></colgroup><tbody><%=tbody%></tbody></table>'),templateHeader:i.template('<th <%=attrColumnName%>="<%=columnName%>" class="<%=className%>" ><%=value%></th>'),templateColgroup:i.template('<col <%=attrColumnName%>="<%=columnName%>" style="width:<%=width%>px">'),_onScrollView:function(e){this.whichSide===r.R&&this.renderModel.set("scrollLeft",e.target.scrollLeft)},_onChangeScrollLeft:function(e,t){this.whichSide===r.R&&(this.el.scrollLeft=t)},_onChangeColumnWidth:function(){var e=this.coordColumnModel.getWidths(this.whichSide),t=this.$el.find("col");i.each(e,function(e,n){t.eq(n).css("width",e+d)})},_setColumnContent:function(e,t){var n=this.$el.find("th["+l+'="'+e+'"]');n.html(t)},_onChangeSummaryValue:function(e,t){var n=this._generateValueHTML(e,t);this._setColumnContent(e,n)},_generateValueHTML:function(e,t){var n=this.columnTemplateMap[e],o="";return i.isFunction(n)&&(o=n(t)),o},_generateColgroupHTML:function(){var e=this.columnModel.getVisibleColumns(this.whichSide,!0),t=this.coordColumnModel.getWidths(this.whichSide),n=[];return i.each(t,function(t,i){n.push(this.templateColgroup({attrColumnName:l,columnName:e[i].name,width:t+d}))},this),n.join("")},_generateTbodyHTML:function(){var e=this.summaryModel,t=this.columnModel.getVisibleColumns(this.whichSide,!0);return i.reduce(t,function(t,n){var i,o=n.name;return e&&(i=e.getValue(n.name)),t+this.templateHeader({attrColumnName:l,columnName:o,className:s.CELL_HEAD+" "+s.CELL,value:this._generateValueHTML(o,i)})},"",this)},render:function(){var e=this.dimensionModel.get("summaryHeight"),t=this.dimensionModel.get("summaryPosition"),n="top"===t?s.SUMMARY_AREA_TOP:s.SUMMARY_AREA_BOTTOM;return this.$el.addClass(n),e&&this.$el.html(this.template({className:s.TABLE,height:e,tbody:this._generateTbodyHTML(),colgroup:this._generateColgroupHTML()})),this}});e.exports=u},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(3),a=n(4),r=n(10),l=n(18),d=r.attrName,u=r.frame,h=r.dimension.CELL_BORDER_WIDTH,c=a.extend({initialize:function(e){var t=e.focusModel,n=e.renderModel,i=e.selectionModel,s=e.coordRowModel,a=e.whichSide||"R";o.assign(this,{whichSide:a,bodyTableView:e.bodyTableView,focusModel:t,renderModel:n,selectionModel:i,coordRowModel:s,dataModel:e.dataModel,columnModel:e.columnModel,collection:n.getCollection(a),painterManager:e.painterManager,sortOptions:null,renderedRowKeys:null}),this.listenTo(this.collection,"change",this._onModelChange).listenTo(this.collection,"restore",this._onModelRestore).listenTo(t,"change:rowKey",this._refreshFocusedRow).listenTo(n,"rowListChanged",this.render),this.whichSide===u.L&&this.listenTo(t,"change:rowKey",this._refreshSelectedMetaColumns).listenTo(i,"change:range",this._refreshSelectedMetaColumns).listenTo(n,"rowListChanged",this._refreshSelectedMetaColumns)},_getColumns:function(){return this.columnModel.getVisibleColumns(this.whichSide,!0)},_removeOldRows:function(e){var t=o.indexOf(this.renderedRowKeys,e[0]),n=o.indexOf(this.renderedRowKeys,o.last(e)),i=this.$el.children("tr");i.slice(0,t).remove(),i.slice(n+1).remove()},_appendNewRows:function(e,t){var n=this.collection.slice(0,o.indexOf(e,t[0])),i=this.collection.slice(o.indexOf(e,o.last(t))+1);this.$el.prepend(this._getRowsHtml(n)),this.$el.append(this._getRowsHtml(i))},_resetRows:function(){var e,t=this._getRowsHtml(this.collection.models);if(c.isInnerHtmlOfTbodyReadOnly)e=this.bodyTableView.redrawTable(t),this.setElement(e,!1);else try{this.$el[0].innerHTML=t}catch(e){c.isInnerHtmlOfTbodyReadOnly=!0,this._resetRows()}},_getRowsHtml:function(e){var t=this.painterManager.getRowPainter(),n=o.pluck(this._getColumns(),"name");return o.map(e,function(e){return t.generateHtml(e,n)}).join("")},_getRowElement:function(e){return this.$el.find("tr["+d.ROW_KEY+"="+e+"]")},_refreshSelectedMetaColumns:function(){var e,t=this.$el.find("tr"),n="."+l.CELL_HEAD;e=this.selectionModel.hasSelection()?this._filterRowsByIndexRange(t,this.selectionModel.get("range").row):this._filterRowByKey(t,this.focusModel.get("rowKey")),t.find(n).removeClass(l.CELL_SELECTED),e.find(n).addClass(l.CELL_SELECTED)},_filterRowsByIndexRange:function(e,t){var n,o,s=this.renderModel,a=s.get("startIndex");return n=Math.max(t[0]-a,0),o=Math.max(t[1]-a+1,0),n||o?e.slice(n,o):i()},_filterRowByKey:function(e,t){var n=this.dataModel.indexOfRowKey(t),o=this.renderModel.get("startIndex");return o>n?i():e.eq(n-o)},_refreshFocusedRow:function(){var e=this.focusModel.get("rowKey"),t=this.focusModel.get("prevRowKey");this._setFocusedRowClass(t,!1),this._setFocusedRowClass(e,!0)},_setFocusedRowClass:function(e,t){var n=o.pluck(this._getColumns(),"name"),i={};o.each(n,function(n){var o,s=this.dataModel.getMainRowKey(e,n);i[s]||(i[s]=this._getRowElement(s)),o=i[s].find("td["+d.COLUMN_NAME+'="'+n+'"]'),o.toggleClass(l.CELL_CURRENT_ROW,t)},this)},render:function(e){var t,n=this.collection.pluck("rowKey");return this.bodyTableView.resetTablePosition(),e?this._resetRows():(t=o.intersection(n,this.renderedRowKeys),o.isEmpty(n)||o.isEmpty(t)||t.length/n.length<.7?this._resetRows():(this._removeOldRows(t),this._appendNewRows(n,t))),this.renderedRowKeys=n,this},_onModelChange:function(e){var t=e.get("rowKey"),n=this._getRowElement(t);"height"in e.changed?n.css("height",e.get("height")+h):(this.painterManager.getRowPainter().refresh(e.changed,n),this.coordRowModel.syncWithDom())},_onModelRestore:function(e){var t=this.dataModel.getElement(e.rowKey,e.columnName),n=this.columnModel.getEditType(e.columnName);this.painterManager.getCellPainter(n).refresh(e,t),this.coordRowModel.syncWithDom()}},{isInnerHtmlOfTbodyReadOnly:s.browser.msie&&s.browser.version<=9});e.exports=c},function(e,t,n){"use strict";var i=n(2),o=n(4),s=n(18),a=n(10).dimension.CELL_BORDER_WIDTH,r=n(10).frame,l=o.extend({initialize:function(e){i.assign(this,{whichSide:e.whichSide||r.R,dimensionModel:e.dimensionModel,coordRowModel:e.coordRowModel,coordColumnModel:e.coordColumnModel,columnModel:e.columnModel,selectionModel:e.selectionModel}),this._updateColumnWidths(),this.listenTo(this.coordColumnModel,"columnWidthChanged",this._onChangeColumnWidth),this.listenTo(this.selectionModel,"change:range",this.render)},className:s.LAYER_SELECTION,_updateColumnWidths:function(){this.columnWidths=this.coordColumnModel.getWidths(this.whichSide)},_onChangeColumnWidth:function(){this._updateColumnWidths(),this.render()},_getOwnSideColumnRange:function(e){var t=this.columnModel.getVisibleFrozenCount(),n=null;return this.whichSide===r.L?e[0]<t&&(n=[e[0],Math.min(e[1],t-1)]):e[1]>=t&&(n=[Math.max(e[0],t)-t,e[1]-t]),n},_getVerticalStyles:function(e){var t=this.coordRowModel,n=t.getOffsetAt(e[0]),i=t.getOffsetAt(e[1])+t.getHeightAt(e[1]);return{top:n+"px",height:i-n+"px"}},_getHorizontalStyles:function(e){var t=this.columnWidths,n=this.columnModel.getVisibleMetaColumnCount(),i=e[0],o=e[1],s=0,l=0,d=0;for(this.whichSide===r.L&&(i+=n,o+=n),o=Math.min(o,t.length-1);d<=o;d+=1)d<i?s+=t[d]+a:l+=t[d]+a;return l-=a,{left:s+"px",width:l+"px"}},render:function(){var e,t,n=this.selectionModel.get("range");return n&&(t=this._getOwnSideColumnRange(n.column)),t?(e=i.assign({},this._getVerticalStyles(n.row),this._getHorizontalStyles(t)),this.$el.show().css(e)):this.$el.hide(),this}});e.exports=l},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(4),a=n(10).dimension.CELL_BORDER_WIDTH,r=n(10).attrName,l=n(18),d=s.extend({initialize:function(e){this.renderModel=e.renderModel,this.domState=e.domState,this.inputPainters=e.inputPainters,this.listenTo(this.renderModel,"editingStateChanged",this._onEditingStateChanged)},className:l.LAYER_EDITING+" "+l.CELL_CONTENT,_startEditing:function(e){var t=e.rowKey,n=e.columnName,i=o.pick(e,"columnModel","editOptions","type"),s=this._calculateLayoutStyle(t,n,this._isWidthExpandable(i)),a=this.inputPainters[i];this.$el.html(a.generateHtml(e)).attr(r.ROW_KEY,t).attr(r.COLUMN_NAME,n).css(s).show(),this._adjustLeftPosition(),a.focus(this.$el)},_isWidthExpandable:function(e){return i.contains(["checkbox","radio"],e)},_finishEditing:function(){this.$el.empty().hide()},_adjustLeftPosition:function(){var e=this.domState.getWidth(),t=this.$el.outerWidth(),n=this.$el.position().left;n+t>e&&this.$el.css("left",e-t)},_adjustCellOffsetValue:function(e){var t=o.browser,n=e;return t.msie&&(9===t.version?n=e-1:t.version>9&&(n=Math.floor(e))),n},_calculateLayoutStyle:function(e,t,n){var i=this.domState.getOffset(),o=this.domState.getElement(e,t),s=o.offset(),r=o.outerHeight()+a,l=o.outerWidth()+a;return{top:this._adjustCellOffsetValue(s.top)-i.top,left:this._adjustCellOffsetValue(s.left)-i.left,height:r,minWidth:n?l:"",width:n?"":l,lineHeight:r+"px"}},_onEditingStateChanged:function(e){e.editing?this._startEditing(e):this._finishEditing()},render:function(){return i.each(this.inputPainters,function(e){e.attachEventHandlers(this.$el,"")},this),this}});e.exports=d},function(e,t,n){"use strict";var i,o=n(2),s=n(32),a=n(4),r=n(18),l="yyyy-MM-dd",d=[[new Date(1900,0,1),new Date(2999,11,31)]];i=a.extend({initialize:function(e){this.focusModel=e.focusModel,this.textPainter=e.textPainter,this.columnModel=e.columnModel,this.domState=e.domState,this.datePickerMap=this._createDatePickers(),this.$focusedInput=null,this.listenTo(this.textPainter,"focusIn",this._onFocusInTextInput),this.listenTo(e.domEventBus,"windowResize",this._closeDatePickerLayer)},className:r.LAYER_DATE_PICKER,events:{click:"_onClick"},_onClick:function(e){e.stopPropagation()},_createDatePickers:function(){var e={},t=this.columnModel.get("columnModelMap");return o.each(t,function(t){var n,i=t.name,o=t.component;o&&"datePicker"===o.name&&(n=o.options||{},e[i]=new s(this.$el,n),this._bindEventOnDatePicker(e[i]))},this),e},_bindEventOnDatePicker:function(e){var t=this;e.on("open",function(){t.textPainter.blockFocusingOut()}),e.on("close",function(){var e=t.focusModel,n=e.which(),i=n.rowKey,o=n.columnName,s=t.$focusedInput.val();t.textPainter.unblockFocusingOut(),e.isEditingCell(i,o)&&e.dataModel.setValue(i,o,s),e.finishEditing()})},_resetDatePicker:function(e,t,n){var i=this.datePickerMap[n],o=e.format||l,s=e.date||new Date,a=e.selectableRanges;i.setInput(t,{format:o,syncFromInput:!0}),a?i.setRanges(a):i.setRanges(d),""===t.val()&&(i.setDate(s),t.val(""))},_calculatePosition:function(e){var t=e.offset(),n=e.outerHeight(),i=this.domState.getOffset();return{top:t.top-i.top+n,left:t.left-i.left}},_onFocusInTextInput:function(e,t){var n,i=t.columnName,o=this.columnModel.getColumnModel(i).component,s=this.columnModel.getEditType(i);"text"===s&&o&&"datePicker"===o.name&&(n=o.options||{},this.$focusedInput=e,this.$el.css(this._calculatePosition(e)).show(),this._resetDatePicker(n,e,i),this.datePickerMap[i].open())},_closeDatePickerLayer:function(){var e=this.focusModel.which().columnName,t=this.datePickerMap[e];t&&t.isOpened()&&t.close()},render:function(){return this.$el.hide(),this}}),e.exports=i},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(4),a=n(10),r=n(18),l=a.frame,d=a.dimension.CELL_BORDER_WIDTH,u='<div class="'+r.LAYER_FOCUS_BORDER+'"></div>',h=r.LAYER_FOCUS_DEACTIVE,c=s.extend({initialize:function(e){this.focusModel=e.focusModel,this.columnModel=e.columnModel,this.coordRowModel=e.coordRowModel,this.coordColumnModel=e.coordColumnModel,this.coordConverterModel=e.coordConverterModel,this.whichSide=e.whichSide,this.borderEl={$top:i(u),$left:i(u),$right:i(u),$bottom:i(u)},this.listenTo(this.coordColumnModel,"columnWidthChanged",this._refreshCurrentLayout),this.listenTo(this.coordRowModel,"reset",this._refreshCurrentLayout),this.listenTo(this.focusModel,"blur",this._onBlur),this.listenTo(this.focusModel,"focus",this._onFocus),this.listenTo(this.focusModel,"change:active",this._onChangeActiveState)},className:r.LAYER_FOCUS,_refreshCurrentLayout:function(){var e=this.focusModel;"none"!==this.$el.css("display")&&this._refreshBorderLayout(e.get("rowKey"),e.get("columnName"))},_onBlur:function(){this.$el.hide()},_onFocus:function(e,t){var n=this.columnModel.isLside(t)?l.L:l.R;n===this.whichSide&&(this._refreshBorderLayout(e,t),this.$el.show())},_onChangeActiveState:function(e){e.changed.active?this.$el.removeClass(h):this.$el.addClass(h)},_refreshBorderLayout:function(e,t){var n=this.coordConverterModel.getCellPosition(e,t),i=n.right-n.left,o=n.bottom-n.top;this.borderEl.$left.css({top:n.top,left:n.left,width:d,height:o+d}),this.borderEl.$top.css({top:0===n.top?d:n.top,left:n.left,width:i+d,height:d}),this.borderEl.$right.css({top:n.top,left:n.left+i,width:d,height:o+d}),this.borderEl.$bottom.css({top:n.top+o,left:n.left,width:i+d,height:d})},render:function(){var e=this.$el;return o.each(this.borderEl,function(t){e.append(t)}),e.hide(),this}});e.exports=c},function(e,t,n){"use strict";var i=n(2),o=n(5);e.exports={create:function(){return i.extend({},o.Events)}}},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(10).attrName,a=n(18),r=o.defineClass({init:function(e){this.$el=e},_getBodyTableRows:function(e){return this.$el.find("."+e).find("."+a.BODY_TABLE_CONTAINER).find("tr["+s.ROW_KEY+"]")},_getMaxCellHeight:function(e){var t=e.find("."+a.CELL_CONTENT).map(function(){return this.scrollHeight}).get();return i.max(t)},getElement:function(e,t){return this.$el.find("tr["+s.ROW_KEY+"="+e+"]").find("td["+s.COLUMN_NAME+'="'+t+'"]')},getRowHeights:function(){var e,t,n,i,o=this._getBodyTableRows(a.LSIDE_AREA),s=this._getBodyTableRows(a.RSIDE_AREA),r=[];for(n=0,i=o.length;n<i;n+=1)e=this._getMaxCellHeight(o.eq(n)),t=this._getMaxCellHeight(s.eq(n)),r[n]=Math.max(e,t)+1;return r},getOffset:function(){return this.$el.offset()},getWidth:function(){return this.$el.width()},getParentHeight:function(){return this.$el.parent().height()},hasFocusedElement:function(){return!!this.$el.find(":focus").length}});e.exports=r},function(e,t,n){"use strict";var i=n(2),o=n(5),s=n(3),a=s.defineClass({init:function(e){this.publicObject=e},_listenForThrough:function(e,t){i.each(t,function(t){this.listenTo(e,t,i.bind(this._triggerOnPublic,this,t))},this)},_triggerOnPublic:function(e,t){this.publicObject.trigger(e,i.extend(t,{instance:this.publicObject}))},listenToNetAddon:function(e){this._listenForThrough(e,["beforeRequest","response","successResponse","failResponse","errorResponse"])},listenToDomEventBus:function(e){this._listenForThrough(e,["click","dblclick","mousedown","mouseover","mouseout"])},listenToFocusModel:function(e){this._listenForThrough(e,["focusChange"])},listenToDataModel:function(e){this._listenForThrough(e,["check","uncheck","deleteRange"])},listenToSelectionModel:function(e){this._listenForThrough(e,["selection"])}});i.extend(a.prototype,o.Events),e.exports=a},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(60),a=n(62),r=n(63),l=n(64),d=n(66),u=n(67),h=n(68),c=o.defineClass({init:function(e){this.gridId=e.gridId,this.selectType=e.selectType,this.fixedRowHeight=e.fixedRowHeight,this.inputPainters=this._createInputPainters(e.controller),this.cellPainters=this._createCellPainters(e.controller,e.domEventBus),this.rowPainter=this._createRowPainter()},_createInputPainters:function(e){return{text:new l({controller:e,inputType:"text"}),password:new l({controller:e,inputType:"password"}),checkbox:new u({controller:e,inputType:"checkbox"}),radio:new u({controller:e,inputType:"radio"}),select:new d({controller:e}),mainButton:new h({controller:e,inputType:this.selectType,gridId:this.gridId})}},_createCellPainters:function(e,t){var n={dummy:new r({controller:e}),normal:new a({domEventBus:t,controller:e,fixedRowHeight:this.fixedRowHeight,editType:"normal"})};return i.each(this.inputPainters,function(t,i){n[i]=new a({editType:i,controller:e,fixedRowHeight:this.fixedRowHeight,inputPainter:t})},this),n},_createRowPainter:function(){return new s({painterManager:this})},getCellPainter:function(e){return this.cellPainters[e]},getCellPainters:function(){return this.cellPainters},getInputPainters:function(e){var t=this.inputPainters;return e&&(t=i.omit(t,"mainButton")),t},getRowPainter:function(){return this.rowPainter}});e.exports=c},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(61),a=n(10),r=n(18),l=a.attrName,d=a.dimension.CELL_BORDER_WIDTH,u=o.defineClass(s,{init:function(e){s.apply(this,arguments),this.painterManager=e.painterManager},selector:"tr",template:i.template('<tr <%=rowKeyAttr%>" class="<%=className%>" style="height: <%=height%>px;"><%=contents%></tr>'),_getEditType:function(e,t){var n=o.pick(t.columnModel,"editOptions","type");return n||"normal"},_generateHtmlForDummyRow:function(e,t){var n=this.painterManager.getCellPainter("dummy"),o="";return i.each(t,function(t){o+=n.generateHtml(e,t)}),o},_generateHtmlForActualRow:function(e,t){var n="";return i.each(t,function(t){var i,o,s=e.get(t);s&&s.isMainRow&&(i=this._getEditType(t,s),o=this.painterManager.getCellPainter(i),n+=o.generateHtml(s))},this),n},generateHtml:function(e,t){var n,o=e.get("rowKey"),s=e.get("rowNum"),a=s%2?r.ROW_ODD:r.ROW_EVEN,u="";return i.isUndefined(o)?n=this._generateHtmlForDummyRow(s,t):(u=l.ROW_KEY+'="'+o+'"',n=this._generateHtmlForActualRow(e,t)),this.template({rowKeyAttr:u,height:e.get("height")+d,contents:n,className:a})},refresh:function(e,t){i.each(e,function(e,n){var i,o,s;"_extraData"!==n&&(s=t.find("td["+l.COLUMN_NAME+'="'+n+'"]'),i=this._getEditType(n,e),o=this.painterManager.getCellPainter(i),o.refresh(e,s))},this)}});e.exports=u},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(10).attrName,a=o.defineClass({init:function(e){this.controller=e.controller},events:{},selector:"",_getCellAddress:function(e){var t=e.closest("["+s.ROW_KEY+"]");return{rowKey:t.attr(s.ROW_KEY),columnName:t.attr(s.COLUMN_NAME)}},attachEventHandlers:function(e,t){i.each(this.events,function(n,o){var s=i.bind(this[n],this),a=t+" "+this.selector;e.on(o,a,s)},this)},generateHtml:function(){throw new Error("implement generateHtml() method")}});e.exports=a},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(61),a=n(16),r=n(10).attrName,l=n(18),d=o.defineClass(s,{init:function(e){s.apply(this,arguments),this.editType=e.editType,this.fixedRowHeight=e.fixedRowHeight,this.inputPainter=e.inputPainter,this.selector="td["+r.EDIT_TYPE+'="'+this.editType+'"]'},template:i.template('<td <%=attributeString%> style="<%=style%>"><%=contentHtml%></td>'),contentTemplate:i.template('<div class="<%=className%>" style="<%=style%>"><%=content%></div>'),_isEditableType:function(){return!i.contains(["normal","mainButton"],this.editType)},_getContentStyle:function(e){var t=e.columnModel.whiteSpace||"nowrap",n=[];return t&&n.push("white-space:"+t),this.fixedRowHeight&&n.push("max-height:"+e.height+"px"),n.join(";")},_getContentHtml:function(e){var t,n,o=e.columnModel.template,s=e.formattedValue,a=e.prefix,r=e.postfix;return this.inputPainter&&(s=this.inputPainter.generateHtml(e),this._shouldContentBeWrapped()&&!this._isUsingViewMode(e)&&(a=this._getSpanWrapContent(a,l.CELL_CONTENT_BEFORE),r=this._getSpanWrapContent(r,l.CELL_CONTENT_AFTER),s=this._getSpanWrapContent(s,l.CELL_CONTENT_INPUT),t=a+r+s)),t||(t=a+s+r),n="_number"===e.columnName&&i.isFunction(o)?o({content:t}):this.contentTemplate({content:t,className:l.CELL_CONTENT,style:this._getContentStyle(e)})},_isUsingViewMode:function(e){return o.pick(e,"columnModel","editOptions","useViewMode")!==!1},_shouldContentBeWrapped:function(){return i.contains(["text","password","select"],this.editType)},_getSpanWrapContent:function(e,t){return o.isFalsy(e)&&(e=""),'<span class="'+t+'">'+e+"</span>"},_getAttributes:function(e){var t=[e.className,l.CELL],n={align:e.columnModel.align||"left"};return n.class=t.join(" "),n[r.EDIT_TYPE]=this.editType,n[r.ROW_KEY]=e.rowKey,n[r.COLUMN_NAME]=e.columnName,e.rowSpan&&(n.rowspan=e.rowSpan),n},attachEventHandlers:function(e,t){s.prototype.attachEventHandlers.call(this,e,t),this.inputPainter&&this.inputPainter.attachEventHandlers(e,t+" "+this.selector)},generateHtml:function(e){var t=a.getAttributesString(this._getAttributes(e)),n=this._getContentHtml(e),i=e.columnModel.valign,o=[];return i&&o.push("vertical-align:"+i),this.template({attributeString:t,style:o.join(";"),contentHtml:n})},refresh:function(e,t){var n=["value","editing","disabled","listItems"],o=i.contains(e.changed,"editing")&&e.editing,s=i.intersection(n,e.changed).length>0,a=this._getAttributes(e),r="mainButton"===this.editType;t.attr(a),o&&!this._isUsingViewMode(e)?this.inputPainter.focus(t):r?t.find(this.inputPainter.selector).prop({checked:e.value,disabled:e.disabled}):s&&(t.html(this._getContentHtml(e)),t.scrollLeft(0))}});e.exports=d},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(61),a=n(16),r=n(10).attrName,l=n(18),d=o.defineClass(s,{init:function(){s.apply(this,arguments)},selector:"td["+r.EDIT_TYPE+'="dummy"]',template:i.template("<td "+r.COLUMN_NAME+'="<%=columnName%>" '+r.EDIT_TYPE+'="dummy" class="<%=className%>"></td>'),generateHtml:function(e,t){var n=[l.CELL,l.CELL_DUMMY];return a.isMetaColumn(t)&&n.push(l.CELL_HEAD),this.template({columnName:t,className:n.join(" ")})}});e.exports=d},function(e,t,n){"use strict";var i=n(2),o=n(3),s=n(65),a=n(16),r=n(18),l="."+r.CELL_CONTENT_TEXT,d="input[type=password]",u=o.defineClass(s,{init:function(e){s.apply(this,arguments),this.inputType=e.inputType,this.selector="text"===e.inputType?l:d,this._extendEvents({selectstart:"_onSelectStart"})},templateInput:i.template('<input class="<%=className%>" type="<%=type%>" value="<%=value%>" name="<%=name%>" align="center" maxLength="<%=maxLength%>" <%=disabled%>/>'),templateTextArea:i.template('<textarea class="<%=className%>" name="<%=name%>" maxLength="<%=maxLength%>" <%=disabled%>><%=value%></textarea>'),_onSelectStart:function(e){e.stopPropagation()},_convertStringToAsterisks:function(e){return Array(e.length+1).join("*")},_getDisplayValue:function(e){var t=e.formattedValue;return"password"===this.inputType&&(t=this._convertStringToAsterisks(e.value)),t},_generateInputHtml:function(e){var t=o.pick(e,"columnModel","editOptions","maxLength"),n={type:this.inputType,className:r.CELL_CONTENT_TEXT,value:e.value,name:a.getUniqueKey(),disabled:e.disabled?"disabled":"",maxLength:t};return"nowrap"!==e.whiteSpace?this.templateTextArea(n):this.templateInput(n)},focus:function(e){var t=e.find(this.selector);1!==t.length||t.is(":focus")||t.select()}});e.exports=u},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(5),a=n(3),r=n(61),l=n(10).keyName,d=a.defineClass(r,{init:function(){r.apply(this,arguments),this._finishedEditing=!1},events:{keydown:"_onKeyDown",focusin:"_onFocusIn",focusout:"_onFocusOut",change:"_onChange"},keyDownActions:{ESC:function(e){this.controller.finishEditing(e.address,!0)},ENTER:function(e){this.controller.finishEditing(e.address,!0,e.value)},TAB:function(e){this.controller.finishEditing(e.address,!0,e.value),this.controller.focusInToNextCell(e.shiftKey)}},_extendKeydownActions:function(e){this.keyDownActions=o.assign({},this.keyDownActions,e)},_extendEvents:function(e){this.events=o.assign({},this.events,e)},_executeCustomEventHandler:function(e,t){this.controller.executeCustomInputEventHandler(e,t)},_onChange:function(){},_onFocusIn:function(e){var t=i(e.target),n=this._getCellAddress(t),s=this;o.defer(function(){s._executeCustomEventHandler(e,n),s.trigger("focusIn",t,n),s.controller.startEditing(n)})},_onFocusOut:function(e){var t=i(e.target),n=this._getCellAddress(t);this._finishedEditing||(this._executeCustomEventHandler(e,n),this.trigger("focusOut",t,n),this.controller.finishEditing(n,!1,t.val()))},_onKeyDown:function(e){var t=e.keyCode||e.which,n=l[t],o=this.keyDownActions[n],s=i(e.target),a={$target:s,address:this._getCellAddress(s),shiftKey:e.shiftKey,value:s.val()};this._executeCustomEventHandler(e,a.address),o&&!e.shiftKey&&(o.call(this,a),e.preventDefault())},_getDisplayValue:function(){throw new Error("implement _getDisplayValue() method")},_generateInputHtml:function(){throw new Error("implement _generateInputHtml() method")},_isUsingViewMode:function(e){return a.pick(e,"columnModel","editOptions","useViewMode")!==!1},generateHtml:function(e){var t;return t=o.isNull(e.convertedHTML)?!this._isUsingViewMode(e)||e.editing?this._generateInputHtml(e):this._getDisplayValue(e):e.convertedHTML},focus:function(e){var t=e.find(this.selector);t.is(":focus")||t.eq(0).focus()},blockFocusingOut:function(){this._finishedEditing=!0},unblockFocusingOut:function(){this._finishedEditing=!1}});o.assign(d.prototype,s.Events),e.exports=d},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(3),a=n(65),r=n(16),l=s.defineClass(a,{init:function(){a.apply(this,arguments),this.selector="select"},template:o.template('<select name="<%=name%>" <%=disabled%>><%=options%></select>'),optionTemplate:o.template('<option value="<%=value%>" <%=selected%>><%=text%></option>'),_onChange:function(e){var t=i(e.target),n=this._getCellAddress(t);this.controller.setValueIfNotUsingViewMode(n,t.val())},_getDisplayValue:function(e){var t=o.find(e.listItems,function(t){return String(t.value)===String(e.value)});return t?t.text:""},_generateInputHtml:function(e){var t=o.reduce(e.listItems,function(t,n){return t+this.optionTemplate({value:n.value,text:n.text,selected:String(e.value)===String(n.value)?"selected":""})},"",this);return this.template({name:r.getUniqueKey(),disabled:e.disabled?"disabled":"",options:t})}});e.exports=l},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(3),a=n(65),r=n(16),l=s.defineClass(a,{init:function(e){a.apply(this,arguments),this.inputType=e.inputType,this.selector="fieldset[data-type="+this.inputType+"]",this._extendEvents({mousedown:"_onMouseDown"}),this._extendKeydownActions({TAB:function(e){var t;this._focusNextInput(e.$target,e.shiftKey)||(t=this._getCheckedValueString(e.$target),this.controller.finishEditing(e.address,!0,t),this.controller.focusInToNextCell(e.shiftKey))},ENTER:function(e){var t=this._getCheckedValueString(e.$target);this.controller.finishEditing(e.address,!0,t)},LEFT_ARROW:function(e){this._focusNextInput(e.$target,!0)},RIGHT_ARROW:function(e){this._focusNextInput(e.$target)},UP_ARROW:function(){},DOWN_ARROW:function(){}})},template:o.template('<fieldset data-type="<%=type%>"><%=content%></fieldset>'),inputTemplate:o.template('<input type="<%=type%>" data-value-type="<%=valueType%>" name="<%=name%>" id="<%=id%>" value="<%=value%>" <%=checked%> <%=disabled%> />'),labelTemplate:o.template('<label for="<%=id%>"><%=labelText%></label>'),_onChange:function(e){var t=i(e.target),n=this._getCellAddress(t),o=this._getCheckedValueString(t);this.controller.setValueIfNotUsingViewMode(n,o)},_onFocusOut:function(e){var t=i(e.target),n=this;o.defer(function(){var e,i;t.siblings("input:focus").length||(e=n._getCellAddress(t),i=n._getCheckedValueString(t),n.controller.finishEditing(e,!1,i))})},_onMouseDown:function(e){var t=i(e.target),n=t.closest("fieldset").find("input:focus").length>0;!t.is("input")&&n&&(e.stopPropagation(),e.preventDefault())},_focusNextInput:function(e,t){var n=t?"prevAll":"nextAll",i=e[n]("input");return!!i.length&&(i.first().focus(),!0)},_getCheckedValueString:function(e){var t,n=e.parent().find("input:checked"),o=[];return n.each(function(){var e=i(this),t=e.attr("data-value-type"),n=r.convertValueType(e.val(),t);o.push(n)}),t=1===o.length?o[0]:o.join(",")},_getCheckedValueSet:function(e){var t={};return o.each(String(e).split(","),function(e){t[e]=!0}),t},_getDisplayValue:function(e){var t=this._getCheckedValueSet(e.value),n=[];return o.each(e.listItems,function(e){t[e.value]&&n.push(e.text)}),n.join(",")},_generateInputHtml:function(e){var t=this._getCheckedValueSet(e.value),n=r.getUniqueKey(),i="";return o.each(e.listItems,function(o){var s=n+"_"+o.value;i+=this.inputTemplate({type:this.inputType,id:s,name:n,value:o.value,valueType:typeof o.value,checked:t[o.value]?"checked":"",disabled:e.isDisabled?"disabled":""}),o.text&&(i+=this.labelTemplate({id:s,labelText:o.text}))},this),this.template({type:this.inputType,content:i})},focus:function(e){var t=e.find("input");t.is(":focus")||t.eq(0).focus()}});e.exports=l},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(3),a=n(61),r=n(18),l=n(10).keyCode,d=r.CELL_MAIN_BUTTON,u=s.defineClass(a,{init:function(e){a.apply(this,arguments),this.selector="input."+d,this.inputType=e.inputType,this.gridId=e.gridId},events:{change:"_onChange",keydown:"_onKeydown"},template:o.template('<input class="<%=className%>" type="<%=type%>" name="<%=name%>" <%=checked%> <%=disabled%> />'),_onChange:function(e){var t=i(e.target),n=this._getCellAddress(t);this.controller.setValue(n,t.is(":checked"))},_onKeydown:function(e){var t;e.keyCode===l.TAB&&(e.preventDefault(),t=this._getCellAddress(i(e.target)),this.controller.focusInToRow(t.rowKey))},generateHtml:function(e){var t=e.columnModel.template,n=null,i={type:this.inputType,name:this.gridId,className:d};return n=o.isFunction(t)?t(o.extend(i,{checked:e.value,disabled:e.disabled})):this.template(o.extend(i,{checked:e.value?"checked":"",disabled:e.disabled?"disabled":""}))}});e.exports=u},function(e,t,n){"use strict";function i(e){return a.isString(e)&&(e=e.replace(/,/g,"")),a.isNumber(e)||isNaN(e)||l.isBlank(e)?e:Number(e)}function o(e){switch(e){case"focusin":return"onFocus";case"focusout":return"onBlur";case"keydown":return"onKeyDown";default:return""}}var s=n(7),a=n(2),r=n(3),l=n(16),d=r.defineClass({init:function(e){this.focusModel=e.focusModel,this.dataModel=e.dataModel,this.columnModel=e.columnModel,this.selectionModel=e.selectionModel},startEditing:function(e,t){
var n;return t&&this.focusModel.finishEditing(),n=this.focusModel.startEditing(e.rowKey,e.columnName),n&&this.selectionModel.end(),n},_checkMaxLength:function(e,t){var n=this.columnModel.getColumnModel(e),i=r.pick(n,"editOptions","maxLength");return i>0&&t.length>i?t.substring(0,i):t},finishEditing:function(e,t,n){var i,o,s=this.focusModel;return!!s.isEditingCell(e.rowKey,e.columnName)&&(this.selectionModel.enable(),a.isUndefined(n)||(i=this.dataModel.get(e.rowKey),o=i.get(e.columnName),l.isBlank(n)&&l.isBlank(o)||this.setValue(e,this._checkMaxLength(e.columnName,n))),s.finishEditing(),t?s.focusClipboard():a.defer(function(){s.refreshState()}),!0)},focusInToNextCell:function(e){var t=this.focusModel,n=e?t.prevAddress():t.nextAddress();t.focusIn(n.rowKey,n.columnName,!0)},focusInToRow:function(e){var t=this.focusModel;t.focusIn(e,t.firstColumnName(),!0)},executeCustomInputEventHandler:function(e,t){var n,i,s,r=this.columnModel.getColumnModel(t.columnName);r&&(n=e.type,i=r.editOptions||{},s=i[o(n)],a.isFunction(s)&&s.call(e.target,e,t))},setValue:function(e,t){var n=this.columnModel.getColumnModel(e.columnName);a.isString(t)&&(t=s.trim(t)),"number"===n.dataType&&(t=i(t)),"_button"===n.name?t?this.dataModel.check(e.rowKey):this.dataModel.uncheck(e.rowKey):this.dataModel.setValue(e.rowKey,e.columnName,t)},setValueIfNotUsingViewMode:function(e,t){var n=this.columnModel.getColumnModel(e.columnName);r.pick(n,"editOptions","useViewMode")||this.setValue(e,t)}});e.exports=d},function(e,t,n){"use strict";var i=n(7),o=n(5),s=n(2),a=n(4),r=n(71),l=n(16),d=n(72),u=n(40),h=n(15),c=n(10).renderState,g=200,m={createData:"net.confirmCreate",updateData:"net.confirmUpdate",deleteData:"net.confirmDelete",modifyData:"net.confirmModify"},f={createData:"net.noDataToCreate",updateData:"net.noDataToUpdate",deleteData:"net.noDataToDelete",modifyData:"net.noDataToModify"},p=a.extend({initialize:function(e){var t={initialRequest:!0,perPage:500,enableAjaxHistory:!0},n={readData:"",createData:"",updateData:"",deleteData:"",modifyData:"",downloadExcel:"",downloadExcelAll:""};e=s.assign(t,e),e.api=s.assign(n,e.api),s.assign(this,{dataModel:e.dataModel,renderModel:e.renderModel,router:null,domEventBus:e.domEventBus,pagination:e.pagination,api:e.api,enableAjaxHistory:e.enableAjaxHistory,readDataMethod:e.readDataMethod||"POST",perPage:e.perPage,curPage:1,timeoutIdForDelay:null,requestedFormData:null,isLocked:!1,lastRequestedReadData:null}),this._initializeDataModelNetwork(),this._initializeRouter(),this._initializePagination(),this.listenTo(this.dataModel,"sortChanged",this._onSortChanged),this.listenTo(this.domEventBus,"click:excel",this._onClickExcel),e.initialRequest&&(this.lastRequestedReadData||this._readDataAt(1,!1))},tagName:"form",events:{submit:"_onSubmit"},_initializePagination:function(){var e=this.pagination;e&&(e.setItemsPerPage(this.perPage),e.setTotalItems(1),e.on("beforeMove",i.proxy(this._onPageBeforeMove,this)))},_onRouterRead:function(e){var t=l.toQueryObject(e);this._requestReadData(t)},_onClickExcel:function(e){var t="all"===e.type?"excelAll":"excel";this.download(t)},_initializeDataModelNetwork:function(){this.dataModel.url=this.api.readData,this.dataModel.sync=i.proxy(this._sync,this)},_initializeRouter:function(){this.enableAjaxHistory&&(this.router=new r({net:this}),this.listenTo(this.router,"route:read",this._onRouterRead),o.History.started||o.history.start())},_onPageBeforeMove:function(e){var t=e.page;this.curPage!==t&&this._readDataAt(t,!0)},_onSubmit:function(e){e.preventDefault(),this._readDataAt(1,!1)},_setFormData:function(e){var t=s.clone(e);s.each(this.lastRequestedReadData,function(e,n){(s.isUndefined(t[n])||s.isNull(t[n]))&&e&&(t[n]="")}),d.setFormData(this.$el,t)},_sync:function(e,t,n){var a;"read"===e?(n=n||{},a=i.extend({},n),n.url||(a.url=s.result(t,"url")),this._ajax(a)):o.sync(o,e,t,n)},_lock:function(){var e=this.renderModel;this.timeoutIdForDelay=setTimeout(function(){e.set("state",c.LOADING)},g),this.isLocked=!0},_unlock:function(){null!==this.timeoutIdForDelay&&(clearTimeout(this.timeoutIdForDelay),this.timeoutIdForDelay=null),this.isLocked=!1},_getFormData:function(){return d.getFormData(this.$el)},_onReadSuccess:function(e,t){var n,i,o=this.pagination;e.setOriginalRowList(),o&&t.pagination&&(n=t.pagination.page,i=t.pagination.totalCount,o.setItemsPerPage(this.perPage),o.setTotalItems(i),o.movePageTo(n),this.curPage=n)},_onReadError:function(e,t,n){},reloadData:function(){this._requestReadData(this.lastRequestedReadData)},readData:function(e,t,n){n?(t||(t={}),t.perPage=this.perPage,this._changeSortOptions(t,this.dataModel.sortOptions)):t=s.assign({},this.lastRequestedReadData,t),t.page=e,this._requestReadData(t)},_requestReadData:function(e){var t=1;this._setFormData(e),this.isLocked||(this.renderModel.initializeVariables(),this._lock(),this.requestedFormData=s.clone(e),this.curPage=e.page||this.curPage,t=(this.curPage-1)*this.perPage+1,this.renderModel.set({startNumber:t}),this.lastRequestedReadData=s.clone(e),this.dataModel.fetch({requestType:"readData",data:e,type:this.readDataMethod,success:i.proxy(this._onReadSuccess,this),error:i.proxy(this._onReadError,this),reset:!0}),this.dataModel.setSortOptionValues(e.sortColumn,e.sortAscending)),this.router&&this.router.navigate("read/"+l.toQueryString(e),{trigger:!1})},_onSortChanged:function(e){e.requireFetch&&this._readDataAt(1,!0,e)},_changeSortOptions:function(e,t){t&&("rowKey"===t.columnName?(delete e.sortColumn,delete e.sortAscending):(e.sortColumn=t.columnName,e.sortAscending=t.ascending))},_readDataAt:function(e,t,n){var i;t=!!s.isUndefined(t)||t,i=t?this.requestedFormData:this._getFormData(),i.page=e,i.perPage=this.perPage,this._changeSortOptions(i,n),this._requestReadData(i)},request:function(e,t){var n=s.extend({url:this.api[e],type:null,hasDataParam:!0,checkedOnly:!0,modifiedOnly:!0,showConfirm:!0,updateOriginal:!1},t),i=this._getRequestParam(e,n);return i&&(n.updateOriginal&&this.dataModel.setOriginalRowList(),this._ajax(i)),!!i},download:function(e){var t,n="download"+l.toUpperCaseFirstLetter(e),o=this.requestedFormData,a=this.api[n];"excel"===e?(o.page=this.curPage,o.perPage=this.perPage):o=s.omit(o,"page","perPage"),t=i.param(o),window.location=a+"?"+t},setPerPage:function(e){this.perPage=e,this._readDataAt(1)},_getDataParam:function(e,t){var n,i=this.dataModel,o={createData:["createdRows"],updateData:["updatedRows"],deleteData:["deletedRows"],modifyData:["createdRows","updatedRows","deletedRows"]},a=o[e],r={},l=0;return t=s.defaults(t||{},{hasDataParam:!0,modifiedOnly:!0,checkedOnly:!0}),t.hasDataParam&&(t.modifiedOnly?(n=i.getModifiedRows({checkedOnly:t.checkedOnly}),s.each(n,function(e,t){s.contains(a,t)&&e.length&&(l+=e.length,r[t]=JSON.stringify(e))},this)):(r.rows=i.getRows(t.checkedOnly),l=r.rows.length)),{data:r,count:l}},_getRequestParam:function(e,t){var n={url:this.api[e],type:null,hasDataParam:!0,modifiedOnly:!0,checkedOnly:!0},o=i.extend(n,t),s=this._getDataParam(e,o),a=null;return o.showConfirm&&!this._isConfirmed(e,s.count)||(a={requestType:e,url:o.url,data:s.data,type:o.type}),a},_isConfirmed:function(e,t){var n=!1;return t>0?n=confirm(this._getConfirmMessage(e,t)):alert(this._getConfirmMessage(e,t)),n},_getConfirmMessage:function(e,t){var n=t>0?m[e]:f[e],i={count:t};return u.get(n,i)},_ajax:function(e){var t,n=new h(null,e.data);this.trigger("beforeRequest",n),n.isStopped()||(e=i.extend({requestType:""},e),t={url:e.url,data:e.data||{},type:e.type||"POST",dataType:e.dataType||"json",complete:i.proxy(this._onComplete,this,e.complete,e),success:i.proxy(this._onSuccess,this,e.success,e),error:i.proxy(this._onError,this,e.error,e)},e.url&&i.ajax(t))},_onComplete:function(e,t,n){this._unlock()},_onSuccess:function(e,t,n,i,o){var a=n&&n.message,r=new h(null,{httpStatus:i,requestType:t.requestType,requestParameter:t.data,responseData:n});if(this.trigger("response",r),!r.isStopped())if(n&&n.result){if(this.trigger("successResponse",r),r.isStopped())return;s.isFunction(e)&&e(n.data||{},i,o)}else{if(this.trigger("failResponse",r),r.isStopped())return;a&&alert(a)}},_onError:function(e,t,n,i){var o=new h(null,{httpStatus:i,requestType:t.requestType,requestParameter:t.data,responseData:null});this.renderModel.set("state",c.DONE),this.trigger("response",o),o.isStopped()||(this.trigger("errorResponse",o),o.isStopped()||n.readyState>1&&alert(u.get("net.failResponse")))}});e.exports=p},function(e,t,n){"use strict";var i=n(5),o=i.Router.extend({initialize:function(e){this.net=e.net},routes:{"read/:queryStr":"read"}});e.exports=o},function(e,t,n){"use strict";var i=n(7),o=n(2),s=n(3),a={setInput:{_changeToStringInArray:function(e){return o.each(e,function(t,n){e[n]=String(t)}),e},radio:function(e,t){e.checked=e.value===t},checkbox:function(e,t){o.isArray(t)?e.checked=i.inArray(e.value,this._changeToStringInArray(t))!==-1:e.checked=e.value===t},"select-one":function(e,t){var n=s.toArray(e.options);e.selectedIndex=o.findIndex(n,function(e){return e.value===t||e.text===t})},"select-multiple":function(e,t){var n=s.toArray(e.options);o.isArray(t)?(t=this._changeToStringInArray(t),o.each(n,function(e){e.selected=i.inArray(e.value,t)!==-1||i.inArray(e.text,t)!==-1})):this["select-one"].apply(this,arguments)},defaultAction:function(e,t){e.value=t}},getFormData:function(e){var t={},n=e.serializeArray(),i=s.isExisty;return o.each(n,function(e){var n=e.value||"",o=e.name;i(t[o])?t[o]=[].concat(t[o],n):t[o]=n}),t},getFormElement:function(e,t){var n;return e&&e.length&&(n=t?e.prop("elements")[String(t)]:e.prop("elements")),i(n)},setFormData:function(e,t){o.each(t,function(t,n){this.setFormElementValue(e,n,t)},this)},setFormElementValue:function(e,t,n){var i,a=this.getFormElement(e,t);a.length&&(o.isArray(n)||(n=String(n)),a=s.isHTMLTag(a)?[a]:a,a=s.toArray(a),o.each(a,function(e){i=this.setInput[e.type]?e.type:"defaultAction",this.setInput[i](e,n)},this))},setCursorToEnd:function(e){var t,n=e.value.length;if(e.focus(),e.setSelectionRange)try{e.setSelectionRange(n,n)}catch(e){}else if(e.createTextRange){t=e.createTextRange(),t.collapse(!0),t.moveEnd("character",n),t.moveStart("character",n);try{t.select()}catch(e){}}}};e.exports=a},function(e,t,n){"use strict";var i=n(7),o=n(3),s={pagination:null},a=o.defineClass({init:function(e){this.optionsMap=i.extend(!0,s,e),this.instanceMap={}},getInstance:function(e){return this.instanceMap[e]},setInstance:function(e,t){this.instanceMap[e]=t},getOptions:function(e){return this.optionsMap[e]}});e.exports=a},function(e,t,n){"use strict";function i(e){var t=[r.grid(e.grid),r.scrollbar(e.scrollbar),r.heightResizeHandle(e.heightResizeHandle),r.pagination(e.pagination),r.selection(e.selection)],n=e.cell;return n&&(t=t.concat([r.cell(n.normal),r.cellDummy(n.dummy),r.cellEditable(n.editable),r.cellHead(n.head),r.cellOddRow(n.oddRow),r.cellEvenRow(n.evenRow),r.cellRequired(n.required),r.cellDisabled(n.disabled),r.cellInvalid(n.invalid),r.cellCurrentRow(n.currentRow),r.cellSelectedHead(n.selectedHead),r.cellFocused(n.focused),r.cellFocusedInactive(n.focusedInactive)])),t.join("")}function o(e){var t=i(e);s("#"+d).remove(),a.appendStyleElement(d,t)}var s=n(7),a=n(16),r=n(75),l=n(10).themeName,d="tui-grid-theme-style",u={};u[l.DEFAULT]=n(77),u[l.STRIPED]=n(78),u[l.CLEAN]=n(79),e.exports={apply:function(e,t){var n=u[e];n||(n=u[l.DEFAULT]),n=s.extend(!0,{},n,t),o(n)},isApplied:function(){return 1===s("#"+d).length}}},function(e,t,n){"use strict";function i(e,t){return l(e).bg(t.background).text(t.text).build()}function o(e,t){return l(e).bg(t.background).border(t.border).build()}var s=n(2),a=n(76),r=n(18),l=s.bind(a.createClassRule,a);e.exports={grid:function(e){var t=l(r.CONTAINER).bg(e.background).text(e.text),n=l(r.CONTENT_AREA).border(e.border),i=l(r.TABLE).border(e.border),o=l(r.HEAD_AREA).border(e.border),s=l(r.SUMMARY_AREA).border(e.border),d=l(r.BORDER_LINE).bg(e.border),u=l(r.SCROLLBAR_HEAD).border(e.border),h=l(r.SCROLLBAR_BORDER).bg(e.border),c=l(r.SUMMARY_AREA_RIGHT).border(e.border);return a.buildAll([t,n,i,o,s,d,u,h,c])},scrollbar:function(e){var t=a.createWebkitScrollbarRules("."+r.CONTAINER,e),n=a.createIEScrollbarRule("."+r.CONTAINER,e),i=l(r.SCROLLBAR_RIGHT_BOTTOM).bg(e.background),o=l(r.SCROLLBAR_LEFT_BOTTOM).bg(e.background),s=l(r.SCROLLBAR_HEAD).bg(e.background),d=l(r.SUMMARY_AREA_RIGHT).bg(e.background),u=l(r.BODY_AREA).bg(e.background),h=l(r.FROZEN_BORDER_BOTTOM).bg(e.background);return a.buildAll(t.concat([n,i,o,s,d,u,h]))},heightResizeHandle:function(e){return o(r.HEIGHT_RESIZE_HANDLE,e)},pagination:function(e){return o(r.PAGINATION,e)},selection:function(e){return o(r.LAYER_SELECTION,e)},cell:function(e){var t=l(r.CELL).bg(e.background).border(e.border).borderWidth(e).text(e.text),n=l(r.BODY_AREA).border(e.border);return a.buildAll([t,n])},cellHead:function(e){var t=l(r.CELL_HEAD).bg(e.background).border(e.border).borderWidth(e).text(e.text),n=l(r.HEAD_AREA).bg(e.background).border(e.border),i=l(r.SUMMARY_AREA).bg(e.background);return a.buildAll([t,n,i])},cellEvenRow:function(e){return l(r.ROW_EVEN+">td").bg(e.background).build()},cellOddRow:function(e){return l(r.ROW_ODD+">td").bg(e.background).build()},cellSelectedHead:function(e){return a.create("."+r.CELL_HEAD+"."+r.CELL_SELECTED).bg(e.background).text(e.text).build()},cellFocused:function(e){var t=l(r.LAYER_FOCUS_BORDER).bg(e.border),n=l(r.LAYER_EDITING).border(e.border);return a.buildAll([t,n])},cellFocusedInactive:function(e){return a.create("."+r.LAYER_FOCUS_DEACTIVE+" ."+r.LAYER_FOCUS_BORDER).bg(e.border).build()},cellEditable:function(e){return i(r.CELL_EDITABLE,e)},cellRequired:function(e){return i(r.CELL_REQUIRED,e)},cellDisabled:function(e){return i(r.CELL_DISABLED,e)},cellDummy:function(e){return i(r.CELL_DUMMY,e)},cellInvalid:function(e){return i(r.CELL_INVALID,e)},cellCurrentRow:function(e){return i(r.CELL_CURRENT_ROW,e)}}},function(e,t,n){"use strict";var i=n(2),o=n(3),s=o.defineClass({init:function(e){if(!i.isString(e)||!e)throw new Error("The Selector must be a string and not be empty.");this._selector=e,this._propValues=[]},add:function(e,t){return t&&this._propValues.push(e+":"+t),this},border:function(e){return this.add("border-color",e)},borderWidth:function(e){var t,n=e.showVerticalBorder,o=e.showHorizontalBorder;return i.isBoolean(n)&&(t=n?"1px":"0",this.add("border-left-width",t).add("border-right-width",t)),i.isBoolean(o)&&(t=o?"1px":"0",this.add("border-top-width",t).add("border-bottom-width",t)),this},bg:function(e){return this.add("background-color",e)},text:function(e){return this.add("color",e)},build:function(){var e="";return this._propValues.length&&(e=this._selector+"{"+this._propValues.join(";")+"}"),e}});e.exports={create:function(e){return new s(e)},createClassRule:function(e){return this.create("."+e)},createWebkitScrollbarRules:function(e,t){return[this.create(e+" ::-webkit-scrollbar").bg(t.background),this.create(e+" ::-webkit-scrollbar-thumb").bg(t.thumb),this.create(e+" ::-webkit-scrollbar-thumb:hover").bg(t.active)]},createIEScrollbarRule:function(e,t){var n=["scrollbar-3dlight-color","scrollbar-darkshadow-color","scrollbar-track-color","scrollbar-shadow-color"],o=["scrollbar-face-color","scrollbar-highlight-color"],s=this.create(e);return i.each(n,function(e){s.add(e,t.background)}),i.each(o,function(e){s.add(e,t.thumb)}),s.add("scrollbar-arrow-color",t.active),s},buildAll:function(e){return i.map(e,function(e){return e.build()}).join("")}}},function(e,t){"use strict";e.exports={grid:{background:"#fff",border:"#ccc",text:"#444"},selection:{background:"#4daaf9",border:"#004082"},heightResizeHandle:{border:"#ccc",background:"#fff"},pagination:{border:"transparent",background:"transparent"},scrollbar:{background:"#f5f5f5",thumb:"#d9d9d9",active:"#c1c1c1"},cell:{normal:{background:"#fbfbfb",border:"#e0e0e0",showVerticalBorder:!0,showHorizontalBorder:!0},head:{background:"#eee",border:"#ccc",showVerticalBorder:!0,showHorizontalBorder:!0},selectedHead:{background:"#d8d8d8"},focused:{border:"#418ed4"},focusedInactive:{border:"#aaa"},required:{background:"#fffdeb"},editable:{background:"#fff"},disabled:{text:"#b0b0b0"},dummy:{background:"#fff"},invalid:{background:"#ff8080"},evenRow:{},oddRow:{},currentRow:{}}}},function(e,t,n){"use strict";var i=n(7),o=n(77);e.exports=i.extend(!0,{},o,{cell:{normal:{background:"#fff",border:"#e8e8e8",showVerticalBorder:!1,showHorizontalBorder:!1},oddRow:{background:"#f3f3f3"},evenRow:{background:"#fff"},head:{background:"#fff",showVerticalBorder:!1,showHorizontalBorder:!1}}})},function(e,t,n){"use strict";var i=n(7),o=n(77);e.exports=i.extend(!0,{},o,{grid:{border:"#c0c0c0"},cell:{normal:{background:"#fff",border:"#e0e0e0",showVerticalBorder:!1,showHorizontalBorder:!0},head:{background:"#fff",border:"#e0e0e0",showVerticalBorder:!1,showHorizontalBorder:!0},selectedHead:{background:"#e0e0e0"}}})},function(e,t){}])});